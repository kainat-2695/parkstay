import{s as e,g as t,r,k as n,l as i,h as o}from"./solana-vendor-BbetO8yy.js";import{e as s,d as a}from"./react-vendor-CP06BvWT.js";var l={},c=e.Buffer,u=c.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function d(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(c.isEncoding===u||!u(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=p,this.end=g,t=4;break;case"utf8":this.fillLast=h,t=4;break;case"base64":this.text=b,this.end=y,t=3;break;default:return this.write=m,void(this.end=w)}this.lastNeed=0,this.lastTotal=0,this.lastChar=c.allocUnsafe(t)}function f(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function h(e){var t=this.lastTotal-this.lastNeed,r=function(e,t){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function p(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function g(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function b(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function y(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function m(e){return e.toString(this.encoding)}function w(e){return e&&e.length?this.write(e):""}function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e){var t=function(e,t){if("object"!=_(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_(t)?t:t+""}function E(e,t,r){return(t=v(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach(function(t){E(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}l.StringDecoder=d,d.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},d.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},d.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var i=f(t[n]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--n<r||-2===i)return 0;if(i=f(t[n]),i>=0)return i>0&&(e.lastNeed=i-2),i;if(--n<r||-2===i)return 0;if(i=f(t[n]),i>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},d.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};var R={exports:{}},I={exports:{}};var T={AggregateError:class extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError("Expected input to be an Array, got "+typeof e);let t="";for(let r=0;r<e.length;r++)t+=`    ${e[r].stack}\n`;super(t),this.name="AggregateError",this.errors=e}},ArrayIsArray:e=>Array.isArray(e),ArrayPrototypeIncludes:(e,t)=>e.includes(t),ArrayPrototypeIndexOf:(e,t)=>e.indexOf(t),ArrayPrototypeJoin:(e,t)=>e.join(t),ArrayPrototypeMap:(e,t)=>e.map(t),ArrayPrototypePop:(e,t)=>e.pop(t),ArrayPrototypePush:(e,t)=>e.push(t),ArrayPrototypeSlice:(e,t,r)=>e.slice(t,r),Error:Error,FunctionPrototypeCall:(e,t,...r)=>e.call(t,...r),FunctionPrototypeSymbolHasInstance:(e,t)=>Function.prototype[Symbol.hasInstance].call(e,t),MathFloor:Math.floor,Number:Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties:(e,t)=>Object.defineProperties(e,t),ObjectDefineProperty:(e,t,r)=>Object.defineProperty(e,t,r),ObjectGetOwnPropertyDescriptor:(e,t)=>Object.getOwnPropertyDescriptor(e,t),ObjectKeys:e=>Object.keys(e),ObjectSetPrototypeOf:(e,t)=>Object.setPrototypeOf(e,t),Promise:Promise,PromisePrototypeCatch:(e,t)=>e.catch(t),PromisePrototypeThen:(e,t,r)=>e.then(t,r),PromiseReject:e=>Promise.reject(e),PromiseResolve:e=>Promise.resolve(e),ReflectApply:Reflect.apply,RegExpPrototypeTest:(e,t)=>e.test(t),SafeSet:Set,String:String,StringPrototypeSlice:(e,t,r)=>e.slice(t,r),StringPrototypeToLowerCase:e=>e.toLowerCase(),StringPrototypeToUpperCase:e=>e.toUpperCase(),StringPrototypeTrim:e=>e.trim(),Symbol:Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet:(e,t,r)=>e.set(t,r),Boolean:Boolean,Uint8Array:Uint8Array},O={exports:{}},x={format:(e,...t)=>e.replace(/%([sdifj])/g,function(...[e,r]){const n=t.shift();if("f"===r)return n.toFixed(6);if("j"===r)return JSON.stringify(n);if("s"===r&&"object"==typeof n){return`${n.constructor!==Object?n.constructor.name:""} {}`.trim()}return n.toString()}),inspect(e){switch(typeof e){case"string":if(e.includes("'")){if(!e.includes('"'))return`"${e}"`;if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}}};const{format:N,inspect:P}=x,{AggregateError:k}=T,L=globalThis.AggregateError||k,j=Symbol("kIsNodeError"),C=["string","function","number","object","Function","Object","boolean","bigint","symbol"],B=/^([A-Z][a-z0-9]*)+$/,M={};function D(e,t){if(!e)throw new M.ERR_INTERNAL_ASSERTION(t)}function U(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function F(e,t,r){r||(r=Error);class n extends r{constructor(...r){super(function(e,t,r){if("function"==typeof t)return D(t.length<=r.length,`Code: ${e}; The provided arguments length (${r.length}) does not match the required ones (${t.length}).`),t(...r);const n=(t.match(/%[dfijoOs]/g)||[]).length;return D(n===r.length,`Code: ${e}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),0===r.length?t:N(t,...r)}(e,t,r))}toString(){return`${this.name} [${e}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${e}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=e,n.prototype[j]=!0,M[e]=n}function W(e){const t="__node_internal_"+e.name;return Object.defineProperty(e,"name",{value:t}),e}let q=class extends Error{constructor(e="The operation was aborted",t=void 0){if(void 0!==t&&"object"!=typeof t)throw new M.ERR_INVALID_ARG_TYPE("options","Object",t);super(e,t),this.code="ABORT_ERR",this.name="AbortError"}};F("ERR_ASSERTION","%s",Error),F("ERR_INVALID_ARG_TYPE",(e,t,r)=>{D("string"==typeof e,"'name' must be a string"),Array.isArray(t)||(t=[t]);let n="The ";e.endsWith(" argument")?n+=`${e} `:n+=`"${e}" ${e.includes(".")?"property":"argument"} `,n+="must be ";const i=[],o=[],s=[];for(const l of t)D("string"==typeof l,"All expected entries have to be of type string"),C.includes(l)?i.push(l.toLowerCase()):B.test(l)?o.push(l):(D("object"!==l,'The value "object" should be written as "Object"'),s.push(l));if(o.length>0){const e=i.indexOf("object");-1!==e&&(i.splice(i,e,1),o.push("Object"))}if(i.length>0){switch(i.length){case 1:n+=`of type ${i[0]}`;break;case 2:n+=`one of type ${i[0]} or ${i[1]}`;break;default:{const e=i.pop();n+=`one of type ${i.join(", ")}, or ${e}`}}(o.length>0||s.length>0)&&(n+=" or ")}if(o.length>0){switch(o.length){case 1:n+=`an instance of ${o[0]}`;break;case 2:n+=`an instance of ${o[0]} or ${o[1]}`;break;default:{const e=o.pop();n+=`an instance of ${o.join(", ")}, or ${e}`}}s.length>0&&(n+=" or ")}switch(s.length){case 0:break;case 1:s[0].toLowerCase()!==s[0]&&(n+="an "),n+=`${s[0]}`;break;case 2:n+=`one of ${s[0]} or ${s[1]}`;break;default:{const e=s.pop();n+=`one of ${s.join(", ")}, or ${e}`}}if(null==r)n+=`. Received ${r}`;else if("function"==typeof r&&r.name)n+=`. Received function ${r.name}`;else if("object"==typeof r){var a;if(null!==(a=r.constructor)&&void 0!==a&&a.name)n+=`. Received an instance of ${r.constructor.name}`;else{n+=`. Received ${P(r,{depth:-1})}`}}else{let e=P(r,{colors:!1});e.length>25&&(e=`${e.slice(0,25)}...`),n+=`. Received type ${typeof r} (${e})`}return n},TypeError),F("ERR_INVALID_ARG_VALUE",(e,t,r="is invalid")=>{let n=P(t);n.length>128&&(n=n.slice(0,128)+"...");return`The ${e.includes(".")?"property":"argument"} '${e}' ${r}. Received ${n}`},TypeError),F("ERR_INVALID_RETURN_VALUE",(e,t,r)=>{var n;return`Expected ${e} to be returned from the "${t}" function but got ${null!=r&&null!==(n=r.constructor)&&void 0!==n&&n.name?`instance of ${r.constructor.name}`:"type "+typeof r}.`},TypeError),F("ERR_MISSING_ARGS",(...e)=>{let t;D(e.length>0,"At least one arg needs to be specified");const r=e.length;switch(e=(Array.isArray(e)?e:[e]).map(e=>`"${e}"`).join(" or "),r){case 1:t+=`The ${e[0]} argument`;break;case 2:t+=`The ${e[0]} and ${e[1]} arguments`;break;default:{const r=e.pop();t+=`The ${e.join(", ")}, and ${r} arguments`}}return`${t} must be specified`},TypeError),F("ERR_OUT_OF_RANGE",(e,t,r)=>{let n;if(D(t,'Missing "range" argument'),Number.isInteger(r)&&Math.abs(r)>2**32)n=U(String(r));else if("bigint"==typeof r){n=String(r);const e=BigInt(2)**BigInt(32);(r>e||r<-e)&&(n=U(n)),n+="n"}else n=P(r);return`The value of "${e}" is out of range. It must be ${t}. Received ${n}`},RangeError),F("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),F("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),F("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),F("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),F("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),F("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),F("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),F("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),F("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),F("ERR_STREAM_WRITE_AFTER_END","write after end",Error),F("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);var $,H={AbortError:q,aggregateTwoErrors:W(function(e,t){if(e&&t&&e!==t){if(Array.isArray(t.errors))return t.errors.push(e),t;const r=new L([t,e],t.message);return r.code=t.code,r}return e||t}),hideStackFrames:W,codes:M},z={exports:{}};function V(){if($)return z.exports;$=1;const{AbortController:e,AbortSignal:t}="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0;return z.exports=e,z.exports.AbortSignal=t,z.exports.default=e,z.exports}!function(e){const n=t,{format:i,inspect:o}=x,{codes:{ERR_INVALID_ARG_TYPE:s}}=H,{kResistStopPropagation:a,AggregateError:l,SymbolDispose:c}=T,u=globalThis.AbortSignal||V().AbortSignal,d=globalThis.AbortController||V().AbortController,f=Object.getPrototypeOf(async function(){}).constructor,h=globalThis.Blob||n.Blob,p=void 0!==h?function(e){return e instanceof h}:function(e){return!1},g=(e,t)=>{if(void 0!==e&&(null===e||"object"!=typeof e||!("aborted"in e)))throw new s(t,"AbortSignal",e)};e.exports={AggregateError:l,kEmptyObject:Object.freeze({}),once(e){let t=!1;return function(...r){t||(t=!0,e.apply(this,r))}},createDeferredPromise:function(){let e,t;return{promise:new Promise((r,n)=>{e=r,t=n}),resolve:e,reject:t}},promisify:e=>new Promise((t,r)=>{e((e,...n)=>e?r(e):t(...n))}),debuglog:()=>function(){},format:i,inspect:o,types:{isAsyncFunction:e=>e instanceof f,isArrayBufferView:e=>ArrayBuffer.isView(e)},isBlob:p,deprecate:(e,t)=>e,addAbortListener:r().addAbortListener||function(e,t){if(void 0===e)throw new s("signal","AbortSignal",e);let r;return g(e,"signal"),((e,t)=>{if("function"!=typeof e)throw new s(t,"Function",e)})(t,"listener"),e.aborted?queueMicrotask(()=>t()):(e.addEventListener("abort",t,{__proto__:null,once:!0,[a]:!0}),r=()=>{e.removeEventListener("abort",t)}),{__proto__:null,[c](){var e;null===(e=r)||void 0===e||e()}}},AbortSignalAny:u.any||function(e){if(1===e.length)return e[0];const t=new d,r=()=>t.abort();return e.forEach(e=>{g(e,"signals"),e.addEventListener("abort",r,{once:!0})}),t.signal.addEventListener("abort",()=>{e.forEach(e=>e.removeEventListener("abort",r))},{once:!0}),t.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}(O);var G=O.exports,K={};const{ArrayIsArray:J,ArrayPrototypeIncludes:Y,ArrayPrototypeJoin:Z,ArrayPrototypeMap:X,NumberIsInteger:Q,NumberIsNaN:ee,NumberMAX_SAFE_INTEGER:te,NumberMIN_SAFE_INTEGER:re,NumberParseInt:ne,ObjectPrototypeHasOwnProperty:ie,RegExpPrototypeExec:oe,String:se,StringPrototypeToUpperCase:ae,StringPrototypeTrim:le}=T,{hideStackFrames:ce,codes:{ERR_SOCKET_BAD_PORT:ue,ERR_INVALID_ARG_TYPE:de,ERR_INVALID_ARG_VALUE:fe,ERR_OUT_OF_RANGE:he,ERR_UNKNOWN_SIGNAL:pe}}=H,{normalizeEncoding:ge}=G,{isAsyncFunction:be,isArrayBufferView:ye}=G.types,me=ce((e,t,r=re,n=te)=>{if("number"!=typeof e)throw new de(t,"number",e);if(!Q(e))throw new he(t,"an integer",e);if(e<r||e>n)throw new he(t,`>= ${r} && <= ${n}`,e)});function we(e,t,r){return null!=e&&ie(e,t)?e[t]:r}ce((e,t,r=-2147483648,n=2147483647)=>{if("number"!=typeof e)throw new de(t,"number",e);if(!Q(e))throw new he(t,"an integer",e);if(e<r||e>n)throw new he(t,`>= ${r} && <= ${n}`,e)}),ce((e,t,r=!1)=>{if("number"!=typeof e)throw new de(t,"number",e);if(!Q(e))throw new he(t,"an integer",e);const n=r?1:0,i=4294967295;if(e<n||e>i)throw new he(t,`>= ${n} && <= ${i}`,e)}),ce((e,t,r)=>{if(!Y(r,e)){const n=Z(X(r,e=>"string"==typeof e?`'${e}'`:se(e)),", ");throw new fe(t,e,"must be one of: "+n)}});const _e=ce((e,t,r=null)=>{const n=we(r,"allowArray",!1),i=we(r,"allowFunction",!1);if(!we(r,"nullable",!1)&&null===e||!n&&J(e)||"object"!=typeof e&&(!i||"function"!=typeof e))throw new de(t,"Object",e)});ce((e,t)=>{if(null!=e&&"object"!=typeof e&&"function"!=typeof e)throw new de(t,"a dictionary",e)}),ce((e,t,r=0)=>{if(!J(e))throw new de(t,"Array",e);if(e.length<r){throw new fe(t,e,`must be longer than ${r}`)}}),ce((e,t="buffer")=>{if(!ye(e))throw new de(t,["Buffer","TypedArray","DataView"],e)});const ve=ce((e,t)=>{if(void 0!==e&&(null===e||"object"!=typeof e||!("aborted"in e)))throw new de(t,"AbortSignal",e)}),Ee=ce((e,t)=>{if("function"!=typeof e)throw new de(t,"Function",e)});ce((e,t)=>{if("function"!=typeof e||be(e))throw new de(t,"Function",e)}),ce((e,t)=>{if(void 0!==e)throw new de(t,"undefined",e)});var Se,Ae,Re={validateBoolean:function(e,t){if("boolean"!=typeof e)throw new de(t,"boolean",e)},validateFunction:Ee,validateInteger:me,validateObject:_e,validateAbortSignal:ve},Ie={exports:{}},Te={exports:{}},Oe=Te.exports={};function xe(){throw new Error("setTimeout has not been defined")}function Ne(){throw new Error("clearTimeout has not been defined")}function Pe(e){if(Se===setTimeout)return setTimeout(e,0);if((Se===xe||!Se)&&setTimeout)return Se=setTimeout,setTimeout(e,0);try{return Se(e,0)}catch(t){try{return Se.call(null,e,0)}catch(r){return Se.call(this,e,0)}}}!function(){try{Se="function"==typeof setTimeout?setTimeout:xe}catch(e){Se=xe}try{Ae="function"==typeof clearTimeout?clearTimeout:Ne}catch(e){Ae=Ne}}();var ke,Le=[],je=!1,Ce=-1;function Be(){je&&ke&&(je=!1,ke.length?Le=ke.concat(Le):Ce=-1,Le.length&&Me())}function Me(){if(!je){var e=Pe(Be);je=!0;for(var t=Le.length;t;){for(ke=Le,Le=[];++Ce<t;)ke&&ke[Ce].run();Ce=-1,t=Le.length}ke=null,je=!1,function(e){if(Ae===clearTimeout)return clearTimeout(e);if((Ae===Ne||!Ae)&&clearTimeout)return Ae=clearTimeout,clearTimeout(e);try{return Ae(e)}catch(t){try{return Ae.call(null,e)}catch(r){return Ae.call(this,e)}}}(e)}}function De(e,t){this.fun=e,this.array=t}function Ue(){}Oe.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];Le.push(new De(e,t)),1!==Le.length||je||Pe(Me)},De.prototype.run=function(){this.fun.apply(null,this.array)},Oe.title="browser",Oe.browser=!0,Oe.env={},Oe.argv=[],Oe.version="",Oe.versions={},Oe.on=Ue,Oe.addListener=Ue,Oe.once=Ue,Oe.off=Ue,Oe.removeListener=Ue,Oe.removeAllListeners=Ue,Oe.emit=Ue,Oe.prependListener=Ue,Oe.prependOnceListener=Ue,Oe.listeners=function(e){return[]},Oe.binding=function(e){throw new Error("process.binding is not supported")},Oe.cwd=function(){return"/"},Oe.chdir=function(e){throw new Error("process.chdir is not supported")},Oe.umask=function(){return 0};var Fe=Te.exports;const{SymbolAsyncIterator:We,SymbolIterator:qe,SymbolFor:$e}=T,He=$e("nodejs.stream.destroyed"),ze=$e("nodejs.stream.errored"),Ve=$e("nodejs.stream.readable"),Ge=$e("nodejs.stream.writable"),Ke=$e("nodejs.stream.disturbed"),Je=$e("nodejs.webstream.isClosedPromise"),Ye=$e("nodejs.webstream.controllerErrorFunction");function Ze(e,t=!1){var r;return!(!e||"function"!=typeof e.pipe||"function"!=typeof e.on||t&&("function"!=typeof e.pause||"function"!=typeof e.resume)||e._writableState&&!1===(null===(r=e._readableState)||void 0===r?void 0:r.readable)||e._writableState&&!e._readableState)}function Xe(e){var t;return!(!e||"function"!=typeof e.write||"function"!=typeof e.on||e._readableState&&!1===(null===(t=e._writableState)||void 0===t?void 0:t.writable))}function Qe(e){return e&&(e._readableState||e._writableState||"function"==typeof e.write&&"function"==typeof e.on||"function"==typeof e.pipe&&"function"==typeof e.on)}function et(e){return!(!e||Qe(e)||"function"!=typeof e.pipeThrough||"function"!=typeof e.getReader||"function"!=typeof e.cancel)}function tt(e){return!(!e||Qe(e)||"function"!=typeof e.getWriter||"function"!=typeof e.abort)}function rt(e){return!(!e||Qe(e)||"object"!=typeof e.readable||"object"!=typeof e.writable)}function nt(e){if(!Qe(e))return null;const t=e._writableState,r=e._readableState,n=t||r;return!!(e.destroyed||e[He]||null!=n&&n.destroyed)}function it(e,t){if(!Ze(e))return null;const r=e._readableState;return(null==r||!r.errored)&&("boolean"!=typeof(null==r?void 0:r.endEmitted)?null:!!(r.endEmitted||!1===t&&!0===r.ended&&0===r.length))}function ot(e){return e&&null!=e[Ve]?e[Ve]:"boolean"!=typeof(null==e?void 0:e.readable)?null:!nt(e)&&(Ze(e)&&e.readable&&!it(e))}function st(e){return e&&null!=e[Ge]?e[Ge]:"boolean"!=typeof(null==e?void 0:e.writable)?null:!nt(e)&&(Xe(e)&&e.writable&&!function(e){if(!Xe(e))return null;if(!0===e.writableEnded)return!0;const t=e._writableState;return(null==t||!t.errored)&&("boolean"!=typeof(null==t?void 0:t.ended)?null:t.ended)}(e))}function at(e){return"boolean"==typeof e._closed&&"boolean"==typeof e._defaultKeepAlive&&"boolean"==typeof e._removedConnection&&"boolean"==typeof e._removedContLen}var lt={isDestroyed:nt,kIsDestroyed:He,isDisturbed:function(e){var t;return!(!e||!(null!==(t=e[Ke])&&void 0!==t?t:e.readableDidRead||e.readableAborted))},isErrored:function(e){var t,r,n,i,o,s,a,l,c,u;return!(!e||!(null!==(t=null!==(r=null!==(n=null!==(i=null!==(o=null!==(s=e[ze])&&void 0!==s?s:e.readableErrored)&&void 0!==o?o:e.writableErrored)&&void 0!==i?i:null===(a=e._readableState)||void 0===a?void 0:a.errorEmitted)&&void 0!==n?n:null===(l=e._writableState)||void 0===l?void 0:l.errorEmitted)&&void 0!==r?r:null===(c=e._readableState)||void 0===c?void 0:c.errored)&&void 0!==t?t:null===(u=e._writableState)||void 0===u?void 0:u.errored))},isReadable:ot,kIsClosedPromise:Je,kControllerErrorFunction:Ye,isClosed:function(e){if(!Qe(e))return null;if("boolean"==typeof e.closed)return e.closed;const t=e._writableState,r=e._readableState;return"boolean"==typeof(null==t?void 0:t.closed)||"boolean"==typeof(null==r?void 0:r.closed)?(null==t?void 0:t.closed)||(null==r?void 0:r.closed):"boolean"==typeof e._closed&&at(e)?e._closed:null},isDuplexNodeStream:function(e){return!(!e||"function"!=typeof e.pipe||!e._readableState||"function"!=typeof e.on||"function"!=typeof e.write)},isFinished:function(e,t){return Qe(e)?!!nt(e)||(!1===(null==t?void 0:t.readable)||!ot(e))&&(!1===(null==t?void 0:t.writable)||!st(e)):null},isIterable:function(e,t){return null!=e&&(!0===t?"function"==typeof e[We]:!1===t?"function"==typeof e[qe]:"function"==typeof e[We]||"function"==typeof e[qe])},isReadableNodeStream:Ze,isReadableStream:et,isReadableFinished:it,isReadableErrored:function(e){var t,r;return Qe(e)?e.readableErrored?e.readableErrored:null!==(t=null===(r=e._readableState)||void 0===r?void 0:r.errored)&&void 0!==t?t:null:null},isNodeStream:Qe,isWebStream:function(e){return et(e)||tt(e)||rt(e)},isWritable:st,isWritableNodeStream:Xe,isWritableStream:tt,isWritableFinished:function(e,t){if(!Xe(e))return null;if(!0===e.writableFinished)return!0;const r=e._writableState;return(null==r||!r.errored)&&("boolean"!=typeof(null==r?void 0:r.finished)?null:!!(r.finished||!1===t&&!0===r.ended&&0===r.length))},isWritableErrored:function(e){var t,r;return Qe(e)?e.writableErrored?e.writableErrored:null!==(t=null===(r=e._writableState)||void 0===r?void 0:r.errored)&&void 0!==t?t:null:null},isServerRequest:function(e){var t;return"boolean"==typeof e._consuming&&"boolean"==typeof e._dumped&&void 0===(null===(t=e.req)||void 0===t?void 0:t.upgradeOrConnect)},willEmitClose:function(e){if(!Qe(e))return null;const t=e._writableState,r=e._readableState,n=t||r;return!n&&function(e){return"boolean"==typeof e._sent100&&at(e)}(e)||!!(n&&n.autoDestroy&&n.emitClose&&!1===n.closed)},isTransformStream:rt};const ct=Fe,{AbortError:ut,codes:dt}=H,{ERR_INVALID_ARG_TYPE:ft,ERR_STREAM_PREMATURE_CLOSE:ht}=dt,{kEmptyObject:pt,once:gt}=G,{validateAbortSignal:bt,validateFunction:yt,validateObject:mt,validateBoolean:wt}=Re,{Promise:_t,PromisePrototypeThen:vt,SymbolDispose:Et}=T,{isClosed:St,isReadable:At,isReadableNodeStream:Rt,isReadableStream:It,isReadableFinished:Tt,isReadableErrored:Ot,isWritable:xt,isWritableNodeStream:Nt,isWritableStream:Pt,isWritableFinished:kt,isWritableErrored:Lt,isNodeStream:jt,willEmitClose:Ct,kIsClosedPromise:Bt}=lt;let Mt;const Dt=()=>{};function Ut(e,t,r){var n,i;if(2===arguments.length?(r=t,t=pt):null==t?t=pt:mt(t,"options"),yt(r,"callback"),bt(t.signal,"options.signal"),r=gt(r),It(e)||Pt(e))return function(e,t,r){let n=!1,i=Dt;if(t.signal)if(i=()=>{n=!0,r.call(e,new ut(void 0,{cause:t.signal.reason}))},t.signal.aborted)ct.nextTick(i);else{Mt=Mt||G.addAbortListener;const n=Mt(t.signal,i),o=r;r=gt((...t)=>{n[Et](),o.apply(e,t)})}const o=(...t)=>{n||ct.nextTick(()=>r.apply(e,t))};return vt(e[Bt].promise,o,o),Dt}(e,t,r);if(!jt(e))throw new ft("stream",["ReadableStream","WritableStream","Stream"],e);const o=null!==(n=t.readable)&&void 0!==n?n:Rt(e),s=null!==(i=t.writable)&&void 0!==i?i:Nt(e),a=e._writableState,l=e._readableState,c=()=>{e.writable||f()};let u=Ct(e)&&Rt(e)===o&&Nt(e)===s,d=kt(e,!1);const f=()=>{d=!0,e.destroyed&&(u=!1),(!u||e.readable&&!o)&&(o&&!h||r.call(e))};let h=Tt(e,!1);const p=()=>{h=!0,e.destroyed&&(u=!1),(!u||e.writable&&!s)&&(s&&!d||r.call(e))},g=t=>{r.call(e,t)};let b=St(e);const y=()=>{b=!0;const t=Lt(e)||Ot(e);return t&&"boolean"!=typeof t?r.call(e,t):o&&!h&&Rt(e,!0)&&!Tt(e,!1)?r.call(e,new ht):!s||d||kt(e,!1)?void r.call(e):r.call(e,new ht)},m=()=>{b=!0;const t=Lt(e)||Ot(e);if(t&&"boolean"!=typeof t)return r.call(e,t);r.call(e)},w=()=>{e.req.on("finish",f)};!function(e){return e.setHeader&&"function"==typeof e.abort}(e)?s&&!a&&(e.on("end",c),e.on("close",c)):(e.on("complete",f),u||e.on("abort",y),e.req?w():e.on("request",w)),u||"boolean"!=typeof e.aborted||e.on("aborted",y),e.on("end",p),e.on("finish",f),!1!==t.error&&e.on("error",g),e.on("close",y),b?ct.nextTick(y):null!=a&&a.errorEmitted||null!=l&&l.errorEmitted?u||ct.nextTick(m):(o||u&&!At(e)||!d&&!1!==xt(e))&&(s||u&&!xt(e)||!h&&!1!==At(e))?l&&e.req&&e.aborted&&ct.nextTick(m):ct.nextTick(m);const _=()=>{r=Dt,e.removeListener("aborted",y),e.removeListener("complete",f),e.removeListener("abort",y),e.removeListener("request",w),e.req&&e.req.removeListener("finish",f),e.removeListener("end",c),e.removeListener("close",c),e.removeListener("finish",f),e.removeListener("end",p),e.removeListener("error",g),e.removeListener("close",y)};if(t.signal&&!b){const n=()=>{const n=r;_(),n.call(e,new ut(void 0,{cause:t.signal.reason}))};if(t.signal.aborted)ct.nextTick(n);else{Mt=Mt||G.addAbortListener;const i=Mt(t.signal,n),o=r;r=gt((...t)=>{i[Et](),o.apply(e,t)})}}return _}Ie.exports=Ut,Ie.exports.finished=function(e,t){var r;let n=!1;return null===t&&(t=pt),null!==(r=t)&&void 0!==r&&r.cleanup&&(wt(t.cleanup,"cleanup"),n=t.cleanup),new _t((r,i)=>{const o=Ut(e,t,e=>{n&&o(),e?i(e):r()})})};var Ft=Ie.exports;const Wt=Fe,{aggregateTwoErrors:qt,codes:{ERR_MULTIPLE_CALLBACK:$t},AbortError:Ht}=H,{Symbol:zt}=T,{kIsDestroyed:Vt,isDestroyed:Gt,isFinished:Kt,isServerRequest:Jt}=lt,Yt=zt("kDestroy"),Zt=zt("kConstruct");function Xt(e,t,r){e&&(e.stack,t&&!t.errored&&(t.errored=e),r&&!r.errored&&(r.errored=e))}function Qt(e,t,r){let n=!1;function i(t){if(n)return;n=!0;const i=e._readableState,o=e._writableState;Xt(t,o,i),o&&(o.closed=!0),i&&(i.closed=!0),"function"==typeof r&&r(t),t?Wt.nextTick(er,e,t):Wt.nextTick(tr,e)}try{e._destroy(t||null,i)}catch(o){i(o)}}function er(e,t){rr(e,t),tr(e)}function tr(e){const t=e._readableState,r=e._writableState;r&&(r.closeEmitted=!0),t&&(t.closeEmitted=!0),(null!=r&&r.emitClose||null!=t&&t.emitClose)&&e.emit("close")}function rr(e,t){const r=e._readableState,n=e._writableState;null!=n&&n.errorEmitted||null!=r&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),e.emit("error",t))}function nr(e,t,r){const n=e._readableState,i=e._writableState;if(null!=i&&i.destroyed||null!=n&&n.destroyed)return this;null!=n&&n.autoDestroy||null!=i&&i.autoDestroy?e.destroy(t):t&&(t.stack,i&&!i.errored&&(i.errored=t),n&&!n.errored&&(n.errored=t),r?Wt.nextTick(rr,e,t):rr(e,t))}function ir(e){let t=!1;function r(r){if(t)return void nr(e,null!=r?r:new $t);t=!0;const n=e._readableState,i=e._writableState,o=i||n;n&&(n.constructed=!0),i&&(i.constructed=!0),o.destroyed?e.emit(Yt,r):r?nr(e,r,!0):Wt.nextTick(or,e)}try{e._construct(e=>{Wt.nextTick(r,e)})}catch(n){Wt.nextTick(r,n)}}function or(e){e.emit(Zt)}function sr(e){return(null==e?void 0:e.setHeader)&&"function"==typeof e.abort}function ar(e){e.emit("close")}function lr(e,t){e.emit("error",t),Wt.nextTick(ar,e)}var cr={construct:function(e,t){if("function"!=typeof e._construct)return;const r=e._readableState,n=e._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),e.once(Zt,t),e.listenerCount(Zt)>1||Wt.nextTick(ir,e)},destroyer:function(e,t){e&&!Gt(e)&&(t||Kt(e)||(t=new Ht),Jt(e)?(e.socket=null,e.destroy(t)):sr(e)?e.abort():sr(e.req)?e.req.abort():"function"==typeof e.destroy?e.destroy(t):"function"==typeof e.close?e.close():t?Wt.nextTick(lr,e,t):Wt.nextTick(ar,e),e.destroyed||(e[Vt]=!0))},destroy:function(e,t){const r=this._readableState,n=this._writableState,i=n||r;return null!=n&&n.destroyed||null!=r&&r.destroyed?("function"==typeof t&&t(),this):(Xt(e,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),i.constructed?Qt(this,e,t):this.once(Yt,function(r){Qt(this,qt(r,e),t)}),this)},undestroy:function(){const e=this._readableState,t=this._writableState;e&&(e.constructed=!0,e.closed=!1,e.closeEmitted=!1,e.destroyed=!1,e.errored=null,e.errorEmitted=!1,e.reading=!1,e.ended=!1===e.readable,e.endEmitted=!1===e.readable),t&&(t.constructed=!0,t.destroyed=!1,t.closed=!1,t.closeEmitted=!1,t.errored=null,t.errorEmitted=!1,t.finalCalled=!1,t.prefinished=!1,t.ended=!1===t.writable,t.ending=!1===t.writable,t.finished=!1===t.writable)},errorOrDestroy:nr};const{ArrayIsArray:ur,ObjectSetPrototypeOf:dr}=T,{EventEmitter:fr}=r();function hr(e){fr.call(this,e)}function pr(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?ur(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}dr(hr.prototype,fr.prototype),dr(hr,fr),hr.prototype.pipe=function(e,t){const r=this;function n(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function i(){r.readable&&r.resume&&r.resume()}r.on("data",n),e.on("drain",i),e._isStdio||t&&!1===t.end||(r.on("end",s),r.on("close",a));let o=!1;function s(){o||(o=!0,e.end())}function a(){o||(o=!0,"function"==typeof e.destroy&&e.destroy())}function l(e){c(),0===fr.listenerCount(this,"error")&&this.emit("error",e)}function c(){r.removeListener("data",n),e.removeListener("drain",i),r.removeListener("end",s),r.removeListener("close",a),r.removeListener("error",l),e.removeListener("error",l),r.removeListener("end",c),r.removeListener("close",c),e.removeListener("close",c)}return pr(r,"error",l),pr(e,"error",l),r.on("end",c),r.on("close",c),e.on("close",c),e.emit("pipe",r),e};var gr={Stream:hr,prependListener:pr},br={exports:{}};!function(e){const{SymbolDispose:t}=T,{AbortError:r,codes:n}=H,{isNodeStream:i,isWebStream:o,kControllerErrorFunction:s}=lt,a=Ft,{ERR_INVALID_ARG_TYPE:l}=n;let c;e.exports.addAbortSignal=function(t,r){if(((e,t)=>{if("object"!=typeof e||!("aborted"in e))throw new l(t,"AbortSignal",e)})(t,"signal"),!i(r)&&!o(r))throw new l("stream",["ReadableStream","WritableStream","Stream"],r);return e.exports.addAbortSignalNoValidate(t,r)},e.exports.addAbortSignalNoValidate=function(e,n){if("object"!=typeof e||!("aborted"in e))return n;const o=i(n)?()=>{n.destroy(new r(void 0,{cause:e.reason}))}:()=>{n[s](new r(void 0,{cause:e.reason}))};if(e.aborted)o();else{c=c||G.addAbortListener;const r=c(e,o);a(n,r[t])}return n}}(br);var yr=br.exports;const{StringPrototypeSlice:mr,SymbolIterator:wr,TypedArrayPrototypeSet:_r,Uint8Array:vr}=T,{Buffer:Er}=t,{inspect:Sr}=G;var Ar=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){const t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}unshift(e){const t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}shift(){if(0===this.length)return;const e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(0===this.length)return"";let t=this.head,r=""+t.data;for(;null!==(t=t.next);)r+=e+t.data;return r}concat(e){if(0===this.length)return Er.alloc(0);const t=Er.allocUnsafe(e>>>0);let r=this.head,n=0;for(;r;)_r(t,r.data,n),n+=r.data.length,r=r.next;return t}consume(e,t){const r=this.head.data;if(e<r.length){const t=r.slice(0,e);return this.head.data=r.slice(e),t}return e===r.length?this.shift():t?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[wr](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let t="",r=this.head,n=0;do{const i=r.data;if(!(e>i.length)){e===i.length?(t+=i,++n,r.next?this.head=r.next:this.head=this.tail=null):(t+=mr(i,0,e),this.head=r,r.data=mr(i,e));break}t+=i,e-=i.length,++n}while(null!==(r=r.next));return this.length-=n,t}_getBuffer(e){const t=Er.allocUnsafe(e),r=e;let n=this.head,i=0;do{const o=n.data;if(!(e>o.length)){e===o.length?(_r(t,o,r-e),++i,n.next?this.head=n.next:this.head=this.tail=null):(_r(t,new vr(o.buffer,o.byteOffset,e),r-e),this.head=n,n.data=o.slice(e));break}_r(t,o,r-e),e-=o.length,++i}while(null!==(n=n.next));return this.length-=i,t}[Symbol.for("nodejs.util.inspect.custom")](e,t){return Sr(this,{...t,depth:0,customInspect:!1})}};const{MathFloor:Rr,NumberIsInteger:Ir}=T,{validateInteger:Tr}=Re,{ERR_INVALID_ARG_VALUE:Or}=H.codes;let xr=16384,Nr=16;function Pr(e){return e?Nr:xr}var kr={getHighWaterMark:function(e,t,r,n){const i=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(t,n,r);if(null!=i){if(!Ir(i)||i<0){throw new Or(n?`options.${r}`:"options.highWaterMark",i)}return Rr(i)}return Pr(e.objectMode)},getDefaultHighWaterMark:Pr,setDefaultHighWaterMark:function(e,t){Tr(t,"value",0),e?Nr=t:xr=t}};const Lr=Fe,{PromisePrototypeThen:jr,SymbolAsyncIterator:Cr,SymbolIterator:Br}=T,{Buffer:Mr}=t,{ERR_INVALID_ARG_TYPE:Dr,ERR_STREAM_NULL_VALUES:Ur}=H.codes;var Fr,Wr,qr,$r,Hr,zr,Vr,Gr,Kr=function(e,t,r){let n,i;if("string"==typeof t||t instanceof Mr)return new e({objectMode:!0,...r,read(){this.push(t),this.push(null)}});if(t&&t[Cr])i=!0,n=t[Cr]();else{if(!t||!t[Br])throw new Dr("iterable",["Iterable"],t);i=!1,n=t[Br]()}const o=new e({objectMode:!0,highWaterMark:1,...r});let s=!1;return o._read=function(){s||(s=!0,async function(){for(;;){try{const{value:e,done:t}=i?await n.next():n.next();if(t)o.push(null);else{const t=e&&"function"==typeof e.then?await e:e;if(null===t)throw s=!1,new Ur;if(o.push(t))continue;s=!1}}catch(e){o.destroy(e)}break}}())},o._destroy=function(e,t){jr(async function(e){const t=null!=e,r="function"==typeof n.throw;if(t&&r){const{value:t,done:r}=await n.throw(e);if(await t,r)return}if("function"==typeof n.return){const{value:e}=await n.return();await e}}(e),()=>Lr.nextTick(t,e),r=>Lr.nextTick(t,r||e))},o};function Jr(){if(Wr)return Fr;Wr=1;const e=Fe,{ArrayPrototypeIndexOf:n,NumberIsInteger:i,NumberIsNaN:o,NumberParseInt:s,ObjectDefineProperties:a,ObjectKeys:c,ObjectSetPrototypeOf:u,Promise:d,SafeSet:f,SymbolAsyncDispose:h,SymbolAsyncIterator:p,Symbol:g}=T;Fr=Y,Y.ReadableState=J;const{EventEmitter:b}=r(),{Stream:y,prependListener:m}=gr,{Buffer:w}=t,{addAbortSignal:_}=yr,v=Ft;let E=G.debuglog("stream",e=>{E=e});const S=Ar,A=cr,{getHighWaterMark:R,getDefaultHighWaterMark:I}=kr,{aggregateTwoErrors:O,codes:{ERR_INVALID_ARG_TYPE:x,ERR_METHOD_NOT_IMPLEMENTED:N,ERR_OUT_OF_RANGE:P,ERR_STREAM_PUSH_AFTER_EOF:k,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:L},AbortError:j}=H,{validateObject:C}=Re,B=g("kPaused"),{StringDecoder:M}=l,D=Kr;u(Y.prototype,y.prototype),u(Y,y);const U=()=>{},{errorOrDestroy:F}=A,W=1,q=16,$=32,z=2048,V=4096;function K(e){return{enumerable:!1,get(){return 0!==(this.state&e)},set(t){t?this.state|=e:this.state&=~e}}}function J(e,t,r){"boolean"!=typeof r&&(r=t instanceof Xr()),this.state=z|V|q|$,e&&e.objectMode&&(this.state|=W),r&&e&&e.readableObjectMode&&(this.state|=W),this.highWaterMark=e?R(this,e,"readableHighWaterMark",r):I(!1),this.buffer=new S,this.length=0,this.pipes=[],this.flowing=null,this[B]=null,e&&!1===e.emitClose&&(this.state&=~z),e&&!1===e.autoDestroy&&(this.state&=~V),this.errored=null,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,e&&e.encoding&&(this.decoder=new M(e.encoding),this.encoding=e.encoding)}function Y(e){if(!(this instanceof Y))return new Y(e);const t=this instanceof Xr();this._readableState=new J(e,this,t),e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.construct&&(this._construct=e.construct),e.signal&&!t&&_(e.signal,this)),y.call(this,e),A.construct(this,()=>{this._readableState.needReadable&&re(this,this._readableState)})}function Z(e,t,r,n){E("readableAddChunk",t);const i=e._readableState;let o;if(0===(i.state&W)&&("string"==typeof t?(r=r||i.defaultEncoding,i.encoding!==r&&(n&&i.encoding?t=w.from(t,r).toString(i.encoding):(t=w.from(t,r),r=""))):t instanceof w?r="":y._isUint8Array(t)?(t=y._uint8ArrayToBuffer(t),r=""):null!=t&&(o=new x("chunk",["string","Buffer","Uint8Array"],t))),o)F(e,o);else if(null===t)i.state&=-9,function(e,t){if(E("onEofChunk"),t.ended)return;if(t.decoder){const e=t.decoder.end();e&&e.length&&(t.buffer.push(e),t.length+=t.objectMode?1:e.length)}t.ended=!0,t.sync?ee(e):(t.needReadable=!1,t.emittedReadable=!0,te(e))}(e,i);else if(0!==(i.state&W)||t&&t.length>0)if(n)if(4&i.state)F(e,new L);else{if(i.destroyed||i.errored)return!1;X(e,i,t,!0)}else if(i.ended)F(e,new k);else{if(i.destroyed||i.errored)return!1;i.state&=-9,i.decoder&&!r?(t=i.decoder.write(t),i.objectMode||0!==t.length?X(e,i,t,!1):re(e,i)):X(e,i,t,!1)}else n||(i.state&=-9,re(e,i));return!i.ended&&(i.length<i.highWaterMark||0===i.length)}function X(e,t,r,n){t.flowing&&0===t.length&&!t.sync&&e.listenerCount("data")>0?(65536&t.state?t.awaitDrainWriters.clear():t.awaitDrainWriters=null,t.dataEmitted=!0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),64&t.state&&ee(e)),re(e,t)}a(J.prototype,{objectMode:K(W),ended:K(2),endEmitted:K(4),reading:K(8),constructed:K(q),sync:K($),needReadable:K(64),emittedReadable:K(128),readableListening:K(256),resumeScheduled:K(512),errorEmitted:K(1024),emitClose:K(z),autoDestroy:K(V),destroyed:K(8192),closed:K(16384),closeEmitted:K(32768),multiAwaitDrain:K(65536),readingMore:K(1<<17),dataEmitted:K(1<<18)}),Y.prototype.destroy=A.destroy,Y.prototype._undestroy=A.undestroy,Y.prototype._destroy=function(e,t){t(e)},Y.prototype[b.captureRejectionSymbol]=function(e){this.destroy(e)},Y.prototype[h]=function(){let e;return this.destroyed||(e=this.readableEnded?null:new j,this.destroy(e)),new d((t,r)=>v(this,n=>n&&n!==e?r(n):t(null)))},Y.prototype.push=function(e,t){return Z(this,e,t,!1)},Y.prototype.unshift=function(e,t){return Z(this,e,t,!0)},Y.prototype.isPaused=function(){const e=this._readableState;return!0===e[B]||!1===e.flowing},Y.prototype.setEncoding=function(e){const t=new M(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;const r=this._readableState.buffer;let n="";for(const i of r)n+=t.write(i);return r.clear(),""!==n&&r.push(n),this._readableState.length=n.length,this};function Q(e,t){return e<=0||0===t.length&&t.ended?0:0!==(t.state&W)?1:o(e)?t.flowing&&t.length?t.buffer.first().length:t.length:e<=t.length?e:t.ended?t.length:0}function ee(t){const r=t._readableState;E("emitReadable",r.needReadable,r.emittedReadable),r.needReadable=!1,r.emittedReadable||(E("emitReadable",r.flowing),r.emittedReadable=!0,e.nextTick(te,t))}function te(e){const t=e._readableState;E("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||t.errored||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,ae(e)}function re(t,r){!r.readingMore&&r.constructed&&(r.readingMore=!0,e.nextTick(ne,t,r))}function ne(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){const r=t.length;if(E("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function ie(e){const t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!1===t[B]?t.flowing=!0:e.listenerCount("data")>0?e.resume():t.readableListening||(t.flowing=null)}function oe(e){E("readable nexttick read 0"),e.read(0)}function se(e,t){E("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),ae(e),t.flowing&&!t.reading&&e.read(0)}function ae(e){const t=e._readableState;for(E("flow",t.flowing);t.flowing&&null!==e.read(););}function le(e,t){"function"!=typeof e.read&&(e=Y.wrap(e,{objectMode:!0}));const r=async function*(e,t){let r,n=U;function i(t){this===e?(n(),n=U):n=t}e.on("readable",i);const o=v(e,{writable:!1},e=>{r=e?O(r,e):null,n(),n=U});try{for(;;){const t=e.destroyed?null:e.read();if(null!==t)yield t;else{if(r)throw r;if(null===r)return;await new d(i)}}}catch(s){throw r=O(r,s),r}finally{!r&&!1===(null==t?void 0:t.destroyOnReturn)||void 0!==r&&!e._readableState.autoDestroy?(e.off("readable",i),o()):A.destroyer(e,null)}}(e,t);return r.stream=e,r}function ce(e,t){if(0===t.length)return null;let r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r}function ue(t){const r=t._readableState;E("endReadable",r.endEmitted),r.endEmitted||(r.ended=!0,e.nextTick(de,r,t))}function de(t,r){if(E("endReadableNT",t.endEmitted,t.length),!t.errored&&!t.closeEmitted&&!t.endEmitted&&0===t.length)if(t.endEmitted=!0,r.emit("end"),r.writable&&!1===r.allowHalfOpen)e.nextTick(fe,r);else if(t.autoDestroy){const e=r._writableState;(!e||e.autoDestroy&&(e.finished||!1===e.writable))&&r.destroy()}}function fe(e){e.writable&&!e.writableEnded&&!e.destroyed&&e.end()}let he;function pe(){return void 0===he&&(he={}),he}return Y.prototype.read=function(e){E("read",e),void 0===e?e=NaN:i(e)||(e=s(e,10));const t=this._readableState,r=e;if(e>t.highWaterMark&&(t.highWaterMark=function(e){if(e>1073741824)throw new P("size","<= 1GiB",e);return e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,++e}(e)),0!==e&&(t.state&=-129),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return E("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?ue(this):ee(this),null;if(0===(e=Q(e,t))&&t.ended)return 0===t.length&&ue(this),null;let n,o=!!(64&t.state);if(E("need readable",o),(0===t.length||t.length-e<t.highWaterMark)&&(o=!0,E("length less than watermark",o)),t.ended||t.reading||t.destroyed||t.errored||!t.constructed)o=!1,E("reading, ended or constructing",o);else if(o){E("do read"),t.state|=8|$,0===t.length&&(t.state|=64);try{this._read(t.highWaterMark)}catch(a){F(this,a)}t.state&=~$,t.reading||(e=Q(r,t))}return n=e>0?ce(e,t):null,null===n?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.multiAwaitDrain?t.awaitDrainWriters.clear():t.awaitDrainWriters=null),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&ue(this)),null===n||t.errorEmitted||t.closeEmitted||(t.dataEmitted=!0,this.emit("data",n)),n},Y.prototype._read=function(e){throw new N("_read()")},Y.prototype.pipe=function(t,r){const n=this,i=this._readableState;1===i.pipes.length&&(i.multiAwaitDrain||(i.multiAwaitDrain=!0,i.awaitDrainWriters=new f(i.awaitDrainWriters?[i.awaitDrainWriters]:[]))),i.pipes.push(t),E("pipe count=%d opts=%j",i.pipes.length,r);const o=(!r||!1!==r.end)&&t!==e.stdout&&t!==e.stderr?a:b;function s(e,r){E("onunpipe"),e===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,function(){E("cleanup"),t.removeListener("close",p),t.removeListener("finish",g),l&&t.removeListener("drain",l);t.removeListener("error",h),t.removeListener("unpipe",s),n.removeListener("end",a),n.removeListener("end",b),n.removeListener("data",d),c=!0,l&&i.awaitDrainWriters&&(!t._writableState||t._writableState.needDrain)&&l()}())}function a(){E("onend"),t.end()}let l;i.endEmitted?e.nextTick(o):n.once("end",o),t.on("unpipe",s);let c=!1;function u(){c||(1===i.pipes.length&&i.pipes[0]===t?(E("false write response, pause",0),i.awaitDrainWriters=t,i.multiAwaitDrain=!1):i.pipes.length>1&&i.pipes.includes(t)&&(E("false write response, pause",i.awaitDrainWriters.size),i.awaitDrainWriters.add(t)),n.pause()),l||(l=function(e,t){return function(){const r=e._readableState;r.awaitDrainWriters===t?(E("pipeOnDrain",1),r.awaitDrainWriters=null):r.multiAwaitDrain&&(E("pipeOnDrain",r.awaitDrainWriters.size),r.awaitDrainWriters.delete(t)),r.awaitDrainWriters&&0!==r.awaitDrainWriters.size||!e.listenerCount("data")||e.resume()}}(n,t),t.on("drain",l))}function d(e){E("ondata");const r=t.write(e);E("dest.write",r),!1===r&&u()}function h(e){if(E("onerror",e),b(),t.removeListener("error",h),0===t.listenerCount("error")){const r=t._writableState||t._readableState;r&&!r.errorEmitted?F(t,e):t.emit("error",e)}}function p(){t.removeListener("finish",g),b()}function g(){E("onfinish"),t.removeListener("close",p),b()}function b(){E("unpipe"),n.unpipe(t)}return n.on("data",d),m(t,"error",h),t.once("close",p),t.once("finish",g),t.emit("pipe",n),!0===t.writableNeedDrain?u():i.flowing||(E("pipe resume"),n.resume()),t},Y.prototype.unpipe=function(e){const t=this._readableState;if(0===t.pipes.length)return this;if(!e){const e=t.pipes;t.pipes=[],this.pause();for(let t=0;t<e.length;t++)e[t].emit("unpipe",this,{hasUnpiped:!1});return this}const r=n(t.pipes,e);return-1===r||(t.pipes.splice(r,1),0===t.pipes.length&&this.pause(),e.emit("unpipe",this,{hasUnpiped:!1})),this},Y.prototype.on=function(t,r){const n=y.prototype.on.call(this,t,r),i=this._readableState;return"data"===t?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===t&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,E("on readable",i.length,i.reading),i.length?ee(this):i.reading||e.nextTick(oe,this))),n},Y.prototype.addListener=Y.prototype.on,Y.prototype.removeListener=function(t,r){const n=y.prototype.removeListener.call(this,t,r);return"readable"===t&&e.nextTick(ie,this),n},Y.prototype.off=Y.prototype.removeListener,Y.prototype.removeAllListeners=function(t){const r=y.prototype.removeAllListeners.apply(this,arguments);return"readable"!==t&&void 0!==t||e.nextTick(ie,this),r},Y.prototype.resume=function(){const t=this._readableState;return t.flowing||(E("resume"),t.flowing=!t.readableListening,function(t,r){r.resumeScheduled||(r.resumeScheduled=!0,e.nextTick(se,t,r))}(this,t)),t[B]=!1,this},Y.prototype.pause=function(){return E("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(E("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[B]=!0,this},Y.prototype.wrap=function(e){let t=!1;e.on("data",r=>{!this.push(r)&&e.pause&&(t=!0,e.pause())}),e.on("end",()=>{this.push(null)}),e.on("error",e=>{F(this,e)}),e.on("close",()=>{this.destroy()}),e.on("destroy",()=>{this.destroy()}),this._read=()=>{t&&e.resume&&(t=!1,e.resume())};const r=c(e);for(let n=1;n<r.length;n++){const t=r[n];void 0===this[t]&&"function"==typeof e[t]&&(this[t]=e[t].bind(e))}return this},Y.prototype[p]=function(){return le(this)},Y.prototype.iterator=function(e){return void 0!==e&&C(e,"options"),le(this,e)},a(Y.prototype,{readable:{__proto__:null,get(){const e=this._readableState;return!(!e||!1===e.readable||e.destroyed||e.errorEmitted||e.endEmitted)},set(e){this._readableState&&(this._readableState.readable=!!e)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._readableState.readable||!this._readableState.destroyed&&!this._readableState.errored||this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.objectMode}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return!!this._readableState&&this._readableState.closed}},destroyed:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.destroyed},set(e){this._readableState&&(this._readableState.destroyed=e)}},readableEnded:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.endEmitted}}}),a(J.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return!1!==this[B]},set(e){this[B]=!!e}}}),Y._fromList=ce,Y.from=function(e,t){return D(Y,e,t)},Y.fromWeb=function(e,t){return pe().newStreamReadableFromReadableStream(e,t)},Y.toWeb=function(e,t){return pe().newReadableStreamFromStreamReadable(e,t)},Y.wrap=function(e,t){var r,n;return new Y({objectMode:null===(r=null!==(n=e.readableObjectMode)&&void 0!==n?n:e.objectMode)||void 0===r||r,...t,destroy(t,r){A.destroyer(e,t),r(t)}}).wrap(e)},Fr}function Yr(){if($r)return qr;$r=1;const e=Fe,{ArrayPrototypeSlice:n,Error:i,FunctionPrototypeSymbolHasInstance:o,ObjectDefineProperty:s,ObjectDefineProperties:a,ObjectSetPrototypeOf:l,StringPrototypeToLowerCase:c,Symbol:u,SymbolHasInstance:d}=T;qr=j,j.WritableState=k;const{EventEmitter:f}=r(),h=gr.Stream,{Buffer:p}=t,g=cr,{addAbortSignal:b}=yr,{getHighWaterMark:y,getDefaultHighWaterMark:m}=kr,{ERR_INVALID_ARG_TYPE:w,ERR_METHOD_NOT_IMPLEMENTED:_,ERR_MULTIPLE_CALLBACK:v,ERR_STREAM_CANNOT_PIPE:E,ERR_STREAM_DESTROYED:S,ERR_STREAM_ALREADY_FINISHED:A,ERR_STREAM_NULL_VALUES:R,ERR_STREAM_WRITE_AFTER_END:I,ERR_UNKNOWN_ENCODING:O}=H.codes,{errorOrDestroy:x}=g;function N(){}l(j.prototype,h.prototype),l(j,h);const P=u("kOnFinished");function k(e,t,r){"boolean"!=typeof r&&(r=t instanceof Xr()),this.objectMode=!(!e||!e.objectMode),r&&(this.objectMode=this.objectMode||!(!e||!e.writableObjectMode)),this.highWaterMark=e?y(this,e,"writableHighWaterMark",r):m(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const n=!(!e||!1!==e.decodeStrings);this.decodeStrings=!n,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=D.bind(void 0,t),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,L(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!e||!1!==e.emitClose,this.autoDestroy=!e||!1!==e.autoDestroy,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[P]=[]}function L(e){e.buffered=[],e.bufferedIndex=0,e.allBuffers=!0,e.allNoop=!0}function j(e){const t=this instanceof Xr();if(!t&&!o(j,this))return new j(e);this._writableState=new k(e,this,t),e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final),"function"==typeof e.construct&&(this._construct=e.construct),e.signal&&b(e.signal,this)),h.call(this,e),g.construct(this,()=>{const e=this._writableState;e.writing||q(this,e),V(this,e)})}function C(t,r,n,i){const o=t._writableState;if("function"==typeof n)i=n,n=o.defaultEncoding;else{if(n){if("buffer"!==n&&!p.isEncoding(n))throw new O(n)}else n=o.defaultEncoding;"function"!=typeof i&&(i=N)}if(null===r)throw new R;if(!o.objectMode)if("string"==typeof r)!1!==o.decodeStrings&&(r=p.from(r,n),n="buffer");else if(r instanceof p)n="buffer";else{if(!h._isUint8Array(r))throw new w("chunk",["string","Buffer","Uint8Array"],r);r=h._uint8ArrayToBuffer(r),n="buffer"}let s;return o.ending?s=new I:o.destroyed&&(s=new S("write")),s?(e.nextTick(i,s),x(t,s,!0),s):(o.pendingcb++,function(e,t,r,n,i){const o=t.objectMode?1:r.length;t.length+=o;const s=t.length<t.highWaterMark;s||(t.needDrain=!0);t.writing||t.corked||t.errored||!t.constructed?(t.buffered.push({chunk:r,encoding:n,callback:i}),t.allBuffers&&"buffer"!==n&&(t.allBuffers=!1),t.allNoop&&i!==N&&(t.allNoop=!1)):(t.writelen=o,t.writecb=i,t.writing=!0,t.sync=!0,e._write(r,n,t.onwrite),t.sync=!1);return s&&!t.errored&&!t.destroyed}(t,o,r,n,i))}function B(e,t,r,n,i,o,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new S("write")):r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function M(e,t,r,n){--t.pendingcb,n(r),W(t),x(e,r)}function D(t,r){const n=t._writableState,i=n.sync,o=n.writecb;"function"==typeof o?(n.writing=!1,n.writecb=null,n.length-=n.writelen,n.writelen=0,r?(r.stack,n.errored||(n.errored=r),t._readableState&&!t._readableState.errored&&(t._readableState.errored=r),i?e.nextTick(M,t,n,r,o):M(t,n,r,o)):(n.buffered.length>n.bufferedIndex&&q(t,n),i?null!==n.afterWriteTickInfo&&n.afterWriteTickInfo.cb===o?n.afterWriteTickInfo.count++:(n.afterWriteTickInfo={count:1,cb:o,stream:t,state:n},e.nextTick(U,n.afterWriteTickInfo)):F(t,n,1,o))):x(t,new v)}function U({stream:e,state:t,count:r,cb:n}){return t.afterWriteTickInfo=null,F(e,t,r,n)}function F(e,t,r,n){for(!t.ending&&!e.destroyed&&0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"));r-- >0;)t.pendingcb--,n();t.destroyed&&W(t),V(e,t)}function W(e){if(e.writing)return;for(let i=e.bufferedIndex;i<e.buffered.length;++i){var t;const{chunk:r,callback:n}=e.buffered[i],o=e.objectMode?1:r.length;e.length-=o,n(null!==(t=e.errored)&&void 0!==t?t:new S("write"))}const r=e[P].splice(0);for(let i=0;i<r.length;i++){var n;r[i](null!==(n=e.errored)&&void 0!==n?n:new S("end"))}L(e)}function q(e,t){if(t.corked||t.bufferProcessing||t.destroyed||!t.constructed)return;const{buffered:r,bufferedIndex:i,objectMode:o}=t,s=r.length-i;if(!s)return;let a=i;if(t.bufferProcessing=!0,s>1&&e._writev){t.pendingcb-=s-1;const i=t.allNoop?N:e=>{for(let t=a;t<r.length;++t)r[t].callback(e)},o=t.allNoop&&0===a?r:n(r,a);o.allBuffers=t.allBuffers,B(e,t,!0,t.length,o,"",i),L(t)}else{do{const{chunk:n,encoding:i,callback:s}=r[a];r[a++]=null;B(e,t,!1,o?1:n.length,n,i,s)}while(a<r.length&&!t.writing);a===r.length?L(t):a>256?(r.splice(0,a),t.bufferedIndex=0):t.bufferedIndex=a}t.bufferProcessing=!1}function $(e){return e.ending&&!e.destroyed&&e.constructed&&0===e.length&&!e.errored&&0===e.buffered.length&&!e.finished&&!e.writing&&!e.errorEmitted&&!e.closeEmitted}function z(t,r){r.prefinished||r.finalCalled||("function"!=typeof t._final||r.destroyed?(r.prefinished=!0,t.emit("prefinish")):(r.finalCalled=!0,function(t,r){let n=!1;function i(i){if(n)x(t,null!=i?i:v());else if(n=!0,r.pendingcb--,i){const e=r[P].splice(0);for(let t=0;t<e.length;t++)e[t](i);x(t,i,r.sync)}else $(r)&&(r.prefinished=!0,t.emit("prefinish"),r.pendingcb++,e.nextTick(G,t,r))}r.sync=!0,r.pendingcb++;try{t._final(i)}catch(o){i(o)}r.sync=!1}(t,r)))}function V(t,r,n){$(r)&&(z(t,r),0===r.pendingcb&&(n?(r.pendingcb++,e.nextTick((e,t)=>{$(t)?G(e,t):t.pendingcb--},t,r)):$(r)&&(r.pendingcb++,G(t,r))))}function G(e,t){t.pendingcb--,t.finished=!0;const r=t[P].splice(0);for(let n=0;n<r.length;n++)r[n]();if(e.emit("finish"),t.autoDestroy){const t=e._readableState;(!t||t.autoDestroy&&(t.endEmitted||!1===t.readable))&&e.destroy()}}k.prototype.getBuffer=function(){return n(this.buffered,this.bufferedIndex)},s(k.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}}),s(j,d,{__proto__:null,value:function(e){return!!o(this,e)||this===j&&(e&&e._writableState instanceof k)}}),j.prototype.pipe=function(){x(this,new E)},j.prototype.write=function(e,t,r){return!0===C(this,e,t,r)},j.prototype.cork=function(){this._writableState.corked++},j.prototype.uncork=function(){const e=this._writableState;e.corked&&(e.corked--,e.writing||q(this,e))},j.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=c(e)),!p.isEncoding(e))throw new O(e);return this._writableState.defaultEncoding=e,this},j.prototype._write=function(e,t,r){if(!this._writev)throw new _("_write()");this._writev([{chunk:e,encoding:t}],r)},j.prototype._writev=null,j.prototype.end=function(t,r,n){const o=this._writableState;let s;if("function"==typeof t?(n=t,t=null,r=null):"function"==typeof r&&(n=r,r=null),null!=t){const e=C(this,t,r);e instanceof i&&(s=e)}return o.corked&&(o.corked=1,this.uncork()),s||(o.errored||o.ending?o.finished?s=new A("end"):o.destroyed&&(s=new S("end")):(o.ending=!0,V(this,o,!0),o.ended=!0)),"function"==typeof n&&(s||o.finished?e.nextTick(n,s):o[P].push(n)),this},a(j.prototype,{closed:{__proto__:null,get(){return!!this._writableState&&this._writableState.closed}},destroyed:{__proto__:null,get(){return!!this._writableState&&this._writableState.destroyed},set(e){this._writableState&&(this._writableState.destroyed=e)}},writable:{__proto__:null,get(){const e=this._writableState;return!(!e||!1===e.writable||e.destroyed||e.errored||e.ending||e.ended)},set(e){this._writableState&&(this._writableState.writable=!!e)}},writableFinished:{__proto__:null,get(){return!!this._writableState&&this._writableState.finished}},writableObjectMode:{__proto__:null,get(){return!!this._writableState&&this._writableState.objectMode}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return!!this._writableState&&this._writableState.ending}},writableNeedDrain:{__proto__:null,get(){const e=this._writableState;return!!e&&(!e.destroyed&&!e.ending&&e.needDrain)}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._writableState.writable||!this._writableState.destroyed&&!this._writableState.errored||this._writableState.finished)}}});const K=g.destroy;let J;function Y(){return void 0===J&&(J={}),J}return j.prototype.destroy=function(t,r){const n=this._writableState;return!n.destroyed&&(n.bufferedIndex<n.buffered.length||n[P].length)&&e.nextTick(W,n),K.call(this,t,r),this},j.prototype._undestroy=g.undestroy,j.prototype._destroy=function(e,t){t(e)},j.prototype[f.captureRejectionSymbol]=function(e){this.destroy(e)},j.fromWeb=function(e,t){return Y().newStreamWritableFromWritableStream(e,t)},j.toWeb=function(e){return Y().newWritableStreamFromStreamWritable(e)},qr}function Zr(){if(zr)return Hr;zr=1;const e=Fe,r=t,{isReadable:n,isWritable:i,isIterable:o,isNodeStream:s,isReadableNodeStream:a,isWritableNodeStream:l,isDuplexNodeStream:c,isReadableStream:u,isWritableStream:d}=lt,f=Ft,{AbortError:h,codes:{ERR_INVALID_ARG_TYPE:p,ERR_INVALID_RETURN_VALUE:g}}=H,{destroyer:b}=cr,y=Xr(),m=Jr(),w=Yr(),{createDeferredPromise:_}=G,v=Kr,E=globalThis.Blob||r.Blob,S=void 0!==E?function(e){return e instanceof E}:function(e){return!1},A=globalThis.AbortController||V().AbortController,{FunctionPrototypeCall:R}=T;class I extends y{constructor(e){super(e),!1===(null==e?void 0:e.readable)&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===(null==e?void 0:e.writable)&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}function O(e){const t=e.readable&&"function"!=typeof e.readable.read?m.wrap(e.readable):e.readable,r=e.writable;let o,s,a,l,c,u=!!n(t),d=!!i(r);function p(e){const t=l;l=null,t?t(e):e&&c.destroy(e)}return c=new I({readableObjectMode:!(null==t||!t.readableObjectMode),writableObjectMode:!(null==r||!r.writableObjectMode),readable:u,writable:d}),d&&(f(r,e=>{d=!1,e&&b(t,e),p(e)}),c._write=function(e,t,n){r.write(e,t)?n():o=n},c._final=function(e){r.end(),s=e},r.on("drain",function(){if(o){const e=o;o=null,e()}}),r.on("finish",function(){if(s){const e=s;s=null,e()}})),u&&(f(t,e=>{u=!1,e&&b(t,e),p(e)}),t.on("readable",function(){if(a){const e=a;a=null,e()}}),t.on("end",function(){c.push(null)}),c._read=function(){for(;;){const e=t.read();if(null===e)return void(a=c._read);if(!c.push(e))return}}),c._destroy=function(e,n){e||null===l||(e=new h),a=null,o=null,s=null,null===l?n(e):(l=n,b(r,e),b(t,e))},c}return Hr=function t(r,n){if(c(r))return r;if(a(r))return O({readable:r});if(l(r))return O({writable:r});if(s(r))return O({writable:!1,readable:!1});if(u(r))return O({readable:m.fromWeb(r)});if(d(r))return O({writable:w.fromWeb(r)});if("function"==typeof r){const{value:t,write:i,final:s,destroy:a}=function(t){let{promise:r,resolve:n}=_();const i=new A,o=i.signal,s=t(async function*(){for(;;){const t=r;r=null;const{chunk:i,done:s,cb:a}=await t;if(e.nextTick(a),s)return;if(o.aborted)throw new h(void 0,{cause:o.reason});({promise:r,resolve:n}=_()),yield i}}(),{signal:o});return{value:s,write(e,t,r){const i=n;n=null,i({chunk:e,done:!1,cb:r})},final(e){const t=n;n=null,t({done:!0,cb:e})},destroy(e,t){i.abort(),t(e)}}}(r);if(o(t))return v(I,t,{objectMode:!0,write:i,final:s,destroy:a});const l=null==t?void 0:t.then;if("function"==typeof l){let r;const n=R(l,t,e=>{if(null!=e)throw new g("nully","body",e)},e=>{b(r,e)});return r=new I({objectMode:!0,readable:!1,write:i,final(t){s(async()=>{try{await n,e.nextTick(t,null)}catch(r){e.nextTick(t,r)}})},destroy:a})}throw new g("Iterable, AsyncIterable or AsyncFunction",n,t)}if(S(r))return t(r.arrayBuffer());if(o(r))return v(I,r,{objectMode:!0,writable:!1});if(u(null==r?void 0:r.readable)&&d(null==r?void 0:r.writable))return I.fromWeb(r);if("object"==typeof(null==r?void 0:r.writable)||"object"==typeof(null==r?void 0:r.readable)){return O({readable:null!=r&&r.readable?a(null==r?void 0:r.readable)?null==r?void 0:r.readable:t(r.readable):void 0,writable:null!=r&&r.writable?l(null==r?void 0:r.writable)?null==r?void 0:r.writable:t(r.writable):void 0})}const i=null==r?void 0:r.then;if("function"==typeof i){let e;return R(i,r,t=>{null!=t&&e.push(t),e.push(null)},t=>{b(e,t)}),e=new I({objectMode:!0,writable:!1,read(){}})}throw new p(n,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],r)}}function Xr(){if(Gr)return Vr;Gr=1;const{ObjectDefineProperties:e,ObjectGetOwnPropertyDescriptor:t,ObjectKeys:r,ObjectSetPrototypeOf:n}=T;Vr=s;const i=Jr(),o=Yr();n(s.prototype,i.prototype),n(s,i);{const e=r(o.prototype);for(let t=0;t<e.length;t++){const r=e[t];s.prototype[r]||(s.prototype[r]=o.prototype[r])}}function s(e){if(!(this instanceof s))return new s(e);i.call(this,e),o.call(this,e),e?(this.allowHalfOpen=!1!==e.allowHalfOpen,!1===e.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===e.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}let a,l;function c(){return void 0===a&&(a={}),a}return e(s.prototype,{writable:{__proto__:null,...t(o.prototype,"writable")},writableHighWaterMark:{__proto__:null,...t(o.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...t(o.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...t(o.prototype,"writableBuffer")},writableLength:{__proto__:null,...t(o.prototype,"writableLength")},writableFinished:{__proto__:null,...t(o.prototype,"writableFinished")},writableCorked:{__proto__:null,...t(o.prototype,"writableCorked")},writableEnded:{__proto__:null,...t(o.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...t(o.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set(e){this._readableState&&this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}}),s.fromWeb=function(e,t){return c().newStreamDuplexFromReadableWritablePair(e,t)},s.toWeb=function(e){return c().newReadableWritablePairFromDuplex(e)},s.from=function(e){return l||(l=Zr()),l(e,"body")},Vr}const{ObjectSetPrototypeOf:Qr,Symbol:en}=T;var tn=an;const{ERR_METHOD_NOT_IMPLEMENTED:rn}=H.codes,nn=Xr(),{getHighWaterMark:on}=kr;Qr(an.prototype,nn.prototype),Qr(an,nn);const sn=en("kCallback");function an(e){if(!(this instanceof an))return new an(e);const t=e?on(this,e,"readableHighWaterMark",!0):null;0===t&&(e={...e,highWaterMark:null,readableHighWaterMark:t,writableHighWaterMark:e.writableHighWaterMark||0}),nn.call(this,e),this._readableState.sync=!1,this[sn]=null,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",cn)}function ln(e){"function"!=typeof this._flush||this.destroyed?(this.push(null),e&&e()):this._flush((t,r)=>{t?e?e(t):this.destroy(t):(null!=r&&this.push(r),this.push(null),e&&e())})}function cn(){this._final!==ln&&ln.call(this)}an.prototype._final=ln,an.prototype._transform=function(e,t,r){throw new rn("_transform()")},an.prototype._write=function(e,t,r){const n=this._readableState,i=this._writableState,o=n.length;this._transform(e,t,(e,t)=>{e?r(e):(null!=t&&this.push(t),i.ended||o===n.length||n.length<n.highWaterMark?r():this[sn]=r)})},an.prototype._read=function(){if(this[sn]){const e=this[sn];this[sn]=null,e()}};const{ObjectSetPrototypeOf:un}=T;var dn=hn;const fn=tn;function hn(e){if(!(this instanceof hn))return new hn(e);fn.call(this,e)}un(hn.prototype,fn.prototype),un(hn,fn),hn.prototype._transform=function(e,t,r){r(null,e)};const pn=Fe,{ArrayIsArray:gn,Promise:bn,SymbolAsyncIterator:yn,SymbolDispose:mn}=T,wn=Ft,{once:_n}=G,vn=cr,En=Xr(),{aggregateTwoErrors:Sn,codes:{ERR_INVALID_ARG_TYPE:An,ERR_INVALID_RETURN_VALUE:Rn,ERR_MISSING_ARGS:In,ERR_STREAM_DESTROYED:Tn,ERR_STREAM_PREMATURE_CLOSE:On},AbortError:xn}=H,{validateFunction:Nn,validateAbortSignal:Pn}=Re,{isIterable:kn,isReadable:Ln,isReadableNodeStream:jn,isNodeStream:Cn,isTransformStream:Bn,isWebStream:Mn,isReadableStream:Dn,isReadableFinished:Un}=lt,Fn=globalThis.AbortController||V().AbortController;let Wn,qn,$n;function Hn(e,t,r){let n=!1;e.on("close",()=>{n=!0});return{destroy:t=>{n||(n=!0,vn.destroyer(e,t||new Tn("pipe")))},cleanup:wn(e,{readable:t,writable:r},e=>{n=!e})}}function zn(e){if(kn(e))return e;if(jn(e))return async function*(e){qn||(qn=Jr());yield*qn.prototype[yn].call(e)}(e);throw new An("val",["Readable","Iterable","AsyncIterable"],e)}async function Vn(e,t,r,{end:n}){let i,o=null;const s=e=>{if(e&&(i=e),o){const e=o;o=null,e()}},a=()=>new bn((e,t)=>{i?t(i):o=()=>{i?t(i):e()}});t.on("drain",s);const l=wn(t,{readable:!1},s);try{t.writableNeedDrain&&await a();for await(const r of e)t.write(r)||await a();n&&(t.end(),await a()),r()}catch(c){r(i!==c?Sn(i,c):c)}finally{l(),t.off("drain",s)}}async function Gn(e,t,r,{end:n}){Bn(t)&&(t=t.writable);const i=t.getWriter();try{for await(const t of e)await i.ready,i.write(t).catch(()=>{});await i.ready,n&&await i.close(),r()}catch(o){try{await i.abort(o),r(o)}catch(s){r(s)}}}function Kn(e,t,r){if(1===e.length&&gn(e[0])&&(e=e[0]),e.length<2)throw new In("streams");const n=new Fn,i=n.signal,o=null==r?void 0:r.signal,s=[];function a(){g(new xn)}let l,c,u;Pn(o,"options.signal"),$n=$n||G.addAbortListener,o&&(l=$n(o,a));const d=[];let f,h=0;function p(e){g(e,0===--h)}function g(e,r){var i;if(!e||c&&"ERR_STREAM_PREMATURE_CLOSE"!==c.code||(c=e),c||r){for(;d.length;)d.shift()(c);null===(i=l)||void 0===i||i[mn](),n.abort(),r&&(c||s.forEach(e=>e()),pn.nextTick(t,c,u))}}for(let m=0;m<e.length;m++){const t=e[m],n=m<e.length-1,o=m>0,a=n||!1!==(null==r?void 0:r.end),l=m===e.length-1;if(Cn(t)){let e=function(e){e&&"AbortError"!==e.name&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code&&p(e)};if(a){const{destroy:e,cleanup:r}=Hn(t,n,o);d.push(e),Ln(t)&&l&&s.push(r)}t.on("error",e),Ln(t)&&l&&s.push(()=>{t.removeListener("error",e)})}if(0===m)if("function"==typeof t){if(f=t({signal:i}),!kn(f))throw new Rn("Iterable, AsyncIterable or Stream","source",f)}else f=kn(t)||jn(t)||Bn(t)?t:En.from(t);else if("function"==typeof t){var b;if(Bn(f))f=zn(null===(b=f)||void 0===b?void 0:b.readable);else f=zn(f);if(f=t(f,{signal:i}),n){if(!kn(f,!0))throw new Rn("AsyncIterable",`transform[${m-1}]`,f)}else{var y;Wn||(Wn=dn);const e=new Wn({objectMode:!0}),t=null===(y=f)||void 0===y?void 0:y.then;if("function"==typeof t)h++,t.call(f,t=>{u=t,null!=t&&e.write(t),a&&e.end(),pn.nextTick(p)},t=>{e.destroy(t),pn.nextTick(p,t)});else if(kn(f,!0))h++,Vn(f,e,p,{end:a});else{if(!Dn(f)&&!Bn(f))throw new Rn("AsyncIterable or Promise","destination",f);{const t=f.readable||f;h++,Vn(t,e,p,{end:a})}}f=e;const{destroy:r,cleanup:n}=Hn(f,!1,!0);d.push(r),l&&s.push(n)}}else if(Cn(t)){if(jn(f)){h+=2;const e=Jn(f,t,p,{end:a});Ln(t)&&l&&s.push(e)}else if(Bn(f)||Dn(f)){const e=f.readable||f;h++,Vn(e,t,p,{end:a})}else{if(!kn(f))throw new An("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],f);h++,Vn(f,t,p,{end:a})}f=t}else if(Mn(t)){if(jn(f))h++,Gn(zn(f),t,p,{end:a});else if(Dn(f)||kn(f))h++,Gn(f,t,p,{end:a});else{if(!Bn(f))throw new An("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],f);h++,Gn(f.readable,t,p,{end:a})}f=t}else f=En.from(t)}return(null!=i&&i.aborted||null!=o&&o.aborted)&&pn.nextTick(a),f}function Jn(e,t,r,{end:n}){let i=!1;if(t.on("close",()=>{i||r(new On)}),e.pipe(t,{end:!1}),n){let r=function(){i=!0,t.end()};Un(e)?pn.nextTick(r):e.once("end",r)}else r();return wn(e,{readable:!0,writable:!1},t=>{const n=e._readableState;t&&"ERR_STREAM_PREMATURE_CLOSE"===t.code&&n&&n.ended&&!n.errored&&!n.errorEmitted?e.once("end",r).once("error",r):r(t)}),wn(t,{readable:!1,writable:!0},r)}var Yn={pipelineImpl:Kn,pipeline:function(...e){return Kn(e,_n(function(e){return Nn(e[e.length-1],"streams[stream.length - 1]"),e.pop()}(e)))}};const{pipeline:Zn}=Yn,Xn=Xr(),{destroyer:Qn}=cr,{isNodeStream:ei,isReadable:ti,isWritable:ri,isWebStream:ni,isTransformStream:ii,isWritableStream:oi,isReadableStream:si}=lt,{AbortError:ai,codes:{ERR_INVALID_ARG_VALUE:li,ERR_MISSING_ARGS:ci}}=H,ui=Ft;var di=function(...e){if(0===e.length)throw new ci("streams");if(1===e.length)return Xn.from(e[0]);const t=[...e];if("function"==typeof e[0]&&(e[0]=Xn.from(e[0])),"function"==typeof e[e.length-1]){const t=e.length-1;e[t]=Xn.from(e[t])}for(let d=0;d<e.length;++d)if(ei(e[d])||ni(e[d])){if(d<e.length-1&&!(ti(e[d])||si(e[d])||ii(e[d])))throw new li(`streams[${d}]`,t[d],"must be readable");if(d>0&&!(ri(e[d])||oi(e[d])||ii(e[d])))throw new li(`streams[${d}]`,t[d],"must be writable")}let r,n,i,o,s;const a=e[0],l=Zn(e,function(e){const t=o;o=null,t?t(e):e?s.destroy(e):u||c||s.destroy()}),c=!!(ri(a)||oi(a)||ii(a)),u=!!(ti(l)||si(l)||ii(l));if(s=new Xn({writableObjectMode:!(null==a||!a.writableObjectMode),readableObjectMode:!(null==l||!l.readableObjectMode),writable:c,readable:u}),c){if(ei(a))s._write=function(e,t,n){a.write(e,t)?n():r=n},s._final=function(e){a.end(),n=e},a.on("drain",function(){if(r){const e=r;r=null,e()}});else if(ni(a)){const e=(ii(a)?a.writable:a).getWriter();s._write=async function(t,r,n){try{await e.ready,e.write(t).catch(()=>{}),n()}catch(i){n(i)}},s._final=async function(t){try{await e.ready,e.close().catch(()=>{}),n=t}catch(r){t(r)}}}const e=ii(l)?l.readable:l;ui(e,()=>{if(n){const e=n;n=null,e()}})}if(u)if(ei(l))l.on("readable",function(){if(i){const e=i;i=null,e()}}),l.on("end",function(){s.push(null)}),s._read=function(){for(;;){const e=l.read();if(null===e)return void(i=s._read);if(!s.push(e))return}};else if(ni(l)){const e=(ii(l)?l.readable:l).getReader();s._read=async function(){for(;;)try{const{value:t,done:r}=await e.read();if(!s.push(t))return;if(r)return void s.push(null)}catch{return}}}return s._destroy=function(e,t){e||null===o||(e=new ai),i=null,r=null,n=null,null===o?t(e):(o=t,ei(l)&&Qn(l,e))},s};const fi=globalThis.AbortController||V().AbortController,{codes:{ERR_INVALID_ARG_VALUE:hi,ERR_INVALID_ARG_TYPE:pi,ERR_MISSING_ARGS:gi,ERR_OUT_OF_RANGE:bi},AbortError:yi}=H,{validateAbortSignal:mi,validateInteger:wi,validateObject:_i}=Re,vi=T.Symbol("kWeak"),Ei=T.Symbol("kResistStopPropagation"),{finished:Si}=Ft,Ai=di,{addAbortSignalNoValidate:Ri}=yr,{isWritable:Ii,isNodeStream:Ti}=lt,{deprecate:Oi}=G,{ArrayPrototypePush:xi,Boolean:Ni,MathFloor:Pi,Number:ki,NumberIsNaN:Li,Promise:ji,PromiseReject:Ci,PromiseResolve:Bi,PromisePrototypeThen:Mi,Symbol:Di}=T,Ui=Di("kEmpty"),Fi=Di("kEof");function Wi(e,t){if("function"!=typeof e)throw new pi("fn",["Function","AsyncFunction"],e);null!=t&&_i(t,"options"),null!=(null==t?void 0:t.signal)&&mi(t.signal,"options.signal");let r=1;null!=(null==t?void 0:t.concurrency)&&(r=Pi(t.concurrency));let n=r-1;return null!=(null==t?void 0:t.highWaterMark)&&(n=Pi(t.highWaterMark)),wi(r,"options.concurrency",1),wi(n,"options.highWaterMark",0),n+=r,async function*(){const i=G.AbortSignalAny([null==t?void 0:t.signal].filter(Ni)),o=this,s=[],a={signal:i};let l,c,u=!1,d=0;function f(){u=!0,h()}function h(){d-=1,p()}function p(){c&&!u&&d<r&&s.length<n&&(c(),c=null)}!async function(){try{for await(let p of o){if(u)return;if(i.aborted)throw new yi;try{if(p=e(p,a),p===Ui)continue;p=Bi(p)}catch(t){p=Ci(t)}d+=1,Mi(p,h,f),s.push(p),l&&(l(),l=null),!u&&(s.length>=n||d>=r)&&await new ji(e=>{c=e})}s.push(Fi)}catch(t){const e=Ci(t);Mi(e,h,f),s.push(e)}finally{u=!0,l&&(l(),l=null)}}();try{for(;;){for(;s.length>0;){const e=await s[0];if(e===Fi)return;if(i.aborted)throw new yi;e!==Ui&&(yield e),s.shift(),p()}await new ji(e=>{l=e})}}finally{u=!0,c&&(c(),c=null)}}.call(this)}async function qi(e,t=void 0){for await(const r of $i.call(this,e,t))return!0;return!1}function $i(e,t){if("function"!=typeof e)throw new pi("fn",["Function","AsyncFunction"],e);return Wi.call(this,async function(t,r){return await e(t,r)?t:Ui},t)}class Hi extends gi{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}function zi(e){if(e=ki(e),Li(e))return 0;if(e<0)throw new bi("number",">= 0",e);return e}var Vi,Gi,Ki;function Ji(){if(Gi)return Vi;Gi=1;const{ArrayPrototypePop:e,Promise:t}=T,{isIterable:r,isNodeStream:n,isWebStream:i}=lt,{pipelineImpl:o}=Yn,{finished:s}=Ft;return Yi(),Vi={finished:s,pipeline:function(...s){return new t((t,a)=>{let l,c;const u=s[s.length-1];if(u&&"object"==typeof u&&!n(u)&&!r(u)&&!i(u)){const t=e(s);l=t.signal,c=t.end}o(s,(e,r)=>{e?a(e):t(r)},{signal:l,end:c})})}}}function Yi(){if(Ki)return I.exports;Ki=1;const{Buffer:e}=t,{ObjectDefineProperty:r,ObjectKeys:n,ReflectApply:i}=T,{promisify:{custom:o}}=G,{streamReturningOperators:s,promiseReturningOperators:a}=K,{codes:{ERR_ILLEGAL_CONSTRUCTOR:l}}=H,c=di,{setDefaultHighWaterMark:u,getDefaultHighWaterMark:d}=kr,{pipeline:f}=Yn,{destroyer:h}=cr,p=Ft,g=Ji(),b=lt,y=I.exports=gr.Stream;y.isDestroyed=b.isDestroyed,y.isDisturbed=b.isDisturbed,y.isErrored=b.isErrored,y.isReadable=b.isReadable,y.isWritable=b.isWritable,y.Readable=Jr();for(const t of n(s)){let e=function(...e){if(new.target)throw l();return y.Readable.from(i(n,this,e))};const n=s[t];r(e,"name",{__proto__:null,value:n.name}),r(e,"length",{__proto__:null,value:n.length}),r(y.Readable.prototype,t,{__proto__:null,value:e,enumerable:!1,configurable:!0,writable:!0})}for(const t of n(a)){let e=function(...e){if(new.target)throw l();return i(n,this,e)};const n=a[t];r(e,"name",{__proto__:null,value:n.name}),r(e,"length",{__proto__:null,value:n.length}),r(y.Readable.prototype,t,{__proto__:null,value:e,enumerable:!1,configurable:!0,writable:!0})}y.Writable=Yr(),y.Duplex=Xr(),y.Transform=tn,y.PassThrough=dn,y.pipeline=f;const{addAbortSignal:m}=yr;return y.addAbortSignal=m,y.finished=p,y.destroy=h,y.compose=c,y.setDefaultHighWaterMark=u,y.getDefaultHighWaterMark=d,r(y,"promises",{__proto__:null,configurable:!0,enumerable:!0,get:()=>g}),r(f,o,{__proto__:null,enumerable:!0,get:()=>g.pipeline}),r(p,o,{__proto__:null,enumerable:!0,get:()=>g.finished}),y.Stream=y,y._isUint8Array=function(e){return e instanceof Uint8Array},y._uint8ArrayToBuffer=function(t){return e.from(t.buffer,t.byteOffset,t.byteLength)},I.exports}K.streamReturningOperators={asIndexedPairs:Oi(function(e=void 0){return null!=e&&_i(e,"options"),null!=(null==e?void 0:e.signal)&&mi(e.signal,"options.signal"),async function*(){let t=0;for await(const n of this){var r;if(null!=e&&null!==(r=e.signal)&&void 0!==r&&r.aborted)throw new yi({cause:e.signal.reason});yield[t++,n]}}.call(this)},"readable.asIndexedPairs will be removed in a future version."),drop:function(e,t=void 0){return null!=t&&_i(t,"options"),null!=(null==t?void 0:t.signal)&&mi(t.signal,"options.signal"),e=zi(e),async function*(){var r;if(null!=t&&null!==(r=t.signal)&&void 0!==r&&r.aborted)throw new yi;for await(const i of this){var n;if(null!=t&&null!==(n=t.signal)&&void 0!==n&&n.aborted)throw new yi;e--<=0&&(yield i)}}.call(this)},filter:$i,flatMap:function(e,t){const r=Wi.call(this,e,t);return async function*(){for await(const e of r)yield*e}.call(this)},map:Wi,take:function(e,t=void 0){return null!=t&&_i(t,"options"),null!=(null==t?void 0:t.signal)&&mi(t.signal,"options.signal"),e=zi(e),async function*(){var r;if(null!=t&&null!==(r=t.signal)&&void 0!==r&&r.aborted)throw new yi;for await(const i of this){var n;if(null!=t&&null!==(n=t.signal)&&void 0!==n&&n.aborted)throw new yi;if(e-- >0&&(yield i),e<=0)return}}.call(this)},compose:function(e,t){if(null!=t&&_i(t,"options"),null!=(null==t?void 0:t.signal)&&mi(t.signal,"options.signal"),Ti(e)&&!Ii(e))throw new hi("stream",e,"must be writable");const r=Ai(this,e);return null!=t&&t.signal&&Ri(t.signal,r),r}},K.promiseReturningOperators={every:async function(e,t=void 0){if("function"!=typeof e)throw new pi("fn",["Function","AsyncFunction"],e);return!(await qi.call(this,async(...t)=>!(await e(...t)),t))},forEach:async function(e,t){if("function"!=typeof e)throw new pi("fn",["Function","AsyncFunction"],e);for await(const r of Wi.call(this,async function(t,r){return await e(t,r),Ui},t));},reduce:async function(e,t,r){var n;if("function"!=typeof e)throw new pi("reducer",["Function","AsyncFunction"],e);null!=r&&_i(r,"options"),null!=(null==r?void 0:r.signal)&&mi(r.signal,"options.signal");let i=arguments.length>1;if(null!=r&&null!==(n=r.signal)&&void 0!==n&&n.aborted){const e=new yi(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await Si(this.destroy(e)),e}const o=new fi,s=o.signal;if(null!=r&&r.signal){const e={once:!0,[vi]:this,[Ei]:!0};r.signal.addEventListener("abort",()=>o.abort(),e)}let a=!1;try{for await(const n of this){var l;if(a=!0,null!=r&&null!==(l=r.signal)&&void 0!==l&&l.aborted)throw new yi;i?t=await e(t,n,{signal:s}):(t=n,i=!0)}if(!a&&!i)throw new Hi}finally{o.abort()}return t},toArray:async function(e){null!=e&&_i(e,"options"),null!=(null==e?void 0:e.signal)&&mi(e.signal,"options.signal");const t=[];for await(const n of this){var r;if(null!=e&&null!==(r=e.signal)&&void 0!==r&&r.aborted)throw new yi(void 0,{cause:e.signal.reason});xi(t,n)}return t},some:qi,find:async function(e,t){for await(const r of $i.call(this,e,t))return r}},function(e){const t=Yi(),r=Ji(),n=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=n,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get:()=>r}),e.exports.Stream=t.Stream,e.exports.default=e.exports}(R);var Zi=R.exports,Xi=io;io.default=io,io.stable=lo,io.stableStringify=lo;var Qi="[...]",eo="[Circular]",to=[],ro=[];function no(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function io(e,t,r,n){var i;void 0===n&&(n=no()),so(e,"",0,[],void 0,0,n);try{i=0===ro.length?JSON.stringify(e,t,r):JSON.stringify(e,uo(t),r)}catch(s){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==to.length;){var o=to.pop();4===o.length?Object.defineProperty(o[0],o[1],o[3]):o[0][o[1]]=o[2]}}return i}function oo(e,t,r,n){var i=Object.getOwnPropertyDescriptor(n,r);void 0!==i.get?i.configurable?(Object.defineProperty(n,r,{value:e}),to.push([n,r,t,i])):ro.push([t,r,e]):(n[r]=e,to.push([n,r,t]))}function so(e,t,r,n,i,o,s){var a;if(o+=1,"object"==typeof e&&null!==e){for(a=0;a<n.length;a++)if(n[a]===e)return void oo(eo,e,t,i);if(void 0!==s.depthLimit&&o>s.depthLimit)return void oo(Qi,e,t,i);if(void 0!==s.edgesLimit&&r+1>s.edgesLimit)return void oo(Qi,e,t,i);if(n.push(e),Array.isArray(e))for(a=0;a<e.length;a++)so(e[a],a,a,n,e,o,s);else{var l=Object.keys(e);for(a=0;a<l.length;a++){var c=l[a];so(e[c],c,a,n,e,o,s)}}n.pop()}}function ao(e,t){return e<t?-1:e>t?1:0}function lo(e,t,r,n){void 0===n&&(n=no());var i,o=co(e,"",0,[],void 0,0,n)||e;try{i=0===ro.length?JSON.stringify(o,t,r):JSON.stringify(o,uo(t),r)}catch(a){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==to.length;){var s=to.pop();4===s.length?Object.defineProperty(s[0],s[1],s[3]):s[0][s[1]]=s[2]}}return i}function co(e,t,r,n,i,o,s){var a;if(o+=1,"object"==typeof e&&null!==e){for(a=0;a<n.length;a++)if(n[a]===e)return void oo(eo,e,t,i);try{if("function"==typeof e.toJSON)return}catch(d){return}if(void 0!==s.depthLimit&&o>s.depthLimit)return void oo(Qi,e,t,i);if(void 0!==s.edgesLimit&&r+1>s.edgesLimit)return void oo(Qi,e,t,i);if(n.push(e),Array.isArray(e))for(a=0;a<e.length;a++)co(e[a],a,a,n,e,o,s);else{var l={},c=Object.keys(e).sort(ao);for(a=0;a<c.length;a++){var u=c[a];co(e[u],u,a,n,e,o,s),l[u]=e[u]}if(void 0===i)return l;to.push([i,t,e]),i[t]=l}n.pop()}}function uo(e){return e=void 0!==e?e:function(e,t){return t},function(t,r){if(ro.length>0)for(var n=0;n<ro.length;n++){var i=ro[n];if(i[1]===t&&i[0]===r){r=i[2],ro.splice(n,1);break}}return e.call(this,t,r)}}const fo=s(Xi);var ho={exports:{}},po=function e(t,r){if(t&&r)return e(t)(r);if("function"!=typeof t)throw new TypeError("need wrapper function");return Object.keys(t).forEach(function(e){n[e]=t[e]}),n;function n(){for(var e=new Array(arguments.length),r=0;r<e.length;r++)e[r]=arguments[r];var n=t.apply(this,e),i=e[e.length-1];return"function"==typeof n&&n!==i&&Object.keys(i).forEach(function(e){n[e]=i[e]}),n}};var go=po;function bo(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function yo(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}ho.exports=go(bo),ho.exports.strict=go(yo),bo.proto=bo(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return bo(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return yo(this)},configurable:!0})});var mo=ho.exports;const wo=s(mo);var _o=mo,vo=function(){},Eo=a.Bare?queueMicrotask:process.nextTick.bind(process),So=function(e,t,r){if("function"==typeof t)return So(e,null,t);t||(t={}),r=_o(r||vo);var n=e._writableState,i=e._readableState,o=t.readable||!1!==t.readable&&e.readable,s=t.writable||!1!==t.writable&&e.writable,a=!1,l=function(){e.writable||c()},c=function(){s=!1,o||r.call(e)},u=function(){o=!1,s||r.call(e)},d=function(t){r.call(e,t?new Error("exited with error code: "+t):null)},f=function(t){r.call(e,t)},h=function(){Eo(p)},p=function(){if(!a)return(!o||i&&i.ended&&!i.destroyed)&&(!s||n&&n.ended&&!n.destroyed)?void 0:r.call(e,new Error("premature close"))},g=function(){e.req.on("finish",c)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(e)?s&&!n&&(e.on("end",l),e.on("close",l)):(e.on("complete",c),e.on("abort",h),e.req?g():e.on("request",g)),function(e){return e.stdio&&Array.isArray(e.stdio)&&3===e.stdio.length}(e)&&e.on("exit",d),e.on("end",u),e.on("finish",c),!1!==t.error&&e.on("error",f),e.on("close",h),function(){a=!0,e.removeListener("complete",c),e.removeListener("abort",h),e.removeListener("request",g),e.req&&e.req.removeListener("finish",c),e.removeListener("end",l),e.removeListener("close",l),e.removeListener("finish",c),e.removeListener("exit",d),e.removeListener("end",u),e.removeListener("error",f),e.removeListener("close",h)}},Ao=So;const Ro=s(Ao);var Io,To=mo,Oo=Ao;try{Io=n}catch(Dc){}var xo=function(){},No="undefined"!=typeof process&&/^v?\.0/.test(process.version),Po=function(e){return"function"==typeof e},ko=function(e,t,r,n){n=To(n);var i=!1;e.on("close",function(){i=!0}),Oo(e,{readable:t,writable:r},function(e){if(e)return n(e);i=!0,n()});var o=!1;return function(t){if(!i&&!o)return o=!0,function(e){return!!No&&!!Io&&(e instanceof(Io.ReadStream||xo)||e instanceof(Io.WriteStream||xo))&&Po(e.close)}(e)?e.close(xo):function(e){return e.setHeader&&Po(e.abort)}(e)?e.abort():Po(e.destroy)?e.destroy():void n(t||new Error("stream was destroyed"))}},Lo=function(e){e()},jo=function(e,t){return e.pipe(t)};const Co=s(function(){var e,t=Array.prototype.slice.call(arguments),r=Po(t[t.length-1]||xo)&&t.pop()||xo;if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new Error("pump requires two streams per minimum");var n=t.map(function(i,o){var s=o<t.length-1;return ko(i,s,o>0,function(t){e||(e=t),t&&n.forEach(Lo),s||(n.forEach(Lo),r(e))})});return t.reduce(jo)});function Bo(){}const Mo="ACK";class Do extends Zi.Duplex{constructor(e){let{name:t,target:r,targetWindow:n=window,targetOrigin:i="*"}=e;if(super({objectMode:!0}),E(this,"_init",void 0),E(this,"_haveSyn",void 0),E(this,"_name",void 0),E(this,"_target",void 0),E(this,"_targetWindow",void 0),E(this,"_targetOrigin",void 0),E(this,"_onMessage",void 0),E(this,"_synIntervalId",void 0),!t||!r)throw new Error("Invalid input.");this._init=!1,this._haveSyn=!1,this._name=t,this._target=r,this._targetWindow=n,this._targetOrigin=i,this._onMessage=this.onMessage.bind(this),this._synIntervalId=null,window.addEventListener("message",this._onMessage,!1),this._handShake()}_break(){this.cork(),this._write("BRK",null,Bo),this._haveSyn=!1,this._init=!1}_handShake(){this._write("SYN",null,Bo),this.cork()}_onData(e){if(this._init)if("BRK"===e)this._break();else try{this.push(e)}catch(t){this.emit("error",t)}else"SYN"===e?(this._haveSyn=!0,this._write(Mo,null,Bo)):e===Mo&&(this._init=!0,this._haveSyn||this._write(Mo,null,Bo),this.uncork())}_postMessage(e){const t=this._targetOrigin;this._targetWindow.postMessage({target:this._target,data:e},t)}onMessage(e){const t=e.data;"*"!==this._targetOrigin&&e.origin!==this._targetOrigin||e.source!==this._targetWindow||"object"!=typeof t||t.target!==this._name||!t.data||this._onData(t.data)}_read(){}_write(e,t,r){this._postMessage(e),r()}_destroy(){window.removeEventListener("message",this._onMessage,!1)}}const Uo={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}},Fo=-32603;function Wo(e){return Number.isInteger(e)}function qo(e){return"string"==typeof e&&e.length>0}function $o(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)}function Ho(e){const t=e;return!!t&&(!(!Wo(t.code)||!qo(t.message))&&!(t.stack&&!qo(t.stack)))}const zo={code:Fo,message:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Unspecified error message. This is a bug, please report it.";if(Wo(e)){const t=e.toString();if(Object.hasOwn(Uo,t))return Uo[t].message}return t}(Fo)};function Vo(e){try{JSON.parse(JSON.stringify(e,(e,t)=>{if("__proto__"===e||"constructor"===e)throw new Error("Not valid json");if("function"==typeof t||"symbol"==typeof t)throw new Error("Not valid json");return t}),(e,t)=>{if("__proto__"!==e&&"constructor"!==e)return t})}catch(Dc){return!1}return!0}function Go(e){return Object.getOwnPropertyNames(e).reduce((t,r)=>{const n=e[r];return Vo(n)&&(t[r]=n),t},{})}function Ko(e,t){if(e&&"object"==typeof e&&"serialize"in e&&"function"==typeof e.serialize)return e.serialize();if(Ho(e))return e;const r=function(e){return Array.isArray(e)?e.map(e=>Vo(e)?e:$o(e)?Go(e):null):$o(e)?Go(e):Vo(e)?e:null}(e);return A(A({},t),{},{data:{cause:r}})}function Jo(e){let{fallbackError:t=zo,shouldIncludeStack:r=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Ho(t))throw new Error("Must provide fallback error with integer number code and string message.");const n=Ko(e,t);return r||delete n.stack,n}function Yo(e,t,r){try{Reflect.apply(e,t,r)}catch(n){setTimeout(()=>{throw n})}}class Zo extends i.EventEmitter{emit(e){let t="error"===e;const r=this._events;if(void 0!==r)t=t&&void 0===r.error;else if(!t)return!1;for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];if(t){let e;if(i.length>0&&([e]=i),e instanceof Error)throw e;const t=new Error("Unhandled error."+(e?` (${e.message})`:""));throw t.context=e,t}const s=r[e];if(void 0===s)return!1;if("function"==typeof s)Yo(s,this,i);else{const e=s.length,t=function(e){const t=e.length,r=new Array(t);for(let n=0;n<t;n+=1)r[n]=e[n];return r}(s);for(let r=0;r<e;r+=1)Yo(t[r],this,i)}return!0}}class Xo extends Error{constructor(e){let{code:t,message:r,data:n}=e;if(!Number.isInteger(t))throw new Error("code must be an integer");if(!r||"string"!=typeof r)throw new Error("message must be string");super(r),E(this,"code",void 0),E(this,"data",void 0),this.code=t,void 0!==n&&(this.data=n)}toString(){return fo({code:this.code,message:this.message,data:this.data,stack:this.stack})}}const Qo=function(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return(n,i)=>{n||i.error?t(n||i.error):!r||Array.isArray(i)?e(i):e(i.result)}};function es(){const e={};const t=new Zo;const r=new Zi.Duplex({objectMode:!0,read:function(){return!1},write:function(r,n,i){let o;try{!r.id?function(e){t.emit("notification",e)}(r):function(t){const r=e[t.id];if(!r)throw new Error(`StreamMiddleware - Unknown response id "${t.id}"`);delete e[t.id],Object.assign(r.res,t),setTimeout(r.end)}(r)}catch(s){o=s}i(o)}});return{events:t,middleware:(t,n,i,o)=>{r.push(t),e[t.id]={req:t,res:n,next:i,end:o}},stream:r}}class ts extends Zo{constructor(){super(),E(this,"_middleware",void 0),this._middleware=[]}static async _runAllMiddleware(e,t,r){const n=[];let i=null,o=!1;for(const s of r)if([i,o]=await ts._runMiddleware(e,t,s,n),o)break;return[i,o,n.reverse()]}static _runMiddleware(e,t,r,n){return new Promise(i=>{const o=e=>{const r=e||t.error;r&&("object"==typeof r&&!1===Object.keys(r).includes("stack")&&(r.stack="Stack trace is not available."),t.error=Jo(r,{shouldIncludeStack:!0,fallbackError:{message:(null==r?void 0:r.message)||(null==r?void 0:r.toString()),code:(null==r?void 0:r.code)||-32603,stack:(null==r?void 0:r.stack)||"Stack trace is not available.",data:(null==r?void 0:r.data)||(null==r?void 0:r.message)||(null==r?void 0:r.toString())}})),i([r,!0])},s=e=>{t.error?o(t.error):(e&&("function"!=typeof e&&o(new Xo({code:-32603,message:"JRPCEngine: 'next' return handlers must be functions"})),n.push(e)),i([null,!1]))};try{r(e,t,s,o)}catch(a){o(a)}})}static async _runReturnHandlers(e){for(const t of e)await new Promise((e,r)=>{t(t=>t?r(t):e())})}static _checkForCompletion(e,t,r){if(!("result"in t)&&!("error"in t))throw new Xo({code:-32603,message:"Response has no error or result for request"});if(!r)throw new Xo({code:-32603,message:"Nothing ended request"})}push(e){this._middleware.push(e)}handle(e,t){if(t&&"function"!=typeof t)throw new Error('"callback" must be a function if provided.');return Array.isArray(e)?t?this._handleBatch(e,t):this._handleBatch(e):t?this._handle(e,t):this._promiseHandle(e)}asMiddleware(){return async(e,t,r,n)=>{try{const[i,o,s]=await ts._runAllMiddleware(e,t,this._middleware);return o?(await ts._runReturnHandlers(s),n(i)):r(async e=>{try{await ts._runReturnHandlers(s)}catch(t){return e(t)}return e()})}catch(i){return n(i)}}}async _handleBatch(e,t){try{const r=await Promise.all(e.map(this._promiseHandle.bind(this)));return t?t(null,r):r}catch(r){if(t)return t(r);throw r}}_promiseHandle(e){return new Promise((t,r)=>{this._handle(e,(e,n)=>{e&&void 0===n?r(e):t(n)}).catch(r)})}async _handle(e,t){if(!e||Array.isArray(e)||"object"!=typeof e){const e=new Xo({code:-32603,message:"request must be plain object"});return t(e,{id:void 0,jsonrpc:"2.0",error:e})}if("string"!=typeof e.method){const r=new Xo({code:-32603,message:"method must be string"});return t(r,{id:e.id,jsonrpc:"2.0",error:r})}const r=A({},e),n={id:r.id,jsonrpc:r.jsonrpc};let i=null;try{await this._processRequest(r,n)}catch(f){i=f}var o,s,a,l,c,u,d;i&&(delete n.result,n.error||("object"==typeof i&&!1===Object.keys(i).includes("stack")&&(i.stack="Stack trace is not available."),n.error=Jo(i,{shouldIncludeStack:!0,fallbackError:{message:(null===(o=i)||void 0===o?void 0:o.message)||(null===(s=i)||void 0===s?void 0:s.toString()),code:(null===(a=i)||void 0===a?void 0:a.code)||-32603,stack:(null===(l=i)||void 0===l?void 0:l.stack)||"Stack trace is not available.",data:(null===(c=i)||void 0===c?void 0:c.data)||(null===(u=i)||void 0===u?void 0:u.message)||(null===(d=i)||void 0===d?void 0:d.toString())}})));return t(i,n)}async _processRequest(e,t){const[r,n,i]=await ts._runAllMiddleware(e,t,this._middleware);if(ts._checkForCompletion(e,t,n),await ts._runReturnHandlers(i),r)throw r}}class rs extends Zi.Duplex{constructor(e){let{parent:t,name:r}=e;super({objectMode:!0}),E(this,"_parent",void 0),E(this,"_name",void 0),this._parent=t,this._name=r}_read(){}_write(e,t,r){this._parent.push({name:this._name,data:e}),r()}}const ns=Symbol("IGNORE_SUBSTREAM");class is extends Zi.Duplex{constructor(){super(A(A({},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),{},{objectMode:!0})),E(this,"_substreams",void 0),E(this,"getStream",void 0),this._substreams={}}createStream(e){if(!e)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[e])throw new Error(`ObjectMultiplex - Substream for name "${e}" already exists`);const t=new rs({parent:this,name:e});return this._substreams[e]=t,function(e,t){const r=wo(t);Ro(e,{readable:!1},r),Ro(e,{writable:!1},r)}(this,e=>t.destroy(e||void 0)),t}ignoreStream(e){if(!e)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[e])throw new Error(`ObjectMultiplex - Substream for name "${e}" already exists`);this._substreams[e]=ns}_read(){}_write(e,t,r){const{name:n,data:i}=e;if(!n)return window.console.warn(`ObjectMultiplex - malformed chunk without name "${e}"`),r();const o=this._substreams[n];return o?(o!==ns&&o.push(i),r()):(window.console.warn(`ObjectMultiplex - orphaned data for stream "${n}"`),r())}}var os={exports:{}};!function(e,t){var r="__lodash_hash_undefined__",n=9007199254740991,i="[object Arguments]",o="[object Function]",s="[object Object]",l=/^\[object .+?Constructor\]$/,c=/^(?:0|[1-9]\d*)$/,u={};u["[object Float32Array]"]=u["[object Float64Array]"]=u["[object Int8Array]"]=u["[object Int16Array]"]=u["[object Int32Array]"]=u["[object Uint8Array]"]=u["[object Uint8ClampedArray]"]=u["[object Uint16Array]"]=u["[object Uint32Array]"]=!0,u[i]=u["[object Array]"]=u["[object ArrayBuffer]"]=u["[object Boolean]"]=u["[object DataView]"]=u["[object Date]"]=u["[object Error]"]=u[o]=u["[object Map]"]=u["[object Number]"]=u[s]=u["[object RegExp]"]=u["[object Set]"]=u["[object String]"]=u["[object WeakMap]"]=!1;var d="object"==typeof a&&a&&a.Object===Object&&a,f="object"==typeof self&&self&&self.Object===Object&&self,h=d||f||Function("return this")(),p=t&&!t.nodeType&&t,g=p&&e&&!e.nodeType&&e,b=g&&g.exports===p,y=b&&d.process,m=function(){try{var e=g&&g.require&&g.require("util").types;return e||y&&y.binding&&y.binding("util")}catch(Dc){}}(),w=m&&m.isTypedArray;var _,v=Array.prototype,E=Function.prototype,S=Object.prototype,A=h["__core-js_shared__"],R=E.toString,I=S.hasOwnProperty,T=(_=/[^.]+$/.exec(A&&A.keys&&A.keys.IE_PROTO||""))?"Symbol(src)_1."+_:"",O=S.toString,x=R.call(Object),N=RegExp("^"+R.call(I).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),P=b?h.Buffer:void 0,k=h.Symbol,L=h.Uint8Array;P&&P.allocUnsafe;var j,C,B=(j=Object.getPrototypeOf,C=Object,function(e){return j(C(e))}),M=Object.create,D=S.propertyIsEnumerable,U=v.splice,F=k?k.toStringTag:void 0,W=function(){try{var e=fe(Object,"defineProperty");return e({},"",{}),e}catch(Dc){}}(),q=P?P.isBuffer:void 0,$=Math.max,H=Date.now,z=fe(h,"Map"),V=fe(Object,"create"),G=function(){function e(){}return function(t){if(!Ae(t))return{};if(M)return M(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function K(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function J(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Y(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Z(e){var t=this.__data__=new J(e);this.size=t.size}function X(e,t){var r=we(e),n=!r&&me(e),i=!r&&!n&&ve(e),o=!r&&!n&&!i&&Ie(e),s=r||n||i||o,a=s?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],l=a.length;for(var c in e)s&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||he(c,l))||a.push(c);return a}function Q(e,t,r){(void 0!==r&&!ye(e[t],r)||void 0===r&&!(t in e))&&re(e,t,r)}function ee(e,t,r){var n=e[t];I.call(e,t)&&ye(n,r)&&(void 0!==r||t in e)||re(e,t,r)}function te(e,t){for(var r=e.length;r--;)if(ye(e[r][0],t))return r;return-1}function re(e,t,r){"__proto__"==t&&W?W(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}K.prototype.clear=function(){this.__data__=V?V(null):{},this.size=0},K.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},K.prototype.get=function(e){var t=this.__data__;if(V){var n=t[e];return n===r?void 0:n}return I.call(t,e)?t[e]:void 0},K.prototype.has=function(e){var t=this.__data__;return V?void 0!==t[e]:I.call(t,e)},K.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=V&&void 0===t?r:t,this},J.prototype.clear=function(){this.__data__=[],this.size=0},J.prototype.delete=function(e){var t=this.__data__,r=te(t,e);return!(r<0)&&(r==t.length-1?t.pop():U.call(t,r,1),--this.size,!0)},J.prototype.get=function(e){var t=this.__data__,r=te(t,e);return r<0?void 0:t[r][1]},J.prototype.has=function(e){return te(this.__data__,e)>-1},J.prototype.set=function(e,t){var r=this.__data__,n=te(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},Y.prototype.clear=function(){this.size=0,this.__data__={hash:new K,map:new(z||J),string:new K}},Y.prototype.delete=function(e){var t=de(this,e).delete(e);return this.size-=t?1:0,t},Y.prototype.get=function(e){return de(this,e).get(e)},Y.prototype.has=function(e){return de(this,e).has(e)},Y.prototype.set=function(e,t){var r=de(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},Z.prototype.clear=function(){this.__data__=new J,this.size=0},Z.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Z.prototype.get=function(e){return this.__data__.get(e)},Z.prototype.has=function(e){return this.__data__.has(e)},Z.prototype.set=function(e,t){var r=this.__data__;if(r instanceof J){var n=r.__data__;if(!z||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Y(n)}return r.set(e,t),this.size=r.size,this};var ne=function(e,t,r){for(var n=-1,i=Object(e),o=r(e),s=o.length;s--;){var a=o[++n];if(!1===t(i[a],a,i))break}return e};function ie(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":F&&F in Object(e)?function(e){var t=I.call(e,F),r=e[F];try{e[F]=void 0;var n=!0}catch(Dc){}var i=O.call(e);n&&(t?e[F]=r:delete e[F]);return i}(e):function(e){return O.call(e)}(e)}function oe(e){return Re(e)&&ie(e)==i}function se(e){return!(!Ae(e)||function(e){return!!T&&T in e}(e))&&(Ee(e)?N:l).test(function(e){if(null!=e){try{return R.call(e)}catch(Dc){}try{return e+""}catch(Dc){}}return""}(e))}function ae(e){if(!Ae(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=pe(e),r=[];for(var n in e)("constructor"!=n||!t&&I.call(e,n))&&r.push(n);return r}function le(e,t,r,n,i){e!==t&&ne(t,function(o,a){if(i||(i=new Z),Ae(o))!function(e,t,r,n,i,o,a){var l=ge(e,r),c=ge(t,r),u=a.get(c);if(u)return void Q(e,r,u);var d=o?o(l,c,r+"",e,t,a):void 0,f=void 0===d;if(f){var h=we(c),p=!h&&ve(c),g=!h&&!p&&Ie(c);d=c,h||p||g?we(l)?d=l:Re(b=l)&&_e(b)?d=function(e,t){var r=-1,n=e.length;t||(t=Array(n));for(;++r<n;)t[r]=e[r];return t}(l):p?(f=!1,d=c.slice()):g?(f=!1,d=function(e){var t=(r=e.buffer,n=new r.constructor(r.byteLength),new L(n).set(new L(r)),n);var r,n;return new e.constructor(t,e.byteOffset,e.length)}(c)):d=[]:function(e){if(!Re(e)||ie(e)!=s)return!1;var t=B(e);if(null===t)return!0;var r=I.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&R.call(r)==x}(c)||me(c)?(d=l,me(l)?d=function(e){return function(e,t,r){var n=!r;r||(r={});var i=-1,o=t.length;for(;++i<o;){var s=t[i],a=void 0;void 0===a&&(a=e[s]),n?re(r,s,a):ee(r,s,a)}return r}(e,Te(e))}(l):Ae(l)&&!Ee(l)||(d=function(e){return"function"!=typeof e.constructor||pe(e)?{}:G(B(e))}(c))):f=!1}var b;f&&(a.set(c,d),i(d,c,n,o,a),a.delete(c));Q(e,r,d)}(e,t,a,r,le,n,i);else{var l=n?n(ge(e,a),o,a+"",e,t,i):void 0;void 0===l&&(l=o),Q(e,a,l)}},Te)}function ce(e,t){return be(function(e,t,r){return t=$(void 0===t?e.length-1:t,0),function(){for(var n=arguments,i=-1,o=$(n.length-t,0),s=Array(o);++i<o;)s[i]=n[t+i];i=-1;for(var a=Array(t+1);++i<t;)a[i]=n[i];return a[t]=r(s),function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}(e,this,a)}}(e,t,Ne),e+"")}var ue=W?function(e,t){return W(e,"toString",{configurable:!0,enumerable:!1,value:(r=t,function(){return r}),writable:!0});var r}:Ne;function de(e,t){var r,n,i=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof t?"string":"hash"]:i.map}function fe(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return se(r)?r:void 0}function he(e,t){var r=typeof e;return!!(t=null==t?n:t)&&("number"==r||"symbol"!=r&&c.test(e))&&e>-1&&e%1==0&&e<t}function pe(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||S)}function ge(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var be=function(e){var t=0,r=0;return function(){var n=H(),i=16-(n-r);if(r=n,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(ue);function ye(e,t){return e===t||e!=e&&t!=t}var me=oe(function(){return arguments}())?oe:function(e){return Re(e)&&I.call(e,"callee")&&!D.call(e,"callee")},we=Array.isArray;function _e(e){return null!=e&&Se(e.length)&&!Ee(e)}var ve=q||function(){return!1};function Ee(e){if(!Ae(e))return!1;var t=ie(e);return t==o||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Se(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}function Ae(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Re(e){return null!=e&&"object"==typeof e}var Ie=w?function(e){return function(t){return e(t)}}(w):function(e){return Re(e)&&Se(e.length)&&!!u[ie(e)]};function Te(e){return _e(e)?X(e):ae(e)}var Oe,xe=(Oe=function(e,t,r){le(e,t,r)},ce(function(e,t){var r=-1,n=t.length,i=n>1?t[n-1]:void 0,o=n>2?t[2]:void 0;for(i=Oe.length>3&&"function"==typeof i?(n--,i):void 0,o&&function(e,t,r){if(!Ae(r))return!1;var n=typeof t;return!!("number"==n?_e(r)&&he(t,r.length):"string"==n&&t in r)&&ye(r[t],e)}(t[0],t[1],o)&&(i=n<3?void 0:i,n=1),e=Object(e);++r<n;){var s=t[r];s&&Oe(e,s,r,i)}return e}));function Ne(e){return e}e.exports=xe}(os,os.exports);var ss,as,ls,cs={exports:{}};as=a,ls=function(){var e=function(){},t="undefined",r=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),n=["trace","debug","info","warn","error"],i={},o=null;function s(e,t){var r=e[t];if("function"==typeof r.bind)return r.bind(e);try{return Function.prototype.bind.call(r,e)}catch(Dc){return function(){return Function.prototype.apply.apply(r,[e,arguments])}}}function a(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function l(){for(var r=this.getLevel(),i=0;i<n.length;i++){var o=n[i];this[o]=i<r?e:this.methodFactory(o,r,this.name)}if(this.log=this.debug,typeof console===t&&r<this.levels.SILENT)return"No console available for logging"}function c(e){return function(){typeof console!==t&&(l.call(this),this[e].apply(this,arguments))}}function u(n,i,o){return function(n){return"debug"===n&&(n="log"),typeof console!==t&&("trace"===n&&r?a:void 0!==console[n]?s(console,n):void 0!==console.log?s(console,"log"):e)}(n)||c.apply(this,arguments)}function d(e,r){var s,a,c,d=this,f="loglevel";function h(){var e;if(typeof window!==t&&f){try{e=window.localStorage[f]}catch(o){}if(typeof e===t)try{var r=window.document.cookie,n=encodeURIComponent(f),i=r.indexOf(n+"=");-1!==i&&(e=/^([^;]+)/.exec(r.slice(i+n.length+1))[1])}catch(o){}return void 0===d.levels[e]&&(e=void 0),e}}function p(e){var t=e;if("string"==typeof t&&void 0!==d.levels[t.toUpperCase()]&&(t=d.levels[t.toUpperCase()]),"number"==typeof t&&t>=0&&t<=d.levels.SILENT)return t;throw new TypeError("log.setLevel() called with invalid level: "+e)}"string"==typeof e?f+=":"+e:"symbol"==typeof e&&(f=void 0),d.name=e,d.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},d.methodFactory=r||u,d.getLevel=function(){return null!=c?c:null!=a?a:s},d.setLevel=function(e,r){return c=p(e),!1!==r&&function(e){var r=(n[e]||"silent").toUpperCase();if(typeof window!==t&&f){try{return void(window.localStorage[f]=r)}catch(i){}try{window.document.cookie=encodeURIComponent(f)+"="+r+";"}catch(i){}}}(c),l.call(d)},d.setDefaultLevel=function(e){a=p(e),h()||d.setLevel(e,!1)},d.resetLevel=function(){c=null,function(){if(typeof window!==t&&f){try{window.localStorage.removeItem(f)}catch(e){}try{window.document.cookie=encodeURIComponent(f)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}(),l.call(d)},d.enableAll=function(e){d.setLevel(d.levels.TRACE,e)},d.disableAll=function(e){d.setLevel(d.levels.SILENT,e)},d.rebuild=function(){if(o!==d&&(s=p(o.getLevel())),l.call(d),o===d)for(var e in i)i[e].rebuild()},s=p(o?o.getLevel():"WARN");var g=h();null!=g&&(c=p(g)),l.call(d)}(o=new d).getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=i[e];return t||(t=i[e]=new d(e,o.methodFactory)),t};var f=typeof window!==t?window.log:void 0;return o.noConflict=function(){return typeof window!==t&&window.log===o&&(window.log=f),o},o.getLoggers=function(){return i},o.default=o,o},(ss=cs).exports?ss.exports=ls():as.log=ls();var us=cs.exports;const ds=s(us);function fs(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function hs(e,...t){if(!((r=e)instanceof Uint8Array||null!=r&&"object"==typeof r&&"Uint8Array"===r.constructor.name))throw new Error("Uint8Array expected");var r;if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function ps(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}ds.getLogger("http-helpers").setLevel(us.levels.INFO);const gs="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,bs=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),ys=(e,t)=>e<<32-t|e>>>t;
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ms(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),hs(e),e}new Uint8Array(new Uint32Array([287454020]).buffer)[0];class ws{clone(){return this._cloneInto()}}function _s(e){const t=t=>e().update(ms(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function vs(e=32){if(gs&&"function"==typeof gs.getRandomValues)return gs.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}const Es=(e,t,r)=>e&t^~e&r,Ss=(e,t,r)=>e&t^e&r^t&r;class As extends ws{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=bs(this.buffer)}update(e){ps(this);const{view:t,buffer:r,blockLen:n}=this,i=(e=ms(e)).length;for(let o=0;o<i;){const s=Math.min(n-this.pos,i-o);if(s===n){const t=bs(e);for(;n<=i-o;o+=n)this.process(t,o);continue}r.set(e.subarray(o,o+s),this.pos),this.pos+=s,o+=s,this.pos===n&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){ps(this),function(e,t){hs(e);const r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:n,isLE:i}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>n-o&&(this.process(r,0),o=0);for(let u=o;u<n;u++)t[u]=0;!function(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);const i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),l=n?4:0,c=n?0:4;e.setUint32(t+l,s,n),e.setUint32(t+c,a,n)}(r,n-8,BigInt(8*this.length),i),this.process(r,0);const s=bs(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=a/4,c=this.get();if(l>c.length)throw new Error("_sha2: outputLen bigger than state");for(let u=0;u<l;u++)s.setUint32(4*u,c[u],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:n,finished:i,destroyed:o,pos:s}=this;return e.length=n,e.pos=s,e.finished=i,e.destroyed=o,n%t&&e.buffer.set(r),e}}const Rs=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Is=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ts=new Uint32Array(64);class Os extends As{constructor(){super(64,32,8,!1),this.A=0|Is[0],this.B=0|Is[1],this.C=0|Is[2],this.D=0|Is[3],this.E=0|Is[4],this.F=0|Is[5],this.G=0|Is[6],this.H=0|Is[7]}get(){const{A:e,B:t,C:r,D:n,E:i,F:o,G:s,H:a}=this;return[e,t,r,n,i,o,s,a]}set(e,t,r,n,i,o,s,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(e,t){for(let u=0;u<16;u++,t+=4)Ts[u]=e.getUint32(t,!1);for(let u=16;u<64;u++){const e=Ts[u-15],t=Ts[u-2],r=ys(e,7)^ys(e,18)^e>>>3,n=ys(t,17)^ys(t,19)^t>>>10;Ts[u]=n+Ts[u-7]+r+Ts[u-16]|0}let{A:r,B:n,C:i,D:o,E:s,F:a,G:l,H:c}=this;for(let u=0;u<64;u++){const e=c+(ys(s,6)^ys(s,11)^ys(s,25))+Es(s,a,l)+Rs[u]+Ts[u]|0,t=(ys(r,2)^ys(r,13)^ys(r,22))+Ss(r,n,i)|0;c=l,l=a,a=s,s=o+e|0,o=i,i=n,n=r,r=e+t|0}r=r+this.A|0,n=n+this.B|0,i=i+this.C|0,o=o+this.D|0,s=s+this.E|0,a=a+this.F|0,l=l+this.G|0,c=c+this.H|0,this.set(r,n,i,o,s,a,l,c)}roundClean(){Ts.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const xs=_s(()=>new Os);class Ns extends ws{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,function(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");fs(e.outputLen),fs(e.blockLen)}(e);const r=ms(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const n=this.blockLen,i=new Uint8Array(n);i.set(r.length>n?e.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=e.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),i.fill(0)}update(e){return ps(this),this.iHash.update(e),this}digestInto(e){ps(this),hs(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:o,outputLen:s}=this;return e.finished=n,e.destroyed=i,e.blockLen=o,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Ps=(e,t,r)=>new Ns(e,t).update(r).digest();Ps.create=(e,t)=>new Ns(e,t);
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const ks=BigInt(0),Ls=BigInt(1),js=BigInt(2);function Cs(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function Bs(e){if(!Cs(e))throw new Error("Uint8Array expected")}const Ms=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Ds(e){Bs(e);let t="";for(let r=0;r<e.length;r++)t+=Ms[e[r]];return t}function Us(e){const t=e.toString(16);return 1&t.length?`0${t}`:t}function Fs(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}const Ws=48,qs=57,$s=65,Hs=70,zs=97,Vs=102;function Gs(e){return e>=Ws&&e<=qs?e-Ws:e>=$s&&e<=Hs?e-($s-10):e>=zs&&e<=Vs?e-(zs-10):void 0}function Ks(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let i=0,o=0;i<r;i++,o+=2){const t=Gs(e.charCodeAt(o)),r=Gs(e.charCodeAt(o+1));if(void 0===t||void 0===r){const t=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+o)}n[i]=16*t+r}return n}function Js(e){return Fs(Ds(e))}function Ys(e){return Bs(e),Fs(Ds(Uint8Array.from(e).reverse()))}function Zs(e,t){return Ks(e.toString(16).padStart(2*t,"0"))}function Xs(e,t){return Zs(e,t).reverse()}function Qs(e,t,r){let n;if("string"==typeof t)try{n=Ks(t)}catch(Dc){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${Dc}`)}else{if(!Cs(t))throw new Error(`${e} must be hex string or Uint8Array`);n=Uint8Array.from(t)}const i=n.length;if("number"==typeof r&&i!==r)throw new Error(`${e} expected ${r} bytes, got ${i}`);return n}function ea(...e){let t=0;for(let n=0;n<e.length;n++){const r=e[n];Bs(r),t+=r.length}const r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){const t=e[n];r.set(t,i),i+=t.length}return r}const ta=e=>(js<<BigInt(e-1))-Ls,ra=e=>new Uint8Array(e),na=e=>Uint8Array.from(e);function ia(e,t,r){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof r)throw new Error("hmacFn must be a function");let n=ra(e),i=ra(e),o=0;const s=()=>{n.fill(1),i.fill(0),o=0},a=(...e)=>r(i,n,...e),l=(e=ra())=>{i=a(na([0]),e),n=a(),0!==e.length&&(i=a(na([1]),e),n=a())},c=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const r=[];for(;e<t;){n=a();const t=n.slice();r.push(t),e+=n.length}return ea(...r)};return(e,t)=>{let r;for(s(),l(e);!(r=t(c()));)l();return s(),r}}const oa={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||Cs(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function sa(e,t,r={}){const n=(t,r,n)=>{const i=oa[r];if("function"!=typeof i)throw new Error(`Invalid validator "${r}", expected function`);const o=e[t];if(!(n&&void 0===o||i(o,e)))throw new Error(`Invalid param ${String(t)}=${o} (${typeof o}), expected ${r}`)};for(const[i,o]of Object.entries(t))n(i,o,!1);for(const[i,o]of Object.entries(r))n(i,o,!0);return e}const aa=Object.freeze(Object.defineProperty({__proto__:null,abytes:Bs,bitGet:function(e,t){return e>>BigInt(t)&Ls},bitLen:function(e){let t;for(t=0;e>ks;e>>=Ls,t+=1);return t},bitMask:ta,bitSet:function(e,t,r){return e|(r?Ls:ks)<<BigInt(t)},bytesToHex:Ds,bytesToNumberBE:Js,bytesToNumberLE:Ys,concatBytes:ea,createHmacDrbg:ia,ensureBytes:Qs,equalBytes:function(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return 0===r},hexToBytes:Ks,hexToNumber:Fs,isBytes:Cs,numberToBytesBE:Zs,numberToBytesLE:Xs,numberToHexUnpadded:Us,numberToVarBytesBE:function(e){return Ks(Us(e))},utf8ToBytes:function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))},validateObject:sa},Symbol.toStringTag,{value:"Module"})),la=BigInt(0),ca=BigInt(1),ua=BigInt(2),da=BigInt(3),fa=BigInt(4),ha=BigInt(5),pa=BigInt(8);
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ga(e,t){const r=e%t;return r>=la?r:t+r}function ba(e,t,r){if(r<=la||t<la)throw new Error("Expected power/modulo > 0");if(r===ca)return la;let n=ca;for(;t>la;)t&ca&&(n=n*e%r),e=e*e%r,t>>=ca;return n}function ya(e,t,r){let n=e;for(;t-- >la;)n*=n,n%=r;return n}function ma(e,t){if(e===la||t<=la)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=ga(e,t),n=t,i=la,o=ca;for(;r!==la;){const e=n%r,t=i-o*(n/r);n=r,r=e,i=o,o=t}if(n!==ca)throw new Error("invert: does not exist");return ga(i,t)}function wa(e){if(e%fa===da){const t=(e+ca)/fa;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}if(e%pa===ha){const t=(e-ha)/pa;return function(e,r){const n=e.mul(r,ua),i=e.pow(n,t),o=e.mul(r,i),s=e.mul(e.mul(o,ua),i),a=e.mul(o,e.sub(s,e.ONE));if(!e.eql(e.sqr(a),r))throw new Error("Cannot find square root");return a}}return function(e){const t=(e-ca)/ua;let r,n,i;for(r=e-ca,n=0;r%ua===la;r/=ua,n++);for(i=ua;i<e&&ba(i,t,e)!==e-ca;i++);if(1===n){const t=(e+ca)/fa;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}const o=(r+ca)/ua;return function(e,s){if(e.pow(s,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let a=n,l=e.pow(e.mul(e.ONE,i),r),c=e.pow(s,o),u=e.pow(s,r);for(;!e.eql(u,e.ONE);){if(e.eql(u,e.ZERO))return e.ZERO;let t=1;for(let n=e.sqr(u);t<a&&!e.eql(n,e.ONE);t++)n=e.sqr(n);const r=e.pow(l,ca<<BigInt(a-t-1));l=e.sqr(r),c=e.mul(c,r),u=e.mul(u,l),a=t}return c}}(e)}BigInt(9),BigInt(16);const _a=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function va(e,t){const r=void 0!==t?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function Ea(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Sa(e){const t=Ea(e);return t+Math.ceil(t/2)}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const Aa=BigInt(0),Ra=BigInt(1);function Ia(e){return sa(e.Fp,_a.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),sa(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...va(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const{bytesToNumberBE:Ta,hexToBytes:Oa}=aa,xa={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(e){const{Err:t}=xa;if(e.length<2||2!==e[0])throw new t("Invalid signature integer tag");const r=e[1],n=e.subarray(2,r+2);if(!r||n.length!==r)throw new t("Invalid signature integer: wrong length");if(128&n[0])throw new t("Invalid signature integer: negative");if(0===n[0]&&!(128&n[1]))throw new t("Invalid signature integer: unnecessary leading zero");return{d:Ta(n),l:e.subarray(r+2)}},toSig(e){const{Err:t}=xa,r="string"==typeof e?Oa(e):e;Bs(r);let n=r.length;if(n<2||48!=r[0])throw new t("Invalid signature tag");if(r[1]!==n-2)throw new t("Invalid signature: incorrect length");const{d:i,l:o}=xa._parseInt(r.subarray(2)),{d:s,l:a}=xa._parseInt(o);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s:s}},hexFromSig(e){const t=e=>8&Number.parseInt(e[0],16)?"00"+e:e,r=e=>{const t=e.toString(16);return 1&t.length?`0${t}`:t},n=t(r(e.s)),i=t(r(e.r)),o=n.length/2,s=i.length/2,a=r(o),l=r(s);return`30${r(s+o+4)}02${l}${i}02${a}${n}`}},Na=BigInt(0),Pa=BigInt(1);BigInt(2);const ka=BigInt(3);function La(e){const t=function(e){const t=Ia(e);sa(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:i}=t;if(r){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:r}=t,n=t.toBytes||((e,t,n)=>{const i=t.toAffine();return ea(Uint8Array.from([4]),r.toBytes(i.x),r.toBytes(i.y))}),i=t.fromBytes||(e=>{const t=e.subarray(1);return{x:r.fromBytes(t.subarray(0,r.BYTES)),y:r.fromBytes(t.subarray(r.BYTES,2*r.BYTES))}});function o(e){const{a:n,b:i}=t,o=r.sqr(e),s=r.mul(o,e);return r.add(r.add(s,r.mul(e,n)),i)}if(!r.eql(r.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function s(e){return"bigint"==typeof e&&Na<e&&e<t.n}function a(e){if(!s(e))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(e){const{allowedPrivateKeyLengths:r,nByteLength:n,wrapPrivateKey:i,n:o}=t;if(r&&"bigint"!=typeof e){if(Cs(e)&&(e=Ds(e)),"string"!=typeof e||!r.includes(e.length))throw new Error("Invalid key");e=e.padStart(2*n,"0")}let s;try{s="bigint"==typeof e?e:Js(Qs("private key",e,n))}catch(l){throw new Error(`private key must be ${n} bytes, hex or bigint, not ${typeof e}`)}return i&&(s=ga(s,o)),a(s),s}const c=new Map;function u(e){if(!(e instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(e,t,n){if(this.px=e,this.py=t,this.pz=n,null==e||!r.isValid(e))throw new Error("x required");if(null==t||!r.isValid(t))throw new Error("y required");if(null==n||!r.isValid(n))throw new Error("z required")}static fromAffine(e){const{x:t,y:n}=e||{};if(!e||!r.isValid(t)||!r.isValid(n))throw new Error("invalid affine point");if(e instanceof d)throw new Error("projective point not allowed");const i=e=>r.eql(e,r.ZERO);return i(t)&&i(n)?d.ZERO:new d(t,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=r.invertBatch(e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(d.fromAffine)}static fromHex(e){const t=d.fromAffine(i(Qs("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return d.BASE.multiply(l(e))}_setWindowSize(e){this._WINDOW_SIZE=e,c.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:e,y:n}=this.toAffine();if(!r.isValid(e)||!r.isValid(n))throw new Error("bad point: x or y not FE");const i=r.sqr(n),s=o(e);if(!r.eql(i,s))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){u(e);const{px:t,py:n,pz:i}=this,{px:o,py:s,pz:a}=e,l=r.eql(r.mul(t,a),r.mul(o,i)),c=r.eql(r.mul(n,a),r.mul(s,i));return l&&c}negate(){return new d(this.px,r.neg(this.py),this.pz)}double(){const{a:e,b:n}=t,i=r.mul(n,ka),{px:o,py:s,pz:a}=this;let l=r.ZERO,c=r.ZERO,u=r.ZERO,f=r.mul(o,o),h=r.mul(s,s),p=r.mul(a,a),g=r.mul(o,s);return g=r.add(g,g),u=r.mul(o,a),u=r.add(u,u),l=r.mul(e,u),c=r.mul(i,p),c=r.add(l,c),l=r.sub(h,c),c=r.add(h,c),c=r.mul(l,c),l=r.mul(g,l),u=r.mul(i,u),p=r.mul(e,p),g=r.sub(f,p),g=r.mul(e,g),g=r.add(g,u),u=r.add(f,f),f=r.add(u,f),f=r.add(f,p),f=r.mul(f,g),c=r.add(c,f),p=r.mul(s,a),p=r.add(p,p),f=r.mul(p,g),l=r.sub(l,f),u=r.mul(p,h),u=r.add(u,u),u=r.add(u,u),new d(l,c,u)}add(e){u(e);const{px:n,py:i,pz:o}=this,{px:s,py:a,pz:l}=e;let c=r.ZERO,f=r.ZERO,h=r.ZERO;const p=t.a,g=r.mul(t.b,ka);let b=r.mul(n,s),y=r.mul(i,a),m=r.mul(o,l),w=r.add(n,i),_=r.add(s,a);w=r.mul(w,_),_=r.add(b,y),w=r.sub(w,_),_=r.add(n,o);let v=r.add(s,l);return _=r.mul(_,v),v=r.add(b,m),_=r.sub(_,v),v=r.add(i,o),c=r.add(a,l),v=r.mul(v,c),c=r.add(y,m),v=r.sub(v,c),h=r.mul(p,_),c=r.mul(g,m),h=r.add(c,h),c=r.sub(y,h),h=r.add(y,h),f=r.mul(c,h),y=r.add(b,b),y=r.add(y,b),m=r.mul(p,m),_=r.mul(g,_),y=r.add(y,m),m=r.sub(b,m),m=r.mul(p,m),_=r.add(_,m),b=r.mul(y,_),f=r.add(f,b),b=r.mul(v,_),c=r.mul(w,c),c=r.sub(c,b),b=r.mul(w,y),h=r.mul(v,h),h=r.add(h,b),new d(c,f,h)}subtract(e){return this.add(e.negate())}is0(){return this.equals(d.ZERO)}wNAF(e){return h.wNAFCached(this,c,e,e=>{const t=r.invertBatch(e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(d.fromAffine)})}multiplyUnsafe(e){const n=d.ZERO;if(e===Na)return n;if(a(e),e===Pa)return this;const{endo:i}=t;if(!i)return h.unsafeLadder(this,e);let{k1neg:o,k1:s,k2neg:l,k2:c}=i.splitScalar(e),u=n,f=n,p=this;for(;s>Na||c>Na;)s&Pa&&(u=u.add(p)),c&Pa&&(f=f.add(p)),p=p.double(),s>>=Pa,c>>=Pa;return o&&(u=u.negate()),l&&(f=f.negate()),f=new d(r.mul(f.px,i.beta),f.py,f.pz),u.add(f)}multiply(e){a(e);let n,i,o=e;const{endo:s}=t;if(s){const{k1neg:e,k1:t,k2neg:a,k2:l}=s.splitScalar(o);let{p:c,f:u}=this.wNAF(t),{p:f,f:p}=this.wNAF(l);c=h.constTimeNegate(e,c),f=h.constTimeNegate(a,f),f=new d(r.mul(f.px,s.beta),f.py,f.pz),n=c.add(f),i=u.add(p)}else{const{p:e,f:t}=this.wNAF(o);n=e,i=t}return d.normalizeZ([n,i])[0]}multiplyAndAddUnsafe(e,t,r){const n=d.BASE,i=(e,t)=>t!==Na&&t!==Pa&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),o=i(this,t).add(i(e,r));return o.is0()?void 0:o}toAffine(e){const{px:t,py:n,pz:i}=this,o=this.is0();null==e&&(e=o?r.ONE:r.inv(i));const s=r.mul(t,e),a=r.mul(n,e),l=r.mul(i,e);if(o)return{x:r.ZERO,y:r.ZERO};if(!r.eql(l,r.ONE))throw new Error("invZ was invalid");return{x:s,y:a}}isTorsionFree(){const{h:e,isTorsionFree:r}=t;if(e===Pa)return!0;if(r)return r(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:r}=t;return e===Pa?this:r?r(d,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return this.assertValidity(),n(d,this,e)}toHex(e=!0){return Ds(this.toRawBytes(e))}}d.BASE=new d(t.Gx,t.Gy,r.ONE),d.ZERO=new d(r.ZERO,r.ONE,r.ZERO);const f=t.nBitLength,h=function(e,t){const r=(e,t)=>{const r=t.negate();return e?r:t},n=e=>({windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:r,unsafeLadder(t,r){let n=e.ZERO,i=t;for(;r>Aa;)r&Ra&&(n=n.add(i)),i=i.double(),r>>=Ra;return n},precomputeWindow(e,t){const{windows:r,windowSize:i}=n(t),o=[];let s=e,a=s;for(let n=0;n<r;n++){a=s,o.push(a);for(let e=1;e<i;e++)a=a.add(s),o.push(a);s=a.double()}return o},wNAF(t,i,o){const{windows:s,windowSize:a}=n(t);let l=e.ZERO,c=e.BASE;const u=BigInt(2**t-1),d=2**t,f=BigInt(t);for(let e=0;e<s;e++){const t=e*a;let n=Number(o&u);o>>=f,n>a&&(n-=d,o+=Ra);const s=t,h=t+Math.abs(n)-1,p=e%2!=0,g=n<0;0===n?c=c.add(r(p,i[s])):l=l.add(r(g,i[h]))}return{p:l,f:c}},wNAFCached(e,t,r,n){const i=e._WINDOW_SIZE||1;let o=t.get(e);return o||(o=this.precomputeWindow(e,i),1!==i&&t.set(e,n(o))),this.wNAF(i,o,r)}}}(d,t.endo?Math.ceil(f/2):f);return{CURVE:t,ProjectivePoint:d,normPrivateKeyToScalar:l,weierstrassEquation:o,isWithinCurveOrder:s}}function ja(e){const t=function(e){const t=Ia(e);return sa(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:r,n:n}=t,i=r.BYTES+1,o=2*r.BYTES+1;function s(e){return ga(e,n)}function a(e){return ma(e,n)}const{ProjectivePoint:l,normPrivateKeyToScalar:c,weierstrassEquation:u,isWithinCurveOrder:d}=La({...t,toBytes(e,t,n){const i=t.toAffine(),o=r.toBytes(i.x),s=ea;return n?s(Uint8Array.from([t.hasEvenY()?2:3]),o):s(Uint8Array.from([4]),o,r.toBytes(i.y))},fromBytes(e){const t=e.length,n=e[0],s=e.subarray(1);if(t!==i||2!==n&&3!==n){if(t===o&&4===n){return{x:r.fromBytes(s.subarray(0,r.BYTES)),y:r.fromBytes(s.subarray(r.BYTES,2*r.BYTES))}}throw new Error(`Point of length ${t} was invalid. Expected ${i} compressed bytes or ${o} uncompressed bytes`)}{const e=Js(s);if(!(Na<(a=e)&&a<r.ORDER))throw new Error("Point is not on curve");const t=u(e);let i;try{i=r.sqrt(t)}catch(l){const e=l instanceof Error?": "+l.message:"";throw new Error("Point is not on curve"+e)}return!(1&~n)!==((i&Pa)===Pa)&&(i=r.neg(i)),{x:e,y:i}}var a}}),f=e=>Ds(Zs(e,t.nByteLength));function h(e){return e>n>>Pa}const p=(e,t,r)=>Js(e.slice(t,r));class g{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){const r=t.nByteLength;return e=Qs("compactSignature",e,2*r),new g(p(e,0,r),p(e,r,2*r))}static fromDER(e){const{r:t,s:r}=xa.toSig(Qs("DER",e));return new g(t,r)}assertValidity(){if(!d(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!d(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new g(this.r,this.s,e)}recoverPublicKey(e){const{r:n,s:i,recovery:o}=this,c=w(Qs("msgHash",e));if(null==o||![0,1,2,3].includes(o))throw new Error("recovery id invalid");const u=2===o||3===o?n+t.n:n;if(u>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const d=1&o?"03":"02",h=l.fromHex(d+f(u)),p=a(u),g=s(-c*p),b=s(i*p),y=l.BASE.multiplyAndAddUnsafe(h,g,b);if(!y)throw new Error("point at infinify");return y.assertValidity(),y}hasHighS(){return h(this.s)}normalizeS(){return this.hasHighS()?new g(this.r,s(-this.s),this.recovery):this}toDERRawBytes(){return Ks(this.toDERHex())}toDERHex(){return xa.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Ks(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const b={isValidPrivateKey(e){try{return c(e),!0}catch(t){return!1}},normPrivateKeyToScalar:c,randomPrivateKey:()=>{const e=Sa(t.n);return function(e,t,r=!1){const n=e.length,i=Ea(t),o=Sa(t);if(n<16||n<o||n>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${n}`);const s=ga(r?Js(e):Ys(e),t-ca)+ca;return r?Xs(s,i):Zs(s,i)}(t.randomBytes(e),t.n)},precompute:(e=8,t=l.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function y(e){const t=Cs(e),r="string"==typeof e,n=(t||r)&&e.length;return t?n===i||n===o:r?n===2*i||n===2*o:e instanceof l}const m=t.bits2int||function(e){const r=Js(e),n=8*e.length-t.nBitLength;return n>0?r>>BigInt(n):r},w=t.bits2int_modN||function(e){return s(m(e))},_=ta(t.nBitLength);function v(e){if("bigint"!=typeof e)throw new Error("bigint expected");if(!(Na<=e&&e<_))throw new Error(`bigint expected < 2^${t.nBitLength}`);return Zs(e,t.nByteLength)}function E(e,n,i=S){if(["recovered","canonical"].some(e=>e in i))throw new Error("sign() legacy options not supported");const{hash:o,randomBytes:u}=t;let{lowS:f,prehash:p,extraEntropy:b}=i;null==f&&(f=!0),e=Qs("msgHash",e),p&&(e=Qs("prehashed msgHash",o(e)));const y=w(e),_=c(n),E=[v(_),v(y)];if(null!=b&&!1!==b){const e=!0===b?u(r.BYTES):b;E.push(Qs("extraEntropy",e))}const A=ea(...E),R=y;return{seed:A,k2sig:function(e){const t=m(e);if(!d(t))return;const r=a(t),n=l.BASE.multiply(t).toAffine(),i=s(n.x);if(i===Na)return;const o=s(r*s(R+i*_));if(o===Na)return;let c=(n.x===i?0:2)|Number(n.y&Pa),u=o;return f&&h(o)&&(u=function(e){return h(e)?s(-e):e}(o),c^=1),new g(i,u,c)}}}const S={lowS:t.lowS,prehash:!1},A={lowS:t.lowS,prehash:!1};return l.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return l.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,r=!0){if(y(e))throw new Error("first arg must be private key");if(!y(t))throw new Error("second arg must be public key");return l.fromHex(t).multiply(c(e)).toRawBytes(r)},sign:function(e,r,n=S){const{seed:i,k2sig:o}=E(e,r,n),s=t;return ia(s.hash.outputLen,s.nByteLength,s.hmac)(i,o)},verify:function(e,r,n,i=A){const o=e;if(r=Qs("msgHash",r),n=Qs("publicKey",n),"strict"in i)throw new Error("options.strict was renamed to lowS");const{lowS:c,prehash:u}=i;let d,f;try{if("string"==typeof o||Cs(o))try{d=g.fromDER(o)}catch(E){if(!(E instanceof xa.Err))throw E;d=g.fromCompact(o)}else{if("object"!=typeof o||"bigint"!=typeof o.r||"bigint"!=typeof o.s)throw new Error("PARSE");{const{r:e,s:t}=o;d=new g(e,t)}}f=l.fromHex(n)}catch(S){if("PARSE"===S.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(c&&d.hasHighS())return!1;u&&(r=t.hash(r));const{r:h,s:p}=d,b=w(r),y=a(p),m=s(b*y),_=s(h*y),v=l.BASE.multiplyAndAddUnsafe(f,m,_)?.toAffine();return!!v&&s(v.x)===h},ProjectivePoint:l,Signature:g,utils:b}}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ca(e){return{hash:e,hmac:(t,...r)=>Ps(e,t,function(...e){let t=0;for(let n=0;n<e.length;n++){const r=e[n];hs(r),t+=r.length}const r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){const t=e[n];r.set(t,i),i+=t.length}return r}(...r)),randomBytes:vs}}BigInt(4);
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const Ba=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Ma=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Da=BigInt(1),Ua=BigInt(2),Fa=(e,t)=>(e+t/Ua)/t;const Wa=function(e,t,r=!1,n={}){if(e<=la)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:i,nByteLength:o}=va(e,t);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");const s=wa(e),a=Object.freeze({ORDER:e,BITS:i,BYTES:o,MASK:ta(i),ZERO:la,ONE:ca,create:t=>ga(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("Invalid field element: expected bigint, got "+typeof t);return la<=t&&t<e},is0:e=>e===la,isOdd:e=>(e&ca)===ca,neg:t=>ga(-t,e),eql:(e,t)=>e===t,sqr:t=>ga(t*t,e),add:(t,r)=>ga(t+r,e),sub:(t,r)=>ga(t-r,e),mul:(t,r)=>ga(t*r,e),pow:(e,t)=>function(e,t,r){if(r<la)throw new Error("Expected power > 0");if(r===la)return e.ONE;if(r===ca)return t;let n=e.ONE,i=t;for(;r>la;)r&ca&&(n=e.mul(n,i)),i=e.sqr(i),r>>=ca;return n}(a,e,t),div:(t,r)=>ga(t*ma(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>ma(t,e),sqrt:n.sqrt||(e=>s(a,e)),invertBatch:e=>function(e,t){const r=new Array(t.length),n=t.reduce((t,n,i)=>e.is0(n)?t:(r[i]=t,e.mul(t,n)),e.ONE),i=e.inv(n);return t.reduceRight((t,n,i)=>e.is0(n)?t:(r[i]=e.mul(t,r[i]),e.mul(t,n)),i),r}(a,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?Xs(e,o):Zs(e,o),fromBytes:e=>{if(e.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${e.length}`);return r?Ys(e):Js(e)}});return Object.freeze(a)}(Ba,void 0,void 0,{sqrt:function(e){const t=Ba,r=BigInt(3),n=BigInt(6),i=BigInt(11),o=BigInt(22),s=BigInt(23),a=BigInt(44),l=BigInt(88),c=e*e*e%t,u=c*c*e%t,d=ya(u,r,t)*u%t,f=ya(d,r,t)*u%t,h=ya(f,Ua,t)*c%t,p=ya(h,i,t)*h%t,g=ya(p,o,t)*p%t,b=ya(g,a,t)*g%t,y=ya(b,l,t)*b%t,m=ya(y,a,t)*g%t,w=ya(m,r,t)*u%t,_=ya(w,s,t)*p%t,v=ya(_,n,t)*c%t,E=ya(v,Ua,t);if(!Wa.eql(Wa.sqr(E),e))throw new Error("Cannot find square root");return E}}),qa=function(e,t){const r=t=>ja({...e,...Ca(t)});return Object.freeze({...r(t),create:r})}({a:BigInt(0),b:BigInt(7),Fp:Wa,n:Ma,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=Ma,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Da*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,s=BigInt("0x100000000000000000000000000000000"),a=Fa(o*e,t),l=Fa(-n*e,t);let c=ga(e-a*r-l*i,t),u=ga(-a*n-l*o,t);const d=c>s,f=u>s;if(d&&(c=t-c),f&&(u=t-u),c>s||u>s)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:d,k1:c,k2neg:f,k2:u}}}},xs);BigInt(0),qa.ProjectivePoint,BigInt(0);const $a={},Ha={};for(let Uc=0;Uc<16;Uc++){const e=Uc,t=16*Uc,r=Uc.toString(16).toLowerCase();Ha[r]=e,Ha[r.toUpperCase()]=e,$a[r]=t,$a[r.toUpperCase()]=t}Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));for(let Uc=0;Uc<=65535;Uc++)BigInt(Uc);const za=e=>{if("string"!=typeof e)throw new Error(`hex argument type ${typeof e} must be of type string`);if(!/^0x[0-9a-fA-F]*$/.test(e))throw new Error(`Input must be a 0x-prefixed hexadecimal string, got ${e}`);const t=e.slice(2);return function(e){const t=e.length,r=new Uint8Array(t/2);for(let n=0;n<t;n+=2)r[n/2]=$a[e[n]]+Ha[e[n+1]];return r}(t.length%2==0?t:function(e){let t=e;if("string"!=typeof t)throw new Error("[padToEven] value must be type 'string', received "+typeof t);return t.length%2&&(t=`0${t}`),t}(t))},Va=e=>{const t=(e=>{if(!Number.isSafeInteger(e)||e<0)throw new Error(`Received an invalid integer type: ${e}`);return`0x${e.toString(16)}`})(e);return za(t)};BigInt("0xffffffffffffffff"),BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935"),qa.CURVE.n,qa.CURVE.n,BigInt(2),BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");za("0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470");za("0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347");var Ga,Ka,Ja,Ya,Za,Xa,Qa,el,tl,rl;za("0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421"),Uint8Array.from([128]),BigInt(-1),BigInt(0),BigInt(1),BigInt(2),BigInt(3),BigInt(7),BigInt(8),BigInt(27),BigInt(28),BigInt(31),BigInt(32),BigInt(64),BigInt(128),BigInt(255),BigInt(256),BigInt(96),BigInt(100),BigInt(160),BigInt(224),BigInt(7922816251426434e13),BigInt(1461501637330903e33),BigInt(2695994666715064e52),BigInt(1e9),Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0")),(Ka=Ga||(Ga={})).String="string",Ka.Bytes="view",Ka.Number="number",(Ya=Ja||(Ja={})).String="string",Ya.Bytes="view",Ya.JSON="json",(Xa=Za||(Za={}))[Xa.Number=0]="Number",Xa[Xa.BigInt=1]="BigInt",Xa[Xa.Uint8Array=2]="Uint8Array",Xa[Xa.PrefixedHexString=3]="PrefixedHexString",(el=Qa||(Qa={}))[el.Deposit=0]="Deposit",el[el.Withdrawal=1]="Withdrawal",el[el.Consolidation=2]="Consolidation",(rl=tl||(tl={}))[rl.Version=0]="Version",rl[rl.Balance=1]="Balance",rl[rl.Nonce=2]="Nonce",rl[rl.CodeHash=3]="CodeHash",rl[rl.CodeSize=4]="CodeSize",Va(tl.Version),Va(tl.Balance),Va(tl.Nonce),Va(tl.CodeHash),Va(tl.CodeSize),BigInt(256),BigInt(31);var nl={},il={};Object.defineProperty(il,"__esModule",{value:!0}),il.default=function(e){var t=e.length,r=t%4;if(!r)return e;var n=t,i=4-r,o=t+i,s=Buffer.alloc(o);for(s.write(e);i--;)s.write("=",n++);return s.toString()},Object.defineProperty(nl,"__esModule",{value:!0});var ol=il;function sl(e,t){return void 0===t&&(t="utf8"),Buffer.isBuffer(e)?ll(e.toString("base64")):ll(Buffer.from(e,t).toString("base64"))}function al(e){return e=e.toString(),ol.default(e).replace(/\-/g,"+").replace(/_/g,"/")}function ll(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}var cl=sl;cl.encode=sl,cl.decode=function(e,t){return void 0===t&&(t="utf8"),Buffer.from(al(e),"base64").toString(t)},cl.toBase64=al,cl.fromBase64=ll,cl.toBuffer=function(e){return Buffer.from(al(e),"base64")},nl.default=cl,function(e){e.exports=nl.default,e.exports.default=e.exports}({exports:{}});const ul={MAINNET:"mainnet",TESTNET:"testnet",CYAN:"cyan",AQUA:"aqua",CELESTE:"celeste"},dl={SAPPHIRE_DEVNET:"sapphire_devnet",SAPPHIRE_MAINNET:"sapphire_mainnet"};function fl(e){let t,r=!1,n=0;try{t=window[e],r=!0,n=t.length;const i="__storage_test__";return t.setItem(i,i),t.removeItem(i),!0}catch(i){const e=i;return e&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&r&&0!==n}}class hl{constructor(){E(this,"store",new Map)}getItem(e){return this.store.get(e)||null}setItem(e,t){this.store.set(e,t)}removeItem(e){this.store.delete(e)}}E(class{constructor(e,t){E(this,"storage",void 0),E(this,"_storeKey",void 0),this.storage=t,this._storeKey=e;try{t.getItem(e)||this.resetStore()}catch(r){}}static getInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"local";if(!this.instanceMap.has(e)){let r;r="local"===t&&fl("localStorage")?window.localStorage:"session"===t&&fl("sessionStorage")?window.sessionStorage:new hl,this.instanceMap.set(e,new this(e,r))}return this.instanceMap.get(e)}toJSON(){return this.storage.getItem(this._storeKey)}resetStore(){const e=this.getStore();return this.storage.removeItem(this._storeKey),e}getStore(){return JSON.parse(this.storage.getItem(this._storeKey)||"{}")}get(e){return JSON.parse(this.storage.getItem(this._storeKey)||"{}")[e]}set(e,t){const r=JSON.parse(this.storage.getItem(this._storeKey)||"{}");r[e]=t,this.storage.setItem(this._storeKey,JSON.stringify(r))}},"instanceMap",new Map),A(A({},dl),ul);var pl=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,gl=Math.ceil,bl=Math.floor,yl="[BigNumber Error] ",ml=yl+"Number primitive has more than 15 significant digits: ",wl=1e14,_l=14,vl=9007199254740991,El=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Sl=1e7,Al=1e9;function Rl(e){var t=0|e;return e>0||e===t?t:t-1}function Il(e){for(var t,r,n=1,i=e.length,o=e[0]+"";n<i;){for(t=e[n++]+"",r=_l-t.length;r--;t="0"+t);o+=t}for(i=o.length;48===o.charCodeAt(--i););return o.slice(0,i+1||1)}function Tl(e,t){var r,n,i=e.c,o=t.c,s=e.s,a=t.s,l=e.e,c=t.e;if(!s||!a)return null;if(r=i&&!i[0],n=o&&!o[0],r||n)return r?n?0:-a:s;if(s!=a)return s;if(r=s<0,n=l==c,!i||!o)return n?0:!i^r?1:-1;if(!n)return l>c^r?1:-1;for(a=(l=i.length)<(c=o.length)?l:c,s=0;s<a;s++)if(i[s]!=o[s])return i[s]>o[s]^r?1:-1;return l==c?0:l>c^r?1:-1}function Ol(e,t,r,n){if(e<t||e>r||e!==bl(e))throw Error(yl+(n||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function xl(e){var t=e.c.length-1;return Rl(e.e/_l)==t&&e.c[t]%2!=0}function Nl(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function Pl(e,t,r){var n,i;if(t<0){for(i=r+".";++t;i+=r);e=i+e}else if(++t>(n=e.length)){for(i=r,t-=n;--t;i+=r);e+=i}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}!function e(t){var r,n,i,o,s,a=v.prototype={constructor:v,toString:null,valueOf:null},l=new v(1),c=20,u=4,d=-7,f=21,h=-1e7,p=1e7,g=!1,b=1,y=0,m={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},w="0123456789abcdefghijklmnopqrstuvwxyz",_=!0;function v(e,t){var r,o,s,a,l,d,f,g,b=this;if(!(b instanceof v))return new v(e,t);if(null==t){if(e&&!0===e._isBigNumber)return b.s=e.s,void(!e.c||e.e>p?b.c=b.e=null:e.e<h?b.c=[b.e=0]:(b.e=e.e,b.c=e.c.slice()));if((d="number"==typeof e)&&0*e==0){if(b.s=1/e<0?(e=-e,-1):1,e===~~e){for(a=0,l=e;l>=10;l/=10,a++);return void(a>p?b.c=b.e=null:(b.e=a,b.c=[e]))}g=String(e)}else{if(!pl.test(g=String(e)))return i(b,g,d);b.s=45==g.charCodeAt(0)?(g=g.slice(1),-1):1}(a=g.indexOf("."))>-1&&(g=g.replace(".","")),(l=g.search(/e/i))>0?(a<0&&(a=l),a+=+g.slice(l+1),g=g.substring(0,l)):a<0&&(a=g.length)}else{if(Ol(t,2,w.length,"Base"),10==t&&_)return R(b=new v(e),c+b.e+1,u);if(g=String(e),d="number"==typeof e){if(0*e!=0)return i(b,g,d,t);if(b.s=1/e<0?(g=g.slice(1),-1):1,v.DEBUG&&g.replace(/^0\.0*|\./,"").length>15)throw Error(ml+e)}else b.s=45===g.charCodeAt(0)?(g=g.slice(1),-1):1;for(r=w.slice(0,t),a=l=0,f=g.length;l<f;l++)if(r.indexOf(o=g.charAt(l))<0){if("."==o){if(l>a){a=f;continue}}else if(!s&&(g==g.toUpperCase()&&(g=g.toLowerCase())||g==g.toLowerCase()&&(g=g.toUpperCase()))){s=!0,l=-1,a=0;continue}return i(b,String(e),d,t)}d=!1,(a=(g=n(g,t,10,b.s)).indexOf("."))>-1?g=g.replace(".",""):a=g.length}for(l=0;48===g.charCodeAt(l);l++);for(f=g.length;48===g.charCodeAt(--f););if(g=g.slice(l,++f)){if(f-=l,d&&v.DEBUG&&f>15&&(e>vl||e!==bl(e)))throw Error(ml+b.s*e);if((a=a-l-1)>p)b.c=b.e=null;else if(a<h)b.c=[b.e=0];else{if(b.e=a,b.c=[],l=(a+1)%_l,a<0&&(l+=_l),l<f){for(l&&b.c.push(+g.slice(0,l)),f-=_l;l<f;)b.c.push(+g.slice(l,l+=_l));l=_l-(g=g.slice(l)).length}else l-=f;for(;l--;g+="0");b.c.push(+g)}}else b.c=[b.e=0]}function E(e,t,r,n){var i,o,s,a,l;if(null==r?r=u:Ol(r,0,8),!e.c)return e.toString();if(i=e.c[0],s=e.e,null==t)l=Il(e.c),l=1==n||2==n&&(s<=d||s>=f)?Nl(l,s):Pl(l,s,"0");else if(o=(e=R(new v(e),t,r)).e,a=(l=Il(e.c)).length,1==n||2==n&&(t<=o||o<=d)){for(;a<t;l+="0",a++);l=Nl(l,o)}else if(t-=s+(2===n&&o>s),l=Pl(l,o,"0"),o+1>a){if(--t>0)for(l+=".";t--;l+="0");}else if((t+=o-a)>0)for(o+1==a&&(l+=".");t--;l+="0");return e.s<0&&i?"-"+l:l}function S(e,t){for(var r,n,i=1,o=new v(e[0]);i<e.length;i++)(!(n=new v(e[i])).s||(r=Tl(o,n))===t||0===r&&o.s===t)&&(o=n);return o}function A(e,t,r){for(var n=1,i=t.length;!t[--i];t.pop());for(i=t[0];i>=10;i/=10,n++);return(r=n+r*_l-1)>p?e.c=e.e=null:r<h?e.c=[e.e=0]:(e.e=r,e.c=t),e}function R(e,t,r,n){var i,o,s,a,l,c,u,d=e.c,f=El;if(d){e:{for(i=1,a=d[0];a>=10;a/=10,i++);if((o=t-i)<0)o+=_l,s=t,l=d[c=0],u=bl(l/f[i-s-1]%10);else if((c=gl((o+1)/_l))>=d.length){if(!n)break e;for(;d.length<=c;d.push(0));l=u=0,i=1,s=(o%=_l)-_l+1}else{for(l=a=d[c],i=1;a>=10;a/=10,i++);u=(s=(o%=_l)-_l+i)<0?0:bl(l/f[i-s-1]%10)}if(n=n||t<0||null!=d[c+1]||(s<0?l:l%f[i-s-1]),n=r<4?(u||n)&&(0==r||r==(e.s<0?3:2)):u>5||5==u&&(4==r||n||6==r&&(o>0?s>0?l/f[i-s]:0:d[c-1])%10&1||r==(e.s<0?8:7)),t<1||!d[0])return d.length=0,n?(t-=e.e+1,d[0]=f[(_l-t%_l)%_l],e.e=-t||0):d[0]=e.e=0,e;if(0==o?(d.length=c,a=1,c--):(d.length=c+1,a=f[_l-o],d[c]=s>0?bl(l/f[i-s]%f[s])*a:0),n)for(;;){if(0==c){for(o=1,s=d[0];s>=10;s/=10,o++);for(s=d[0]+=a,a=1;s>=10;s/=10,a++);o!=a&&(e.e++,d[0]==wl&&(d[0]=1));break}if(d[c]+=a,d[c]!=wl)break;d[c--]=0,a=1}for(o=d.length;0===d[--o];d.pop());}e.e>p?e.c=e.e=null:e.e<h&&(e.c=[e.e=0])}return e}function I(e){var t,r=e.e;return null===r?e.toString():(t=Il(e.c),t=r<=d||r>=f?Nl(t,r):Pl(t,r,"0"),e.s<0?"-"+t:t)}return v.clone=e,v.ROUND_UP=0,v.ROUND_DOWN=1,v.ROUND_CEIL=2,v.ROUND_FLOOR=3,v.ROUND_HALF_UP=4,v.ROUND_HALF_DOWN=5,v.ROUND_HALF_EVEN=6,v.ROUND_HALF_CEIL=7,v.ROUND_HALF_FLOOR=8,v.EUCLID=9,v.config=v.set=function(e){var t,r;if(null!=e){if("object"!=typeof e)throw Error(yl+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(Ol(r=e[t],0,Al,t),c=r),e.hasOwnProperty(t="ROUNDING_MODE")&&(Ol(r=e[t],0,8,t),u=r),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((r=e[t])&&r.pop?(Ol(r[0],-Al,0,t),Ol(r[1],0,Al,t),d=r[0],f=r[1]):(Ol(r,-Al,Al,t),d=-(f=r<0?-r:r))),e.hasOwnProperty(t="RANGE"))if((r=e[t])&&r.pop)Ol(r[0],-Al,-1,t),Ol(r[1],1,Al,t),h=r[0],p=r[1];else{if(Ol(r,-Al,Al,t),!r)throw Error(yl+t+" cannot be zero: "+r);h=-(p=r<0?-r:r)}if(e.hasOwnProperty(t="CRYPTO")){if((r=e[t])!==!!r)throw Error(yl+t+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw g=!r,Error(yl+"crypto unavailable");g=r}else g=r}if(e.hasOwnProperty(t="MODULO_MODE")&&(Ol(r=e[t],0,9,t),b=r),e.hasOwnProperty(t="POW_PRECISION")&&(Ol(r=e[t],0,Al,t),y=r),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(r=e[t]))throw Error(yl+t+" not an object: "+r);m=r}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(r=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(r))throw Error(yl+t+" invalid: "+r);_="0123456789"==r.slice(0,10),w=r}}return{DECIMAL_PLACES:c,ROUNDING_MODE:u,EXPONENTIAL_AT:[d,f],RANGE:[h,p],CRYPTO:g,MODULO_MODE:b,POW_PRECISION:y,FORMAT:m,ALPHABET:w}},v.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!v.DEBUG)return!0;var t,r,n=e.c,i=e.e,o=e.s;e:if("[object Array]"=={}.toString.call(n)){if((1===o||-1===o)&&i>=-Al&&i<=Al&&i===bl(i)){if(0===n[0]){if(0===i&&1===n.length)return!0;break e}if((t=(i+1)%_l)<1&&(t+=_l),String(n[0]).length==t){for(t=0;t<n.length;t++)if((r=n[t])<0||r>=wl||r!==bl(r))break e;if(0!==r)return!0}}}else if(null===n&&null===i&&(null===o||1===o||-1===o))return!0;throw Error(yl+"Invalid BigNumber: "+e)},v.maximum=v.max=function(){return S(arguments,-1)},v.minimum=v.min=function(){return S(arguments,1)},v.random=(o=9007199254740992,s=Math.random()*o&2097151?function(){return bl(Math.random()*o)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,r,n,i,o,a=0,u=[],d=new v(l);if(null==e?e=c:Ol(e,0,Al),i=gl(e/_l),g)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(i*=2));a<i;)(o=131072*t[a]+(t[a+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),t[a]=r[0],t[a+1]=r[1]):(u.push(o%1e14),a+=2);a=i/2}else{if(!crypto.randomBytes)throw g=!1,Error(yl+"crypto unavailable");for(t=crypto.randomBytes(i*=7);a<i;)(o=281474976710656*(31&t[a])+1099511627776*t[a+1]+4294967296*t[a+2]+16777216*t[a+3]+(t[a+4]<<16)+(t[a+5]<<8)+t[a+6])>=9e15?crypto.randomBytes(7).copy(t,a):(u.push(o%1e14),a+=7);a=i/7}if(!g)for(;a<i;)(o=s())<9e15&&(u[a++]=o%1e14);for(i=u[--a],e%=_l,i&&e&&(o=El[_l-e],u[a]=bl(i/o)*o);0===u[a];u.pop(),a--);if(a<0)u=[n=0];else{for(n=-1;0===u[0];u.splice(0,1),n-=_l);for(a=1,o=u[0];o>=10;o/=10,a++);a<_l&&(n-=_l-a)}return d.e=n,d.c=u,d}),v.sum=function(){for(var e=1,t=arguments,r=new v(t[0]);e<t.length;)r=r.plus(t[e++]);return r},n=function(){var e="0123456789";function t(e,t,r,n){for(var i,o,s=[0],a=0,l=e.length;a<l;){for(o=s.length;o--;s[o]*=t);for(s[0]+=n.indexOf(e.charAt(a++)),i=0;i<s.length;i++)s[i]>r-1&&(null==s[i+1]&&(s[i+1]=0),s[i+1]+=s[i]/r|0,s[i]%=r)}return s.reverse()}return function(n,i,o,s,a){var l,d,f,h,p,g,b,m,_=n.indexOf("."),E=c,S=u;for(_>=0&&(h=y,y=0,n=n.replace(".",""),g=(m=new v(i)).pow(n.length-_),y=h,m.c=t(Pl(Il(g.c),g.e,"0"),10,o,e),m.e=m.c.length),f=h=(b=t(n,i,o,a?(l=w,e):(l=e,w))).length;0==b[--h];b.pop());if(!b[0])return l.charAt(0);if(_<0?--f:(g.c=b,g.e=f,g.s=s,b=(g=r(g,m,E,S,o)).c,p=g.r,f=g.e),_=b[d=f+E+1],h=o/2,p=p||d<0||null!=b[d+1],p=S<4?(null!=_||p)&&(0==S||S==(g.s<0?3:2)):_>h||_==h&&(4==S||p||6==S&&1&b[d-1]||S==(g.s<0?8:7)),d<1||!b[0])n=p?Pl(l.charAt(1),-E,l.charAt(0)):l.charAt(0);else{if(b.length=d,p)for(--o;++b[--d]>o;)b[d]=0,d||(++f,b=[1].concat(b));for(h=b.length;!b[--h];);for(_=0,n="";_<=h;n+=l.charAt(b[_++]));n=Pl(n,f,l.charAt(0))}return n}}(),r=function(){function e(e,t,r){var n,i,o,s,a=0,l=e.length,c=t%Sl,u=t/Sl|0;for(e=e.slice();l--;)a=((i=c*(o=e[l]%Sl)+(n=u*o+(s=e[l]/Sl|0)*c)%Sl*Sl+a)/r|0)+(n/Sl|0)+u*s,e[l]=i%r;return a&&(e=[a].concat(e)),e}function t(e,t,r,n){var i,o;if(r!=n)o=r>n?1:-1;else for(i=o=0;i<r;i++)if(e[i]!=t[i]){o=e[i]>t[i]?1:-1;break}return o}function r(e,t,r,n){for(var i=0;r--;)e[r]-=i,i=e[r]<t[r]?1:0,e[r]=i*n+e[r]-t[r];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(n,i,o,s,a){var l,c,u,d,f,h,p,g,b,y,m,w,_,E,S,A,I,T=n.s==i.s?1:-1,O=n.c,x=i.c;if(!(O&&O[0]&&x&&x[0]))return new v(n.s&&i.s&&(O?!x||O[0]!=x[0]:x)?O&&0==O[0]||!x?0*T:T/0:NaN);for(b=(g=new v(T)).c=[],T=o+(c=n.e-i.e)+1,a||(a=wl,c=Rl(n.e/_l)-Rl(i.e/_l),T=T/_l|0),u=0;x[u]==(O[u]||0);u++);if(x[u]>(O[u]||0)&&c--,T<0)b.push(1),d=!0;else{for(E=O.length,A=x.length,u=0,T+=2,(f=bl(a/(x[0]+1)))>1&&(x=e(x,f,a),O=e(O,f,a),A=x.length,E=O.length),_=A,m=(y=O.slice(0,A)).length;m<A;y[m++]=0);I=x.slice(),I=[0].concat(I),S=x[0],x[1]>=a/2&&S++;do{if(f=0,(l=t(x,y,A,m))<0){if(w=y[0],A!=m&&(w=w*a+(y[1]||0)),(f=bl(w/S))>1)for(f>=a&&(f=a-1),p=(h=e(x,f,a)).length,m=y.length;1==t(h,y,p,m);)f--,r(h,A<p?I:x,p,a),p=h.length,l=1;else 0==f&&(l=f=1),p=(h=x.slice()).length;if(p<m&&(h=[0].concat(h)),r(y,h,m,a),m=y.length,-1==l)for(;t(x,y,A,m)<1;)f++,r(y,A<m?I:x,m,a),m=y.length}else 0===l&&(f++,y=[0]);b[u++]=f,y[0]?y[m++]=O[_]||0:(y=[O[_]],m=1)}while((_++<E||null!=y[0])&&T--);d=null!=y[0],b[0]||b.splice(0,1)}if(a==wl){for(u=1,T=b[0];T>=10;T/=10,u++);R(g,o+(g.e=u+c*_l-1)+1,s,d)}else g.e=c,g.r=+d;return g}}(),i=function(){var e=/^(-?)0([xbo])(?=\w[\w.]*$)/i,t=/^([^.]+)\.$/,r=/^\.([^.]+)$/,n=/^-?(Infinity|NaN)$/,i=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(o,s,a,l){var c,u=a?s:s.replace(i,"");if(n.test(u))o.s=isNaN(u)?null:u<0?-1:1;else{if(!a&&(u=u.replace(e,function(e,t,r){return c="x"==(r=r.toLowerCase())?16:"b"==r?2:8,l&&l!=c?e:t}),l&&(c=l,u=u.replace(t,"$1").replace(r,"0.$1")),s!=u))return new v(u,c);if(v.DEBUG)throw Error(yl+"Not a"+(l?" base "+l:"")+" number: "+s);o.s=null}o.c=o.e=null}}(),a.absoluteValue=a.abs=function(){var e=new v(this);return e.s<0&&(e.s=1),e},a.comparedTo=function(e,t){return Tl(this,new v(e,t))},a.decimalPlaces=a.dp=function(e,t){var r,n,i,o=this;if(null!=e)return Ol(e,0,Al),null==t?t=u:Ol(t,0,8),R(new v(o),e+o.e+1,t);if(!(r=o.c))return null;if(n=((i=r.length-1)-Rl(this.e/_l))*_l,i=r[i])for(;i%10==0;i/=10,n--);return n<0&&(n=0),n},a.dividedBy=a.div=function(e,t){return r(this,new v(e,t),c,u)},a.dividedToIntegerBy=a.idiv=function(e,t){return r(this,new v(e,t),0,1)},a.exponentiatedBy=a.pow=function(e,t){var r,n,i,o,s,a,c,d,f=this;if((e=new v(e)).c&&!e.isInteger())throw Error(yl+"Exponent not an integer: "+I(e));if(null!=t&&(t=new v(t)),s=e.e>14,!f.c||!f.c[0]||1==f.c[0]&&!f.e&&1==f.c.length||!e.c||!e.c[0])return d=new v(Math.pow(+I(f),s?e.s*(2-xl(e)):+I(e))),t?d.mod(t):d;if(a=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new v(NaN);(n=!a&&f.isInteger()&&t.isInteger())&&(f=f.mod(t))}else{if(e.e>9&&(f.e>0||f.e<-1||(0==f.e?f.c[0]>1||s&&f.c[1]>=24e7:f.c[0]<8e13||s&&f.c[0]<=9999975e7)))return o=f.s<0&&xl(e)?-0:0,f.e>-1&&(o=1/o),new v(a?1/o:o);y&&(o=gl(y/_l+2))}for(s?(r=new v(.5),a&&(e.s=1),c=xl(e)):c=(i=Math.abs(+I(e)))%2,d=new v(l);;){if(c){if(!(d=d.times(f)).c)break;o?d.c.length>o&&(d.c.length=o):n&&(d=d.mod(t))}if(i){if(0===(i=bl(i/2)))break;c=i%2}else if(R(e=e.times(r),e.e+1,1),e.e>14)c=xl(e);else{if(0===(i=+I(e)))break;c=i%2}f=f.times(f),o?f.c&&f.c.length>o&&(f.c.length=o):n&&(f=f.mod(t))}return n?d:(a&&(d=l.div(d)),t?d.mod(t):o?R(d,y,u,undefined):d)},a.integerValue=function(e){var t=new v(this);return null==e?e=u:Ol(e,0,8),R(t,t.e+1,e)},a.isEqualTo=a.eq=function(e,t){return 0===Tl(this,new v(e,t))},a.isFinite=function(){return!!this.c},a.isGreaterThan=a.gt=function(e,t){return Tl(this,new v(e,t))>0},a.isGreaterThanOrEqualTo=a.gte=function(e,t){return 1===(t=Tl(this,new v(e,t)))||0===t},a.isInteger=function(){return!!this.c&&Rl(this.e/_l)>this.c.length-2},a.isLessThan=a.lt=function(e,t){return Tl(this,new v(e,t))<0},a.isLessThanOrEqualTo=a.lte=function(e,t){return-1===(t=Tl(this,new v(e,t)))||0===t},a.isNaN=function(){return!this.s},a.isNegative=function(){return this.s<0},a.isPositive=function(){return this.s>0},a.isZero=function(){return!!this.c&&0==this.c[0]},a.minus=function(e,t){var r,n,i,o,s=this,a=s.s;if(t=(e=new v(e,t)).s,!a||!t)return new v(NaN);if(a!=t)return e.s=-t,s.plus(e);var l=s.e/_l,c=e.e/_l,d=s.c,f=e.c;if(!l||!c){if(!d||!f)return d?(e.s=-t,e):new v(f?s:NaN);if(!d[0]||!f[0])return f[0]?(e.s=-t,e):new v(d[0]?s:3==u?-0:0)}if(l=Rl(l),c=Rl(c),d=d.slice(),a=l-c){for((o=a<0)?(a=-a,i=d):(c=l,i=f),i.reverse(),t=a;t--;i.push(0));i.reverse()}else for(n=(o=(a=d.length)<(t=f.length))?a:t,a=t=0;t<n;t++)if(d[t]!=f[t]){o=d[t]<f[t];break}if(o&&(i=d,d=f,f=i,e.s=-e.s),(t=(n=f.length)-(r=d.length))>0)for(;t--;d[r++]=0);for(t=wl-1;n>a;){if(d[--n]<f[n]){for(r=n;r&&!d[--r];d[r]=t);--d[r],d[n]+=wl}d[n]-=f[n]}for(;0==d[0];d.splice(0,1),--c);return d[0]?A(e,d,c):(e.s=3==u?-1:1,e.c=[e.e=0],e)},a.modulo=a.mod=function(e,t){var n,i,o=this;return e=new v(e,t),!o.c||!e.s||e.c&&!e.c[0]?new v(NaN):!e.c||o.c&&!o.c[0]?new v(o):(9==b?(i=e.s,e.s=1,n=r(o,e,0,3),e.s=i,n.s*=i):n=r(o,e,0,b),(e=o.minus(n.times(e))).c[0]||1!=b||(e.s=o.s),e)},a.multipliedBy=a.times=function(e,t){var r,n,i,o,s,a,l,c,u,d,f,h,p,g,b,y=this,m=y.c,w=(e=new v(e,t)).c;if(!(m&&w&&m[0]&&w[0]))return!y.s||!e.s||m&&!m[0]&&!w||w&&!w[0]&&!m?e.c=e.e=e.s=null:(e.s*=y.s,m&&w?(e.c=[0],e.e=0):e.c=e.e=null),e;for(n=Rl(y.e/_l)+Rl(e.e/_l),e.s*=y.s,(l=m.length)<(d=w.length)&&(p=m,m=w,w=p,i=l,l=d,d=i),i=l+d,p=[];i--;p.push(0));for(g=wl,b=Sl,i=d;--i>=0;){for(r=0,f=w[i]%b,h=w[i]/b|0,o=i+(s=l);o>i;)r=((c=f*(c=m[--s]%b)+(a=h*c+(u=m[s]/b|0)*f)%b*b+p[o]+r)/g|0)+(a/b|0)+h*u,p[o--]=c%g;p[o]=r}return r?++n:p.splice(0,1),A(e,p,n)},a.negated=function(){var e=new v(this);return e.s=-e.s||null,e},a.plus=function(e,t){var r,n=this,i=n.s;if(t=(e=new v(e,t)).s,!i||!t)return new v(NaN);if(i!=t)return e.s=-t,n.minus(e);var o=n.e/_l,s=e.e/_l,a=n.c,l=e.c;if(!o||!s){if(!a||!l)return new v(i/0);if(!a[0]||!l[0])return l[0]?e:new v(a[0]?n:0*i)}if(o=Rl(o),s=Rl(s),a=a.slice(),i=o-s){for(i>0?(s=o,r=l):(i=-i,r=a),r.reverse();i--;r.push(0));r.reverse()}for((i=a.length)-(t=l.length)<0&&(r=l,l=a,a=r,t=i),i=0;t;)i=(a[--t]=a[t]+l[t]+i)/wl|0,a[t]=wl===a[t]?0:a[t]%wl;return i&&(a=[i].concat(a),++s),A(e,a,s)},a.precision=a.sd=function(e,t){var r,n,i,o=this;if(null!=e&&e!==!!e)return Ol(e,1,Al),null==t?t=u:Ol(t,0,8),R(new v(o),e,t);if(!(r=o.c))return null;if(n=(i=r.length-1)*_l+1,i=r[i]){for(;i%10==0;i/=10,n--);for(i=r[0];i>=10;i/=10,n++);}return e&&o.e+1>n&&(n=o.e+1),n},a.shiftedBy=function(e){return Ol(e,-9007199254740991,vl),this.times("1e"+e)},a.squareRoot=a.sqrt=function(){var e,t,n,i,o,s=this,a=s.c,l=s.s,d=s.e,f=c+4,h=new v("0.5");if(1!==l||!a||!a[0])return new v(!l||l<0&&(!a||a[0])?NaN:a?s:1/0);if(0==(l=Math.sqrt(+I(s)))||l==1/0?(((t=Il(a)).length+d)%2==0&&(t+="0"),l=Math.sqrt(+t),d=Rl((d+1)/2)-(d<0||d%2),n=new v(t=l==1/0?"5e"+d:(t=l.toExponential()).slice(0,t.indexOf("e")+1)+d)):n=new v(l+""),n.c[0])for((l=(d=n.e)+f)<3&&(l=0);;)if(o=n,n=h.times(o.plus(r(s,o,f,1))),Il(o.c).slice(0,l)===(t=Il(n.c)).slice(0,l)){if(n.e<d&&--l,"9999"!=(t=t.slice(l-3,l+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(R(n,n.e+c+2,1),e=!n.times(n).eq(s));break}if(!i&&(R(o,o.e+c+2,0),o.times(o).eq(s))){n=o;break}f+=4,l+=4,i=1}return R(n,n.e+c+1,u,e)},a.toExponential=function(e,t){return null!=e&&(Ol(e,0,Al),e++),E(this,e,t,1)},a.toFixed=function(e,t){return null!=e&&(Ol(e,0,Al),e=e+this.e+1),E(this,e,t)},a.toFormat=function(e,t,r){var n,i=this;if(null==r)null!=e&&t&&"object"==typeof t?(r=t,t=null):e&&"object"==typeof e?(r=e,e=t=null):r=m;else if("object"!=typeof r)throw Error(yl+"Argument not an object: "+r);if(n=i.toFixed(e,t),i.c){var o,s=n.split("."),a=+r.groupSize,l=+r.secondaryGroupSize,c=r.groupSeparator||"",u=s[0],d=s[1],f=i.s<0,h=f?u.slice(1):u,p=h.length;if(l&&(o=a,a=l,l=o,p-=o),a>0&&p>0){for(o=p%a||a,u=h.substr(0,o);o<p;o+=a)u+=c+h.substr(o,a);l>0&&(u+=c+h.slice(o)),f&&(u="-"+u)}n=d?u+(r.decimalSeparator||"")+((l=+r.fractionGroupSize)?d.replace(new RegExp("\\d{"+l+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):d):u}return(r.prefix||"")+n+(r.suffix||"")},a.toFraction=function(e){var t,n,i,o,s,a,c,d,f,h,g,b,y=this,m=y.c;if(null!=e&&(!(c=new v(e)).isInteger()&&(c.c||1!==c.s)||c.lt(l)))throw Error(yl+"Argument "+(c.isInteger()?"out of range: ":"not an integer: ")+I(c));if(!m)return new v(y);for(t=new v(l),f=n=new v(l),i=d=new v(l),b=Il(m),s=t.e=b.length-y.e-1,t.c[0]=El[(a=s%_l)<0?_l+a:a],e=!e||c.comparedTo(t)>0?s>0?t:f:c,a=p,p=1/0,c=new v(b),d.c[0]=0;h=r(c,t,0,1),1!=(o=n.plus(h.times(i))).comparedTo(e);)n=i,i=o,f=d.plus(h.times(o=f)),d=o,t=c.minus(h.times(o=t)),c=o;return o=r(e.minus(n),i,0,1),d=d.plus(o.times(f)),n=n.plus(o.times(i)),d.s=f.s=y.s,g=r(f,i,s*=2,u).minus(y).abs().comparedTo(r(d,n,s,u).minus(y).abs())<1?[f,i]:[d,n],p=a,g},a.toNumber=function(){return+I(this)},a.toPrecision=function(e,t){return null!=e&&Ol(e,1,Al),E(this,e,t,2)},a.toString=function(e){var t,r=this,i=r.s,o=r.e;return null===o?i?(t="Infinity",i<0&&(t="-"+t)):t="NaN":(null==e?t=o<=d||o>=f?Nl(Il(r.c),o):Pl(Il(r.c),o,"0"):10===e&&_?t=Pl(Il((r=R(new v(r),c+o+1,u)).c),r.e,"0"):(Ol(e,2,w.length,"Base"),t=n(Pl(Il(r.c),o,"0"),10,e,i,!0)),i<0&&r.c[0]&&(t="-"+t)),t},a.valueOf=a.toJSON=function(){return I(this)},a._isBigNumber=!0,a[Symbol.toStringTag]="BigNumber",a[Symbol.for("nodejs.util.inspect.custom")]=a.valueOf,null!=t&&v.set(t),v}();class kl extends Error{}kl.prototype.name="InvalidTokenError";const Ll="iframe_status",jl="close_window",Cl="user_logged_in",Bl="user_logged_out",Ml="logout",Dl="wallet_instance_id",Ul="user_info",Fl="set_provider",Wl="topup",ql="iframe_status",$l="closed_window",Hl="get_provider_state",zl="wallet_get_provider_state",Vl="wallet_accounts_changed",Gl="wallet_chain_changed",Kl="wallet_unlock_state_changed";var Jl={},Yl={};Object.defineProperty(Yl,"__esModule",{value:!0}),Yl.EthereumProviderError=Yl.EthereumRpcError=void 0;const Zl=Xi;class Xl extends Error{constructor(e,t,r){if(!Number.isInteger(e))throw new Error('"code" must be an integer.');if(!t||"string"!=typeof t)throw new Error('"message" must be a nonempty string.');super(t),this.code=e,void 0!==r&&(this.data=r)}serialize(){const e={code:this.code,message:this.message};return void 0!==this.data&&(e.data=this.data),this.stack&&(e.stack=this.stack),e}toString(){return Zl.default(this.serialize(),Ql,2)}}Yl.EthereumRpcError=Xl;function Ql(e,t){if("[Circular]"!==t)return t}Yl.EthereumProviderError=class extends Xl{constructor(e,t,r){if(!function(e){return Number.isInteger(e)&&e>=1e3&&e<=4999}(e))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(e,t,r)}};var ec={},tc={};Object.defineProperty(tc,"__esModule",{value:!0}),tc.errorValues=tc.errorCodes=void 0,tc.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},tc.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.serializeError=e.isValidCode=e.getMessageFromCode=e.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const t=tc,r=Yl,n=t.errorCodes.rpc.internal,i={code:n,message:o(n)};function o(r,n="Unspecified error message. This is a bug, please report it."){if(Number.isInteger(r)){const n=r.toString();if(c(t.errorValues,n))return t.errorValues[n].message;if(a(r))return e.JSON_RPC_SERVER_ERROR_MESSAGE}return n}function s(e){if(!Number.isInteger(e))return!1;const r=e.toString();return!!t.errorValues[r]||!!a(e)}function a(e){return e>=-32099&&e<=-32e3}function l(e){return e&&"object"==typeof e&&!Array.isArray(e)?Object.assign({},e):e}function c(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.",e.getMessageFromCode=o,e.isValidCode=s,e.serializeError=function(e,{fallbackError:t=i,shouldIncludeStack:n=!1}={}){var a,u;if(!t||!Number.isInteger(t.code)||"string"!=typeof t.message)throw new Error("Must provide fallback error with integer number code and string message.");if(e instanceof r.EthereumRpcError)return e.serialize();const d={};if(e&&"object"==typeof e&&!Array.isArray(e)&&c(e,"code")&&s(e.code)){const t=e;d.code=t.code,t.message&&"string"==typeof t.message?(d.message=t.message,c(t,"data")&&(d.data=t.data)):(d.message=o(d.code),d.data={originalError:l(e)})}else{d.code=t.code;const r=null===(a=e)||void 0===a?void 0:a.message;d.message=r&&"string"==typeof r?r:t.message,d.data={originalError:l(e)}}const f=null===(u=e)||void 0===u?void 0:u.stack;return n&&e&&f&&"string"==typeof f&&(d.stack=f),d}}(ec);var rc={};Object.defineProperty(rc,"__esModule",{value:!0}),rc.ethErrors=void 0;const nc=Yl,ic=ec,oc=tc;function sc(e,t){const[r,n]=lc(t);return new nc.EthereumRpcError(e,r||ic.getMessageFromCode(e),n)}function ac(e,t){const[r,n]=lc(t);return new nc.EthereumProviderError(e,r||ic.getMessageFromCode(e),n)}function lc(e){if(e){if("string"==typeof e)return[e];if("object"==typeof e&&!Array.isArray(e)){const{message:t,data:r}=e;if(t&&"string"!=typeof t)throw new Error("Must specify string message.");return[t||void 0,r]}}return[]}rc.ethErrors={rpc:{parse:e=>sc(oc.errorCodes.rpc.parse,e),invalidRequest:e=>sc(oc.errorCodes.rpc.invalidRequest,e),invalidParams:e=>sc(oc.errorCodes.rpc.invalidParams,e),methodNotFound:e=>sc(oc.errorCodes.rpc.methodNotFound,e),internal:e=>sc(oc.errorCodes.rpc.internal,e),server:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:t}=e;if(!Number.isInteger(t)||t>-32005||t<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return sc(t,e)},invalidInput:e=>sc(oc.errorCodes.rpc.invalidInput,e),resourceNotFound:e=>sc(oc.errorCodes.rpc.resourceNotFound,e),resourceUnavailable:e=>sc(oc.errorCodes.rpc.resourceUnavailable,e),transactionRejected:e=>sc(oc.errorCodes.rpc.transactionRejected,e),methodNotSupported:e=>sc(oc.errorCodes.rpc.methodNotSupported,e),limitExceeded:e=>sc(oc.errorCodes.rpc.limitExceeded,e)},provider:{userRejectedRequest:e=>ac(oc.errorCodes.provider.userRejectedRequest,e),unauthorized:e=>ac(oc.errorCodes.provider.unauthorized,e),unsupportedMethod:e=>ac(oc.errorCodes.provider.unsupportedMethod,e),disconnected:e=>ac(oc.errorCodes.provider.disconnected,e),chainDisconnected:e=>ac(oc.errorCodes.provider.chainDisconnected,e),custom:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:t,message:r,data:n}=e;if(!r||"string"!=typeof r)throw new Error('"message" must be a nonempty string');return new nc.EthereumProviderError(t,r,n)}}},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getMessageFromCode=e.serializeError=e.EthereumProviderError=e.EthereumRpcError=e.ethErrors=e.errorCodes=void 0;const t=Yl;Object.defineProperty(e,"EthereumRpcError",{enumerable:!0,get:function(){return t.EthereumRpcError}}),Object.defineProperty(e,"EthereumProviderError",{enumerable:!0,get:function(){return t.EthereumProviderError}});const r=ec;Object.defineProperty(e,"serializeError",{enumerable:!0,get:function(){return r.serializeError}}),Object.defineProperty(e,"getMessageFromCode",{enumerable:!0,get:function(){return r.getMessageFromCode}});const n=rc;Object.defineProperty(e,"ethErrors",{enumerable:!0,get:function(){return n.ethErrors}});const i=tc;Object.defineProperty(e,"errorCodes",{enumerable:!0,get:function(){return i.errorCodes}})}(Jl);const cc=s(function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var n,i,o;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(i=n;0!==i--;)if(!e(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(o=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(i=n;0!==i--;)if(!Object.prototype.hasOwnProperty.call(r,o[i]))return!1;for(i=n;0!==i--;){var s=o[i];if(!e(t[s],r[s]))return!1}return!0}return t!=t&&r!=r});function uc(e){return null!==e&&"object"==typeof e&&"function"==typeof e.pipe}function dc(e){return function(e){return uc(e)&&!1!==e.writable&&"function"==typeof e._write&&"object"==typeof e._writableState}(e)&&function(e){return uc(e)&&!1!==e.readable&&"function"==typeof e._read&&"object"==typeof e._readableState}(e)}var fc={disconnected:()=>"Torus: Lost connection to Torus.",permanentlyDisconnected:()=>"Torus: Disconnected from iframe. Page reload required.",unsupportedSync:e=>`Torus: The Torus Ethereum provider does not support synchronous methods like ${e} without a callback parameter.`,invalidDuplexStream:()=>"Must provide a Node.js-style duplex stream.",invalidOptions:e=>`Invalid options. Received: { maxEventListeners: ${e}}`,invalidRequestArgs:()=>"Expected a single, non-array, object argument.",invalidRequestMethod:()=>"'args.method' must be a non-empty string.",invalidRequestParams:()=>"'args.params' must be an object or array if provided.",invalidLoggerObject:()=>"'args.logger' must be an object if provided.",invalidLoggerMethod:e=>`'args.logger' must include required method '${e}'.`},hc={connected:e=>`Torus: Connected to chain with ID "${e}".`};const pc={PRODUCTION:"production"},gc={BOTTOM_LEFT:"bottom-left",TOP_LEFT:"top-left",BOTTOM_RIGHT:"bottom-right",TOP_RIGHT:"top-right"};var bc={translations:{en:{embed:{continue:"Continue",actionRequired:"Authorization required",pendingAction:"Click continue to proceed with your request in a popup",cookiesRequired:"Cookies Required",enableCookies:"Please enable cookies in your browser preferences to access Torus",clickHere:"More Info"}},de:{embed:{continue:"Fortsetzen",actionRequired:"Autorisierung erforderlich",pendingAction:"Klicken Sie in einem Popup auf Weiter, um mit Ihrer Anfrage fortzufahren",cookiesRequired:"Cookies benötigt",enableCookies:"Bitte aktivieren Sie Cookies in Ihren Browsereinstellungen, um auf Torus zuzugreifen",clickHere:"Mehr Info"}},ja:{embed:{continue:"継続する",actionRequired:"認証が必要です",pendingAction:"続行をクリックして、ポップアップでリクエストを続行します",cookiesRequired:"必要なクッキー",enableCookies:"Torusにアクセスするには、ブラウザの設定でCookieを有効にしてください。",clickHere:"詳しくは"}},ko:{embed:{continue:"계속하다",actionRequired:"승인 필요",pendingAction:"팝업에서 요청을 진행하려면 계속을 클릭하십시오.",cookiesRequired:"쿠키 필요",enableCookies:"브라우저 환경 설정에서 쿠키를 활성화하여 Torus에 액세스하십시오.",clickHere:"더 많은 정보"}},zh:{embed:{continue:"继续",actionRequired:"需要授权",pendingAction:"单击继续以在弹出窗口中继续您的请求",cookiesRequired:"必填Cookie",enableCookies:"请在您的浏览器首选项中启用cookie以访问Torus。",clickHere:"更多信息"}}},localStorageKeyPrefix:"torus-"},yc=ds.getLogger("solana-embed");const mc=()=>Math.random().toString(36).slice(2),wc=async e=>{let t,r;switch(e){case"testing":t="https://solana-testing.tor.us",r="debug";break;case"development":t="http://localhost:8080",r="debug";break;default:t="https://solana.tor.us",r="error"}return{torusUrl:t,logLevel:r}},_c={height:660,width:375},vc={height:740,width:1315},Ec={height:700,width:1200},Sc={height:600,width:400};function Ac(e){let{width:t,height:r}=e;const n=void 0!==window.screenLeft?window.screenLeft:window.screenX,i=void 0!==window.screenTop?window.screenTop:window.screenY,o=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,s=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height,a=Math.abs((o-t)/2/1+n);return`titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=${r/1},width=${t/1},top=${Math.abs((s-r)/2/1+i)},left=${a}`}class Rc extends Zo{constructor(e,t){let{maxEventListeners:r=100,jsonRpcStreamName:n="provider"}=t;if(super(),E(this,"isTorus",void 0),E(this,"_rpcEngine",void 0),E(this,"jsonRpcConnectionEvents",void 0),E(this,"_state",void 0),!dc(e))throw new Error(fc.invalidDuplexStream());this.isTorus=!0,this.setMaxListeners(r),this._handleConnect=this._handleConnect.bind(this),this._handleDisconnect=this._handleDisconnect.bind(this),this._handleStreamDisconnect=this._handleStreamDisconnect.bind(this),this._rpcRequest=this._rpcRequest.bind(this),this._initializeState=this._initializeState.bind(this),this.request=this.request.bind(this),this.sendAsync=this.sendAsync.bind(this);const i=new is;Co(e,i,e,this._handleStreamDisconnect.bind(this,"Torus")),i.ignoreStream("phishing");const o=es();Co(o.stream,i.createStream(n),o.stream,this._handleStreamDisconnect.bind(this,"Torus RpcProvider"));const s=new ts;var a;s.push((e,t,r,n)=>{const i=e.id,o=Math.random().toString(36).slice(2);e.id=o,t.id=o,r(r=>{e.id=i,t.id=i,r()})}),s.push((e,t,r)=>{"string"==typeof e.method&&e.method||(t.error=Jl.ethErrors.rpc.invalidRequest({message:"The request 'method' must be a non-empty string.",data:e})),r(e=>{const{error:r}=t;return r?(yc.error(`Torus - RPC Error: ${r.message}`,r),e()):e()})}),s.push((a={origin:location.origin},function(e,t,r){r(r=>{t.error&&ds.warn("Error in RPC response:\n",t),e.isTorusInternal||(ds.info(`RPC (${a.origin}):`,e,"->",t),r())})})),s.push(o.middleware),this._rpcEngine=s,this.jsonRpcConnectionEvents=o.events}async request(e){if(!e||"object"!=typeof e||Array.isArray(e))throw Jl.ethErrors.rpc.invalidRequest({message:fc.invalidRequestArgs(),data:e});const{method:t,params:r}=e;if("string"!=typeof t||0===t.length)throw Jl.ethErrors.rpc.invalidRequest({message:fc.invalidRequestMethod(),data:e});if(void 0!==r&&!Array.isArray(r)&&("object"!=typeof r||null===r))throw Jl.ethErrors.rpc.invalidRequest({message:fc.invalidRequestParams(),data:e});return new Promise((e,n)=>{this._rpcRequest({method:t,params:r},Qo(e,n))})}send(e,t){this._rpcRequest(e,t)}sendAsync(e){return new Promise((t,r)=>{this._rpcRequest(e,Qo(t,r))})}_handleStreamDisconnect(e,t){!function(e,t,r){let n=`Torus: Lost connection to "${e}".`;t?.stack&&(n+=`\n${t.stack}`),yc.warn(n),r&&r.listenerCount("error")>0&&r.emit("error",n)}(e,t,this),this._handleDisconnect(!1,t?t.message:void 0)}}const Ic=e=>{const t=window.document.createElement("template"),r=e.trim();return t.innerHTML=r,t.content.firstChild};function Tc(e){return void 0===e.version}class Oc extends Zo{constructor(e){let{url:t,target:r,features:n,timeout:i=3e4}=e;super(),E(this,"url",void 0),E(this,"target",void 0),E(this,"features",void 0),E(this,"window",void 0),E(this,"windowTimer",void 0),E(this,"iClosedWindow",void 0),E(this,"timeout",void 0),this.url=t,this.target=r||"_blank",this.features=n||Ac(Ec),this.window=void 0,this.windowTimer=void 0,this.iClosedWindow=!1,this.timeout=i,this._setupTimer()}_setupTimer(){this.windowTimer=Number(setInterval(()=>{this.window&&this.window.closed&&(clearInterval(this.windowTimer),setTimeout(()=>{this.iClosedWindow||this.emit("close"),this.iClosedWindow=!1,this.window=void 0},this.timeout)),void 0===this.window&&clearInterval(this.windowTimer)},500))}open(){return this.window=window.open(this.url.href,this.target,this.features),this.window?.focus&&this.window.focus(),Promise.resolve()}close(){this.iClosedWindow=!0,this.window&&this.window.close()}redirect(e){e?window.location.replace(this.url.href):window.location.href=this.url.href}}class xc extends Rc{constructor(e,t){let{maxEventListeners:r=100,jsonRpcStreamName:n="provider"}=t;super(e,{maxEventListeners:r,jsonRpcStreamName:n}),E(this,"embedTranslations",void 0),E(this,"torusUrl",void 0),E(this,"dappStorageKey",void 0),E(this,"windowRefs",void 0),E(this,"tryWindowHandle",void 0),E(this,"torusAlertContainer",void 0),E(this,"torusIframe",void 0),this._state=A({},xc._defaultState),this.torusUrl="",this.dappStorageKey="";const i=bc.translations[(()=>{let e=window.navigator.language||"en-US";const t=e.split("-");return e=Object.prototype.hasOwnProperty.call(bc.translations,t[0])?t[0]:"en",e})()];this.embedTranslations=i.embed,this.windowRefs={},this.on("connect",()=>{this._state.isConnected=!0});this.jsonRpcConnectionEvents.on("notification",e=>{const{method:t,params:r}=e;if(t===Ll){const{isFullScreen:e,rid:t}=r;this._displayIframe({isFull:e,rid:t})}else if("create_window"===t){const{windowId:e,url:t}=r;this._createPopupBlockAlert(e,t)}else if(t===jl)this._handleCloseWindow(r);else if(t===Cl){const{currentLoginProvider:e}=r;this._state.isLoggedIn=!0,this._state.currentLoginProvider=e}else t===Bl&&(this._state.isLoggedIn=!1,this._state.currentLoginProvider=null,this._displayIframe())})}get isLoggedIn(){return this._state.isLoggedIn}get isIFrameFullScreen(){return this._state.isIFrameFullScreen}isConnected(){return this._state.isConnected}async _initializeState(e){try{const{torusUrl:t,dappStorageKey:r,torusAlertContainer:n,torusIframe:i}=e;this.torusUrl=t,this.dappStorageKey=r,this.torusAlertContainer=n,this.torusIframe=i,this.torusIframe.addEventListener("load",()=>{this._state.isIFrameFullScreen||this._displayIframe()});const{currentLoginProvider:o,isLoggedIn:s}=await this.request({method:Hl,params:[]});this._handleConnect(o,s)}catch(t){yc.error("Torus: Failed to get initial state. Please report this bug.",t)}finally{yc.info("initialized communication state"),this._state.initialized=!0,this.emit("_initialized")}}_handleWindow(e){let{url:t,target:r,features:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=new URL(t||`${this.torusUrl}/redirect?windowId=${e}`);this.dappStorageKey&&(i.hash?i.hash+=`&dappStorageKey=${this.dappStorageKey}`:i.hash=`#dappStorageKey=${this.dappStorageKey}`);const o=new Oc({url:i,target:r,features:n});o.open(),o.window?(this.windowRefs[e]=o,this.request({method:"opened_window",params:{windowId:e}}),o.once("close",()=>{delete this.windowRefs[e],this.request({method:$l,params:{windowId:e}})})):this._createPopupBlockAlert(e,i.href)}_displayIframe(){let{isFull:e=!1,rid:t=""}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r={};if(e)r.display="block",r.width="100%",r.height="100%",r.top="0px",r.right="0px",r.left="0px",r.bottom="0px";else switch(r.display=this._state.torusWidgetVisibility?"block":"none",r.height="70px",r.width="70px",this._state.buttonPosition){case gc.TOP_LEFT:r.top="0px",r.left="0px",r.right="auto",r.bottom="auto";break;case gc.TOP_RIGHT:r.top="0px",r.right="0px",r.left="auto",r.bottom="auto";break;case gc.BOTTOM_RIGHT:r.bottom="0px",r.right="0px",r.top="auto",r.left="auto";break;case gc.BOTTOM_LEFT:default:r.bottom="0px",r.left="0px",r.top="auto",r.right="auto"}Object.assign(this.torusIframe.style,r),this._state.isIFrameFullScreen=e,this.request({method:ql,params:{isIFrameFullScreen:e,rid:t}})}hideTorusButton(){this._state.torusWidgetVisibility=!1,this._displayIframe()}showTorusButton(){this._state.torusWidgetVisibility=!0,this._displayIframe()}_rpcRequest(e,t){const r=t,n=e;Array.isArray(n)||n.jsonrpc||(n.jsonrpc="2.0"),this.tryWindowHandle(n,r)}_handleConnect(e,t){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{currentLoginProvider:e,isLoggedIn:t}),yc.debug(hc.connected(e)))}_handleDisconnect(e,t){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!e){let r;this._state.isConnected=!1,e?(r=new Jl.EthereumRpcError(1013,t||fc.disconnected()),yc.debug(r)):(r=new Jl.EthereumRpcError(1011,t||fc.permanentlyDisconnected()),yc.error(r),this._state.currentLoginProvider=null,this._state.isLoggedIn=!1,this._state.torusWidgetVisibility=!1,this._state.isIFrameFullScreen=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",r)}}_handleCloseWindow(e){const{windowId:t}=e;this.windowRefs[t]&&(this.windowRefs[t].close(),delete this.windowRefs[t])}async _createPopupBlockAlert(e,t){const r=this.getLogoUrl(),n=Ic(`<div id="torusAlert" class="torus-alert--v2"><div id="torusAlert__logo"><img src="${r}" /></div><div><h1 id="torusAlert__title">${this.embedTranslations.actionRequired}</h1><p id="torusAlert__desc">${this.embedTranslations.pendingAction}</p></div></div>`),i=Ic(`<div><a id="torusAlert__btn">${this.embedTranslations.continue}</a></div>`),o=Ic('<div id="torusAlert__btn-container"></div>');o.appendChild(i),n.appendChild(o);(()=>{this.torusAlertContainer.appendChild(n)})(),(()=>{i.addEventListener("click",()=>{this._handleWindow(e,{url:t,target:"_blank",features:Ac(Sc)}),n.remove(),0===this.torusAlertContainer.children.length&&(this.torusAlertContainer.style.display="none")})})(),this.torusAlertContainer.style.display="block"}getLogoUrl(){return`${this.torusUrl}/images/torus_icon-blue.svg`}}E(xc,"_defaultState",{buttonPosition:"bottom-left",currentLoginProvider:null,isIFrameFullScreen:!1,hasEmittedConnection:!1,torusWidgetVisibility:!1,initialized:!1,isLoggedIn:!1,isPermanentlyDisconnected:!1,isConnected:!1});class Nc extends Rc{constructor(e,t){let{maxEventListeners:r=100,jsonRpcStreamName:n="provider"}=t;super(e,{maxEventListeners:r,jsonRpcStreamName:n}),E(this,"chainId",void 0),E(this,"selectedAddress",void 0),E(this,"tryWindowHandle",void 0),this._state=A({},Nc._defaultState),this.selectedAddress=null,this.chainId=null,this._handleAccountsChanged=this._handleAccountsChanged.bind(this),this._handleChainChanged=this._handleChainChanged.bind(this),this._handleUnlockStateChanged=this._handleUnlockStateChanged.bind(this),this.on("connect",()=>{this._state.isConnected=!0});this.jsonRpcConnectionEvents.on("notification",e=>{const{method:t,params:r}=e;t===Vl?this._handleAccountsChanged(r):t===Kl?this._handleUnlockStateChanged(r):t===Gl&&this._handleChainChanged(r)})}isConnected(){return this._state.isConnected}async _initializeState(){try{const{accounts:e,chainId:t,isUnlocked:r}=await this.request({method:zl,params:[]});this.emit("connect",{chainId:t}),this._handleChainChanged({chainId:t}),this._handleUnlockStateChanged({accounts:e,isUnlocked:r}),this._handleAccountsChanged(e)}catch(e){yc.error("Torus: Failed to get initial state. Please report this bug.",e)}finally{yc.info("initialized provider state"),this._state.initialized=!0,this.emit("_initialized")}}_rpcRequest(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=t;const i=e;if(!Array.isArray(i))if(i.jsonrpc||(i.jsonrpc="2.0"),"solana_accounts"===i.method||"solana_requestAccounts"===i.method)n=(e,n)=>{this._handleAccountsChanged(n.result||[],"solana_accounts"===i.method,r),t(e,n)};else if("wallet_getProviderState"===i.method)return void this._rpcEngine.handle(e,n);this.tryWindowHandle(i,n)}_handleConnect(e){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{chainId:e}),yc.debug(hc.connected(e)))}_handleDisconnect(e,t){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!e){let r;this._state.isConnected=!1,e?(r=new Jl.EthereumRpcError(1013,t||fc.disconnected()),yc.debug(r)):(r=new Jl.EthereumRpcError(1011,t||fc.permanentlyDisconnected()),yc.error(r),this.chainId=null,this._state.accounts=null,this.selectedAddress=null,this._state.isUnlocked=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",r)}}_handleAccountsChanged(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e;Array.isArray(n)||(yc.error("Torus: Received non-array accounts parameter. Please report this bug.",n),n=[]);for(const i of e)if("string"!=typeof i){yc.error("Torus: Received non-string account. Please report this bug.",e),n=[];break}cc(this._state.accounts,n)||(t&&Array.isArray(this._state.accounts)&&this._state.accounts.length>0&&!r&&yc.error('Torus: "solana_accounts" unexpectedly updated accounts. Please report this bug.',n),this._state.accounts=n,this.emit("accountsChanged",n)),this.selectedAddress!==n[0]&&(this.selectedAddress=n[0]||null)}_handleChainChanged(){let{chainId:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e?"loading"===e?this._handleDisconnect(!0):(this._handleConnect(e),e!==this.chainId&&(this.chainId=e,this._state.initialized&&this.emit("chainChanged",this.chainId))):yc.error("Torus: Received invalid network parameters. Please report this bug.",{chainId:e})}_handleUnlockStateChanged(){let{accounts:e,isUnlocked:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"boolean"==typeof t?t!==this._state.isUnlocked&&(this._state.isUnlocked=t,this._handleAccountsChanged(e||[])):yc.error("Torus: Received invalid isUnlocked parameter. Please report this bug.",{isUnlocked:t})}}function Pc(e){return new Promise((t,r)=>{try{const r=document.createElement("img");r.onload=()=>t(!0),r.onerror=()=>t(!1),r.src=e}catch(Dc){r(Dc)}})}E(Nc,"_defaultState",{accounts:null,isConnected:!1,isUnlocked:!1,initialized:!1,isPermanentlyDisconnected:!1,hasEmittedConnection:!1});const kc=e=>{const{document:t}=e,r=t.querySelector('head > meta[property="og:site_name"]');if(r)return r.content;const n=t.querySelector('head > meta[name="title"]');return n?n.content:t.title&&t.title.length>0?t.title:e.location.hostname};async function Lc(e){try{const{document:t}=e;let r=t.querySelector('head > link[rel="shortcut icon"]');return r&&await Pc(r.href)?r.href:(r=Array.from(t.querySelectorAll('head > link[rel="icon"]')).find(e=>Boolean(e.href)),r&&await Pc(r.href)?r.href:"")}catch(t){return""}}const jc=["send_transaction","sign_transaction","sign_all_transactions","sign_message","connect"],Cc=[Fl],Bc=function(e){let t;try{t=window[e];const r="__storage_test__";return t.setItem(r,r),t.removeItem(r),!0}catch(r){const e=r;return e&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&t&&0!==t.length}}("localStorage");!async function(){try{if("undefined"==typeof document)return;const e=document.createElement("link"),{torusUrl:t}=await wc("production");e.href=`${t}/frame`,e.crossOrigin="anonymous",e.type="text/html",e.rel="prefetch",e.relList&&e.relList.supports&&e.relList.supports("prefetch")&&document.head.appendChild(e)}catch(e){yc.warn(e)}}();class Mc{constructor(){let{modalZIndex:e=99999}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};E(this,"isInitialized",void 0),E(this,"torusAlert",void 0),E(this,"modalZIndex",void 0),E(this,"alertZIndex",void 0),E(this,"requestedLoginProvider",void 0),E(this,"provider",void 0),E(this,"communicationProvider",void 0),E(this,"dappStorageKey",void 0),E(this,"isTopupHidden",!1),E(this,"torusAlertContainer",void 0),E(this,"torusUrl",void 0),E(this,"torusIframe",void 0),E(this,"styleLink",void 0),this.torusUrl="",this.isInitialized=!1,this.requestedLoginProvider=null,this.modalZIndex=e,this.alertZIndex=e+1e3,this.dappStorageKey=""}get isLoggedIn(){return!!this.communicationProvider&&this.communicationProvider.isLoggedIn}async init(){let{buildEnv:e=pc.PRODUCTION,enableLogging:t=!1,network:r,showTorusButton:n=!1,useLocalStorage:i=!1,buttonPosition:o=gc.BOTTOM_LEFT,apiKey:s="torus-default",extraParams:a={},whiteLabel:l}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.isInitialized)throw new Error("Already initialized");const{torusUrl:c,logLevel:u}=await wc(e);yc.enableAll(),yc.info(c,"url loaded"),yc.info("Solana Embed Version :2.1.0"),this.torusUrl=c,yc.setDefaultLevel(u),t?yc.enableAll():yc.disableAll();const d=this.handleDappStorageKey(i),f=new URL(c);f.pathname.endsWith("/")?f.pathname+="frame":f.pathname+="/frame";const h=new URLSearchParams;return d&&h.append("dappStorageKey",d),h.append("origin",window.location.origin),f.hash=h.toString(),this.torusIframe=Ic(`<iframe\n        id="torusIframe"\n        class="torusIframe"\n        src="${f.href}"\n        style="display: none; position: fixed; top: 0; right: 0; width: 100%;\n        height: 100%; border: none; border-radius: 0; z-index: ${this.modalZIndex.toString()}"\n      ></iframe>`),this.torusAlertContainer=Ic(`<div id="torusAlertContainer" style="display:none; z-index: ${this.alertZIndex.toString()}"></div>`),this.styleLink=Ic(`<link href="${c}/css/widget.css" rel="stylesheet" type="text/css">`),new Promise((e,t)=>{try{this.torusIframe.addEventListener("load",async()=>{const t=await(async()=>({name:kc(window),icon:await Lc(window)}))();this.torusIframe.contentWindow.postMessage({buttonPosition:o,apiKey:s,network:r,dappMetadata:t,extraParams:a,whiteLabel:l},f.origin),await this._setupWeb3({torusUrl:c}),n&&this.showTorusButton(),l?.topupHide?this.isTopupHidden=l.topupHide:this.hideTorusButton(),this.isInitialized=!0,window.torus=this,e()}),window.document.head.appendChild(this.styleLink),window.document.body.appendChild(this.torusIframe),window.document.body.appendChild(this.torusAlertContainer)}catch(i){t(i)}})}async login(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.isInitialized)throw new Error("Call init() first");try{this.requestedLoginProvider=e.loginProvider||null,this.requestedLoginProvider||this.communicationProvider._displayIframe({isFull:!0});const t=await new Promise((t,r)=>{this.provider._rpcRequest({method:"solana_requestAccounts",params:[this.requestedLoginProvider,e.login_hint]},Qo(t,r))});if(Array.isArray(t)&&t.length>0)return t;throw new Error("Login failed")}catch(t){throw yc.error("login failed",t),t}finally{this.communicationProvider.isIFrameFullScreen&&this.communicationProvider._displayIframe()}}async loginWithPrivateKey(e){if(!this.isInitialized)throw new Error("Call init() first");const{privateKey:t,userInfo:r}=e,{success:n}=await this.communicationProvider.request({method:"login_with_private_key",params:{privateKey:t,userInfo:r}});if(!n)throw new Error("Login Failed")}async logout(){if(!this.communicationProvider.isLoggedIn)throw new Error("Not logged in");await this.communicationProvider.request({method:Ml,params:[]}),this.requestedLoginProvider=null}async cleanUp(){this.communicationProvider.isLoggedIn&&await this.logout(),this.clearInit()}clearInit(){function e(e){return e instanceof Element||e instanceof Document}e(this.styleLink)&&window.document.body.contains(this.styleLink)&&(this.styleLink.remove(),this.styleLink=void 0),e(this.torusIframe)&&window.document.body.contains(this.torusIframe)&&(this.torusIframe.remove(),this.torusIframe=void 0),e(this.torusAlertContainer)&&window.document.body.contains(this.torusAlertContainer)&&(this.torusAlert=void 0,this.torusAlertContainer.remove(),this.torusAlertContainer=void 0),this.isInitialized=!1}hideTorusButton(){this.communicationProvider.hideTorusButton()}showTorusButton(){this.communicationProvider.showTorusButton()}async setProvider(e){await this.communicationProvider.request({method:Fl,params:A({},e)})}async showWallet(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=await this.communicationProvider.request({method:Dl,params:[]}),n=e?`/${e}`:"",i=new URL(`${this.torusUrl}/wallet${n}`);i.searchParams.append("instanceId",r),Object.keys(t).forEach(e=>{i.searchParams.append(e,t[e])}),this.dappStorageKey&&(i.hash=`#dappStorageKey=${this.dappStorageKey}`);new Oc({url:i,features:Ac(vc)}).open()}async getUserInfo(){return await this.communicationProvider.request({method:Ul,params:[]})}async initiateTopup(e,t){if(!this.isInitialized)throw new Error("Torus is not initialized");const r=mc();this.communicationProvider._handleWindow(r);return await this.communicationProvider.request({method:Wl,params:{provider:e,params:t,windowId:r}})}async getAccounts(){return await this.provider.request({method:"getAccounts",params:[]})}async sendTransaction(e){const t=Tc(e),r=t?e.serialize({requireAllSignatures:!1}).toString("hex"):Buffer.from(e.serialize()).toString("hex");return await this.provider.request({method:"send_transaction",params:{message:r,isLegacyTransaction:t}})}async signAndSendTransaction(e,t){const r=Tc(e),n=r?e.serialize({requireAllSignatures:!1}).toString("hex"):Buffer.from(e.serialize()).toString("hex");return{signature:await this.provider.request({method:"send_transaction",params:{message:n,options:t,isLegacyTransaction:r}})}}async signTransaction(e){const t=Tc(e),r=t?e.serializeMessage().toString("hex"):Buffer.from(e.message.serialize()).toString("hex"),n=await this.provider.request({method:"sign_transaction",params:{message:r,messageOnly:!0,isLegacyTransaction:t}}),i=JSON.parse(n),s={publicKey:new o(i.publicKey),signature:Buffer.from(i.signature,"hex")};return e.addSignature(s.publicKey,s.signature),e}async signAllTransactions(e){let t;const r=e.map(e=>(t=Tc(e),t?e.serializeMessage().toString("hex"):Buffer.from(e.message.serialize()).toString("hex"))),n=(await this.provider.request({method:"sign_all_transactions",params:{message:r,messageOnly:!0,isLegacyTransaction:t}})).map(e=>{const t=JSON.parse(e);return{publicKey:new o(t.publicKey),signature:Buffer.from(t.signature,"hex")}});return e.forEach((e,t)=>(e.addSignature(n[t].publicKey,n[t].signature),e)),e}async signMessage(e){return await this.provider.request({method:"sign_message",params:{data:e}})}async getGaslessPublicKey(){return await this.provider.request({method:"get_gasless_public_key",params:[]})}handleDappStorageKey(e){const t=`${bc.localStorageKeyPrefix}${window.location.hostname}`;let r="";if(Bc&&e){const e=window.localStorage.getItem(t);if(e)r=e;else{const e=`torus-app-${mc()}`;window.localStorage.setItem(t,e),r=e}}return this.dappStorageKey=r,r}async _setupWeb3(e){yc.info("setupWeb3 running");const t=new Do({name:"embed_torus",target:"iframe_torus",targetWindow:this.torusIframe.contentWindow}),r=new Do({name:"embed_communication",target:"iframe_communication",targetWindow:this.torusIframe.contentWindow}),n=new Nc(t,{}),i=new xc(r,{});n.tryWindowHandle=(e,t)=>{const r=e;if(!Array.isArray(r)&&jc.includes(r.method)){if(!this.communicationProvider.isLoggedIn)throw new Error("User Not Logged In");const e=mc();i._handleWindow(e,{target:"_blank",features:Ac(Sc)}),r.windowId=e}n._rpcEngine.handle(r,t)},i.tryWindowHandle=(e,t)=>{const r=e;if(!Array.isArray(r)&&Cc.includes(r.method)){const e=mc();i._handleWindow(e,{target:"_blank",features:Ac(_c)}),r.params.windowId=e}i._rpcEngine.handle(r,t)};const o=e=>{const t=n[e],r=this;n[e]=function(e,n){const{method:i,params:o=[]}=e;if("solana_requestAccounts"===i){if(!n)return r.login({loginProvider:o[0]});r.login({loginProvider:o[0]}).then(e=>n(null,e)).catch(e=>n(e))}return t.apply(this,[e,n])}};o("request"),o("sendAsync"),o("send");const s=new Proxy(n,{deleteProperty:()=>!0}),a=new Proxy(i,{deleteProperty:()=>!0});this.provider=s,this.communicationProvider=a,await Promise.all([n._initializeState(),i._initializeState(A(A({},e),{},{dappStorageKey:this.dappStorageKey,torusAlertContainer:this.torusAlertContainer,torusIframe:this.torusIframe}))]),yc.debug("Torus - injected provider")}}export{gc as BUTTON_POSITION,pc as TORUS_BUILD_ENV,Nc as TorusInPageProvider,Mc as default};
